{"version":3,"sources":["../../src/server/server-route-utils.ts"],"names":["getCustomRoute","createHeaderRoute","stringifyQuery","createRedirectRoute","params","rule","type","restrictedRedirectPaths","match","getPathMatch","source","strict","removeUnnamedParams","regexModifier","internal","regex","modifyRouteRegex","undefined","name","fn","_req","_res","_params","_parsedUrl","finished","headerRoute","matchesBasePath","matchesLocale","matchesLocaleAPIRoutes","matchesTrailingSlash","has","missing","res","hasParams","Object","keys","length","header","headers","key","value","compileNonPath","toLowerCase","appendHeader","setHeader","req","query","initialQuery","getRequestMeta","initialQueryValues","values","stringifyQs","encodeURIComponent","some","initialQueryVal","Array","isArray","includes","redirectRoute","statusCode","parsedUrl","parsedDestination","prepareDestination","appendParamsToQuery","destination","search","updatedDestination","formatUrl","startsWith","normalizeRepeatedSlashes","redirect","getRedirectStatus","body","send"],"mappings":"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"}