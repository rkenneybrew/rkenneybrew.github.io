{"version":3,"sources":["../../../../src/server/web/sandbox/context.ts"],"names":["clearModuleContext","getModuleContext","WEBPACK_HASH_REGEX","moduleContexts","Map","pendingModuleCaches","path","content","handleContext","key","cache","context","prev","paths","get","replace","toString","delete","loadWasm","wasm","modules","Promise","all","map","binding","module","WebAssembly","compile","fs","readFile","filePath","name","buildEnvironmentVariablesFrom","pairs","Object","keys","process","env","fromEntries","NEXT_RUNTIME","throwUnsupportedAPIError","error","Error","decorateServerError","COMPILER_NAMES","edgeServer","createProcessPolyfill","processPolyfill","overridenValue","defineProperty","undefined","set","value","enumerable","addStub","getDecorateUnhandledError","runtime","EdgeRuntimeError","evaluate","getDecorateUnhandledRejection","rejected","reason","NativeModuleMap","mods","pick","BufferImplementation","EventsImplementation","AsyncHooksImplementation","AssertImplementation","UtilImplementation","entries","createModuleContext","options","warnedEvals","Set","warnedWasmCodegens","edgeFunctionEntry","EdgeRuntime","codeGeneration","NODE_ENV","strings","extend","WebSocket","require","id","TypeError","__next_eval__","fn","has","warning","getServerError","captureStackTrace","add","onWarning","__next_webassembly_compile__","__next_webassembly_instantiate__","result","instantiatedFromBuffer","hasOwnProperty","__fetch","fetch","input","init","callingError","assetResponse","fetchInlineAsset","assets","distDir","headers","Headers","prevs","split","concat","moduleName","join","response","url","String","catch","err","message","stack","__Request","Request","constructor","validateURL","next","__redirect","Response","redirect","bind","args","EDGE_UNSUPPORTED_NODE_APIS","assign","AsyncLocalStorage","decorateUnhandledError","addEventListener","decorateUnhandledRejection","getModuleContextShared","deferredModuleContext","lazyModuleContext","useCache","moduleContext","evaluateInContext","filepath","readFileSync","runInContext","filename"],"mappings":"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"}