{"version":3,"sources":["../../../src/server/lib/mock-request.ts"],"names":["Stream","toNodeHeaders","MockedRequest","Readable","constructor","url","headers","method","socket","httpVersion","httpVersionMajor","httpVersionMinor","Proxy","get","_target","prop","Error","_read","emit","connection","aborted","complete","trailers","rawTrailers","rawHeaders","setTimeout","MockedResponse","Writable","statusCode","statusMessage","finished","headersSent","buffers","Headers","hasStreamed","Promise","resolve","reject","on","err","write","chunk","push","Buffer","isBuffer","from","_implicitHeader","_write","_encoding","callback","writeHead","length","Array","isArray","i","setHeader","key","value","Object","entries","hasHeader","name","has","getHeader","undefined","getHeaders","getHeaderNames","keys","delete","v","append","set","toString","removeHeader","assignSocket","detachSocket","writeContinue","writeProcessing","upgrading","chunkedEncoding","shouldKeepAlive","useChunkedEncodingByDefault","sendDate","addTrailers","flushHeaders","createRequestResponseMocks","req","res"],"mappings":"AAUA,OAAOA,YAAY,SAAQ;AAC3B,SAASC,aAAa,QAAQ,eAAc;AAS5C,OAAO,MAAMC,sBAAsBF,OAAOG,QAAQ;IA0BhDC,YAAY,EAAEC,IAAG,EAAEC,QAAO,EAAEC,OAAM,EAAEC,QAAS,IAAI,CAAA,EAAwB,CAAE;QACzE,KAAK;QApBP,8EAA8E;aAC9DC,cAAc;aACdC,mBAAmB;aACnBC,mBAAmB;QAEnC,qEAAqE;QACrE,qDAAqD;aAC9CH,SAAiB,IAAII,MAAiB,CAAC,GAAgB;YAC5DC,KAAK,CAACC,SAASC,OAAS;gBACtB,IAAIA,SAAS,aAAa;oBACxB,MAAM,IAAIC,MAAM,0BAAyB;gBAC3C,CAAC;gBAED,0EAA0E;gBAC1E,kDAAkD;gBAClD,OAAO,KAAK;YACd;QACF;QAKE,IAAI,CAACX,GAAG,GAAGA;QACX,IAAI,CAACC,OAAO,GAAGA;QACf,IAAI,CAACC,MAAM,GAAGA;QAEd,IAAIC,QAAQ;YACV,IAAI,CAACA,MAAM,GAAGA;QAChB,CAAC;IACH;IAEOS,QAAc;QACnB,IAAI,CAACC,IAAI,CAAC;QACV,IAAI,CAACA,IAAI,CAAC;IACZ;IAEA;;;;GAIC,GACD,IAAWC,aAAqB;QAC9B,OAAO,IAAI,CAACX,MAAM;IACpB;IAEA,wEAAwE;IACxE,oBAAoB;IAEpB,IAAWY,UAAmB;QAC5B,MAAM,IAAIJ,MAAM,0BAAyB;IAC3C;IAEA,IAAWK,WAAoB;QAC7B,MAAM,IAAIL,MAAM,0BAAyB;IAC3C;IAEA,IAAWM,WAAgC;QACzC,MAAM,IAAIN,MAAM,0BAAyB;IAC3C;IAEA,IAAWO,cAAwB;QACjC,MAAM,IAAIP,MAAM,0BAAyB;IAC3C;IAEA,IAAWQ,aAAuB;QAChC,MAAM,IAAIR,MAAM,2BAA0B;IAC5C;IAEOS,aAAmB;QACxB,MAAM,IAAIT,MAAM,2BAA0B;IAC5C;AACF,CAAC;AAMD,OAAO,MAAMU,uBAAuB1B,OAAO2B,QAAQ;IAmBjDvB,YAAY,EAAEI,QAAS,IAAI,CAAA,EAAyB,CAAE;QACpD,KAAK;aAnBAoB,aAAqB;aACrBC,gBAAwB;aACfC,WAAW,KAAK;aAChBC,cAAc,KAAK;QAQnC;;GAEC,QACeC,UAAoB,EAAE;aAErB1B,UAAU,IAAI2B;QAK7B,IAAI,CAACzB,MAAM,GAAGA;QAEd,sEAAsE;QACtE,6BAA6B;QAC7B,IAAI,CAAC0B,WAAW,GAAG,IAAIC,QAAiB,CAACC,SAASC,SAAW;YAC3D,IAAI,CAACC,EAAE,CAAC,UAAU,IAAMF,QAAQ,IAAI;YACpC,IAAI,CAACE,EAAE,CAAC,OAAO,IAAMF,QAAQ,IAAI;YACjC,IAAI,CAACE,EAAE,CAAC,SAAS,CAACC,MAAQF,OAAOE;QACnC;IACF;IAEA;;;;GAIC,GACD,IAAWpB,aAA4B;QACrC,OAAO,IAAI,CAACX,MAAM;IACpB;IAEOgC,MAAMC,KAAsB,EAAE;QACnC,IAAI,CAACT,OAAO,CAACU,IAAI,CAACC,OAAOC,QAAQ,CAACH,SAASA,QAAQE,OAAOE,IAAI,CAACJ,MAAM;QAErE,OAAO,IAAI;IACb;IAEA;;;;;;GAMC,GACD,AAAOK,kBAAkB,CAAC;IAEnBC,OACLN,KAAsB,EACtBO,SAAiB,EACjBC,QAAoB,EACpB;QACA,IAAI,CAACT,KAAK,CAACC;QAEX,sEAAsE;QACtE,wEAAwE;QACxE,mDAAmD;QACnD,EAAE;QACF,6FAA6F;QAC7FQ;IACF;IAWOC,UACLtB,UAAkB,EAClBC,aAIa,EACbvB,OAAgE,EAC1D;QACN,IAAI,CAACA,WAAW,OAAOuB,kBAAkB,UAAU;YACjDvB,UAAUuB;QACZ,OAAO,IAAI,OAAOA,kBAAkB,YAAYA,cAAcsB,MAAM,GAAG,GAAG;YACxE,IAAI,CAACtB,aAAa,GAAGA;QACvB,CAAC;QAED,IAAIvB,SAAS;YACX,qEAAqE;YACrE,mEAAmE;YACnE,2DAA2D;YAC3D,EAAE;YACF,qFAAqF;YACrF,EAAE;YACF,uEAAuE;YACvE,kCAAkC;YAClC,IAAI8C,MAAMC,OAAO,CAAC/C,UAAU;gBAC1B,0EAA0E;gBAC1E,oEAAoE;gBACpE,sEAAsE;gBACtE,qDAAqD;gBACrD,IAAK,IAAIgD,IAAI,GAAGA,IAAIhD,QAAQ6C,MAAM,EAAEG,KAAK,EAAG;oBAC1C,2DAA2D;oBAC3D,IAAI,CAACC,SAAS,CAACjD,OAAO,CAACgD,EAAE,EAAYhD,OAAO,CAACgD,IAAI,EAAE;gBACrD;YACF,OAAO;gBACL,KAAK,MAAM,CAACE,KAAKC,MAAM,IAAIC,OAAOC,OAAO,CAACrD,SAAU;oBAClD,wBAAwB;oBACxB,IAAI,OAAOmD,UAAU,aAAa,QAAQ;oBAE1C,IAAI,CAACF,SAAS,CAACC,KAAKC;gBACtB;YACF,CAAC;QACH,CAAC;QAED,IAAI,CAAC7B,UAAU,GAAGA;QAElB,OAAO,IAAI;IACb;IAEOgC,UAAUC,IAAY,EAAW;QACtC,OAAO,IAAI,CAACvD,OAAO,CAACwD,GAAG,CAACD;IAC1B;IAEOE,UAAUF,IAAY,EAAsB;QACjD,OAAO,IAAI,CAACvD,OAAO,CAACO,GAAG,CAACgD,SAASG;IACnC;IAEOC,aAAkC;QACvC,OAAOhE,cAAc,IAAI,CAACK,OAAO;IACnC;IAEO4D,iBAA2B;QAChC,OAAOd,MAAMP,IAAI,CAAC,IAAI,CAACvC,OAAO,CAAC6D,IAAI;IACrC;IAEOZ,UAAUM,IAAY,EAAEJ,KAAyB,EAAQ;QAC9D,IAAIL,MAAMC,OAAO,CAACI,QAAQ;YACxB,qEAAqE;YACrE,uEAAuE;YACvE,IAAI,CAACnD,OAAO,CAAC8D,MAAM,CAACP;YAEpB,KAAK,MAAMQ,KAAKZ,MAAO;gBACrB,IAAI,CAACnD,OAAO,CAACgE,MAAM,CAACT,MAAMQ;YAC5B;QACF,OAAO,IAAI,OAAOZ,UAAU,UAAU;YACpC,IAAI,CAACnD,OAAO,CAACiE,GAAG,CAACV,MAAMJ,MAAMe,QAAQ;QACvC,OAAO;YACL,IAAI,CAAClE,OAAO,CAACiE,GAAG,CAACV,MAAMJ;QACzB,CAAC;IACH;IAEOgB,aAAaZ,IAAY,EAAQ;QACtC,IAAI,CAACvD,OAAO,CAAC8D,MAAM,CAACP;IACtB;IAEA,wEAAwE;IACxE,oBAAoB;IAEba,eAAe;QACpB,MAAM,IAAI1D,MAAM,2BAA0B;IAC5C;IAEO2D,eAAqB;QAC1B,MAAM,IAAI3D,MAAM,2BAA0B;IAC5C;IAEO4D,gBAAsB;QAC3B,MAAM,IAAI5D,MAAM,2BAA0B;IAC5C;IAEO6D,kBAAwB;QAC7B,MAAM,IAAI7D,MAAM,2BAA0B;IAC5C;IAEA,IAAW8D,YAAqB;QAC9B,MAAM,IAAI9D,MAAM,2BAA0B;IAC5C;IAEA,IAAW+D,kBAA2B;QACpC,MAAM,IAAI/D,MAAM,2BAA0B;IAC5C;IAEA,IAAWgE,kBAA2B;QACpC,MAAM,IAAIhE,MAAM,2BAA0B;IAC5C;IAEA,IAAWiE,8BAAuC;QAChD,MAAM,IAAIjE,MAAM,2BAA0B;IAC5C;IAEA,IAAWkE,WAAoB;QAC7B,MAAM,IAAIlE,MAAM,2BAA0B;IAC5C;IAEOS,aAAmB;QACxB,MAAM,IAAIT,MAAM,2BAA0B;IAC5C;IAEOmE,cAAoB;QACzB,MAAM,IAAInE,MAAM,2BAA0B;IAC5C;IAEOoE,eAAqB;QAC1B,MAAM,IAAIpE,MAAM,2BAA0B;IAC5C;AACF,CAAC;AASD,OAAO,SAASqE,2BAA2B,EACzChF,IAAG,EACHC,SAAU,CAAC,EAAC,EACZC,QAAS,MAAK,EACdC,QAAS,IAAI,CAAA,EACgB,EAAE;IAC/B,OAAO;QACL8E,KAAK,IAAIpF,cAAc;YAAEG;YAAKC;YAASC;YAAQC;QAAO;QACtD+E,KAAK,IAAI7D,eAAe;YAAElB;QAAO;IACnC;AACF,CAAC"}