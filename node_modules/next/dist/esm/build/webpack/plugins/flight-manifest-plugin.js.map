{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["path","webpack","sources","CLIENT_REFERENCE_MANIFEST","SYSTEM_ENTRYPOINTS","relative","sep","isClientComponentEntryModule","isCSSMod","getProxiedPluginState","traverseModules","nonNullable","WEBPACK_LAYERS","getClientReferenceModuleKey","pluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","PLUGIN_NAME","ClientReferenceManifestPlugin","constructor","options","dev","appDir","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","make","processAssets","name","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifest","ssrModuleMapping","edgeSSRModuleMapping","cssFiles","clientModules","clientRequestsSet","collectClientRequest","mod","resource","buildInfo","rsc","requests","forEach","r","add","chunkGroups","chunkGroup","recordModule","id","chunkCSS","isCSSModule","layer","appClient","type","_identifier","slice","lastIndexOf","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","resourceResolveData","startsWith","replace","exportName","chunks","has","exportsInfo","moduleGraph","getExportsInfo","isAsyncModule","cjsExports","map","dep","base","names","filter","clientRefs","Boolean","flat","getAppPathRequiredChunks","requiredChunk","files","file","endsWith","requiredChunks","esmResource","test","addClientReference","async","edgeExportName","addSSRIdMapping","moduleExportedKeys","exports","exportInfo","provided","key","chunk","chunkModules","chunkGraph","getChunkModulesIterable","f","modId","getModuleId","anyModule","modules","concatenatedMod","entryCSSFiles","addCSSFilesToEntry","entryName","concat","getFiles","length","getParents","parent","json","JSON","stringify","undefined","RawSource"],"mappings":"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"}