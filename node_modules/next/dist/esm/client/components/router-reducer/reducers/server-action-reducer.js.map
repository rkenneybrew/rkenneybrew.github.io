{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-action-reducer.ts"],"names":["callServer","NEXT_ROUTER_STATE_TREE","NEXT_URL","RSC_CONTENT_TYPE_HEADER","createRecordFromThenable","readRecordValue","createFromFetch","encodeReply","PrefetchKind","addBasePath","createHrefFromUrl","RedirectType","getRedirectError","fetchServerAction","state","actionId","actionArgs","body","res","fetch","method","headers","Accept","JSON","stringify","tree","nextUrl","location","get","redirectLocation","URL","window","origin","undefined","isFlightResponse","result","Promise","resolve","actionFlightData","actionResult","serverActionReducer","action","mutable","serverActionApplied","inFlightServerAction","previousTree","previousUrl","canonicalUrl","href","previousCacheEntry","prefetchCache","set","data","kind","TEMPORARY","prefetchTime","Date","now","treeAtTimeOfPrefetch","lastUsedTime","reject","toString","push","setTimeout","changeByServerResponse","e","status","value"],"mappings":"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"}