# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.10.0] - 2023-04-24
### Added
- `sanitiseInput` method to request helpers
- XSS package

## [2.9.1] - 2023-01-31
### Added
- Renovate config file

## [2.9.0] - 2023-01-10
### Changed
- Bump dependencies to keep the project up-to-date
### Removed
- Unnecessary use of `.debug` logs

## [2.8.2] - 2022-11-17
### Removed
- ETag header on static files to avoid cache mismatching

## [2.8.1] - 2022-11-15
### Fixed
- Cache control types

## [2.8.0] - 2022-11-14
### Added
- Cache control for static files

## [2.7.0] - 2022-08-22
### Added
- Strict routing parameter to allow treating "/foo" and "/foo/" as different
- New `buildQueryString` function to the `request` helper 

## [2.6.0] - 2022-07-25
### Updated
- `buildOptions` helper: use sessionSecret from argument if not in process.env

## [2.5.5] - 2022-07-19
### Added
- Unit tests for `buildOptions` helper

## [2.5.4] - 2022-07-08
### Added
- Generating apolitical-auth token function

## [2.5.3] - 2022-06-29
### Changed
- Pipelines ref

## [2.5.2] - 2022-06-08
### Added
- Probes prefix to support custom path

## [2.5.1] - 2022-06-01
### Added
- Cache to `readinessCheck` and `livenessCheck` checks to avoid overload

## [2.5.0] - 2022-05-06
### Added
- Custom `readinessCheck` and `livenessCheck` to define probes externally
- New probe `/health` endpoint to combine readiness and liveness

## [2.4.2] - 2022-03-03
### Bumped
- Version number for testing

## [2.4.1] - 2022-03-02
### Changed
- Update authorisation middleware to include req.user check in cases where we would like to protect endpoints

## [2.4.0] - 2022-02-22
### Added
- User slug to error logs as metadata
### Changed
- Transition to new logger middleware format

## [2.3.3] - 2022-02-21
### Changed
- maging sure index.html is not considered as a static asset by the middleware loader

## [2.3.2] - 2022-02-21
### Changed
- loading static files middleware after the app has been loaded

## [2.3.1] - 2022-02-15
### Changed
- Body parser types

## [2.3.0] - 2022-02-14
### Added
- fallbackController

## [2.2.0] - 2022-02-07
### Changed
- Pipeline uses `Node-Publish` template

## [2.1.1] - 2022-01-31
### Fixed
- Authorisation logic

## [2.1.0] - 2022-01-21
### Added
- Prerender middleware
### Fixed
- Node.js version

## [2.0.1] - 2022-01-21
### Added
- Correlation when logging from error middleware

## [2.0.0] - 2022-01-20
### Added
- Authorisation middleware
- New logging middleware for production (based on Google Winston)
### Changed
- Updated dependencies
- Upgraded Node.js version
- Revamped GitLab pipelines
### Removed
- Unused logger helper

## [1.5.2] - 2021-10-18
### Changed
- Allow cors options to be passed in as params on start

## [1.5.1] - 2021-09-15
### Added
- Extend error class to handle too many request error

## [1.5.0] - 2021-09-06
### Added
- Documentation

## [1.4.0] - 2021-08-24
### Added
- Testing helper `@apolitical/testing`
- Auth middleware
### Fixed
- Static loader

## [1.3.1] - 2021-07-08
### Fixed
- Documantion not exposed on production

## [1.3.0] - 2021-06-28
### Added
- Support for on error redirection URL
### Fixed
- Swagger document redirection

## [1.2.4] - 2021-06-15
### Changed
- Auth0 request per minute config value

## [1.2.3] - 2021-06-15
### Added
- Auth0 JWT middleware error handling

## [1.2.2] - 2021-05-25
### Added
- Admin property to default JWT payload

## [1.2.1] - 2021-03-22
### Added
- External static loader (minor refactor)

## [1.2.0] - 2021-03-19
### Added
- External static loader

## [1.1.0] - 2021-03-18
### Added
- Auth0 JWT authorisation logic
- JWT decoder

## [1.0.0] - 2021-02-08
### Bumped
- First version under `@apolitical`
### Added
- Cloud native health connect
- Static files serving
- Compression
### Updated
- Apolitical Logger
### Fixed
- Error logs to make use of service name
### Renamed
- Generic app loader 

## [0.0.13] - 2020-11-16
### Added
- External service name

## [0.0.12] - 2020-10-12
### Added
- User slug token to Morgan logger
### Fixed
- Swagger documentation (under JWT protection)

## [0.0.11] - 2020-09-30
### Added
- Swagger documentation

## [0.0.10] - 2020-09-18
### Updated
- JWT generate with custom payload

## [0.0.9] - 2020-09-07
### Added
- Errors and error middleware
- JWT helper

## [0.0.8] - 2020-09-03
### Fixed
- Service name taken from env variable

## [0.0.7] - 2020-09-02
### Updated
- Testing and linting configurations

## [0.0.6] - 2020-07-30
### Fixed
- JWT naming convention

## [0.0.5] - 2020-07-30
### Fixed
- Auth middleware

## [0.0.4] - 2020-07-30
### Added
- Auth middleware

## [0.0.3] - 2020-07-30
### Fixed
- Secret or key as parameter to JWT helper

## [0.0.2] - 2020-07-30
### Added
- Added API loader
- Exported Apolitical JWT function

## [0.0.1] - 2020-07-30
### Added
- Initial setup
