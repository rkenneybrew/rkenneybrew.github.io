'use strict';

module.exports = ({
  authenticationMiddleware,
  authorisationMiddleware,
  expressService: { startup, shutdown },
  healthService: { registerShutdown },
  jwtService,
  serverError,
  requestHelper,
}) => {
  // Register shutdown to clean up any resources used by the express app
  registerShutdown(shutdown);

  return {
    start: startup,
    stop: shutdown,
    jwt: jwtService,
    errors: serverError,
    middlewares: {
      authentication: authenticationMiddleware,
      authorisation: authorisationMiddleware,
    },
    request: requestHelper,
  };
};
