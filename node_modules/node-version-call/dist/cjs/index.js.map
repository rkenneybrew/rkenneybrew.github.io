{"version":3,"sources":["index.ts"],"sourcesContent":["const versionExecPath = require('./versionExecPath.ts');\n\nconst SLEEP_MS = 60;\n\nexport type VersionInfo = {\n  version: string;\n  callbacks: boolean;\n};\n\nlet functionExec = null; // break dependencies\nexport default function call(version: string | VersionInfo, filePath: string /* arguments */): any {\n  if (!functionExec) functionExec = require('function-exec-sync'); // break dependencies\n\n  const args = Array.prototype.slice.call(arguments, 2);\n  let callbacks = false;\n  if (typeof version !== 'string') {\n    callbacks = (version as VersionInfo).callbacks ?? false;\n    version = (version as VersionInfo).version;\n\n    // need to unwrap callbacks\n    if (callbacks && version === 'local') version = process.version;\n  }\n\n  // local - just call\n  if (version === 'local' && !callbacks) {\n    const fn = require(filePath);\n    return typeof fn == 'function' ? fn.apply(null, args) : fn;\n  }\n\n  // call a version of node\n  else {\n    const execPath = versionExecPath(version);\n    return functionExec.apply(null, [{ execPath, env: process.env, cwd: process.cwd(), sleep: SLEEP_MS, callbacks }, filePath].concat(args));\n  }\n}\n"],"names":["call","versionExecPath","require","SLEEP_MS","functionExec","version","filePath","args","Array","prototype","slice","arguments","callbacks","process","fn","apply","execPath","env","cwd","sleep","concat"],"mappings":"AAAA;;;;+BAUA,SAwBC;;;eAxBuBA,IAAI;;;AAV5B,IAAMC,eAAe,GAAGC,OAAO,CAAC,sBAAsB,CAAC,AAAC;AAExD,IAAMC,QAAQ,GAAG,EAAE,AAAC;AAOpB,IAAIC,YAAY,GAAG,IAAI,AAAC,EAAC,qBAAqB;AAC/B,SAASJ,IAAI,CAACK,OAA6B,EAAEC,QAAgB,CAAC,aAAa,GAAd,EAAuB;IACjG,IAAI,CAACF,YAAY,EAAEA,YAAY,GAAGF,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,qBAAqB;IAEtF,IAAMK,IAAI,GAAGC,KAAK,CAACC,SAAS,CAACC,KAAK,CAACV,IAAI,CAACW,SAAS,EAAE,CAAC,CAAC,AAAC;IACtD,IAAIC,SAAS,GAAG,KAAK,AAAC;IACtB,IAAI,OAAOP,OAAO,KAAK,QAAQ,EAAE;YACnB,UAAkC;QAA9CO,SAAS,GAAG,CAAA,UAAkC,GAAlC,AAACP,OAAO,CAAiBO,SAAS,cAAlC,UAAkC,cAAlC,UAAkC,GAAI,KAAK,CAAC;QACxDP,OAAO,GAAG,AAACA,OAAO,CAAiBA,OAAO,CAAC;QAE3C,2BAA2B;QAC3B,IAAIO,SAAS,IAAIP,OAAO,KAAK,OAAO,EAAEA,OAAO,GAAGQ,OAAO,CAACR,OAAO,CAAC;KACjE;IAED,oBAAoB;IACpB,IAAIA,OAAO,KAAK,OAAO,IAAI,CAACO,SAAS,EAAE;QACrC,IAAME,EAAE,GAAGZ,OAAO,CAACI,QAAQ,CAAC,AAAC;QAC7B,OAAO,OAAOQ,EAAE,IAAI,UAAU,GAAGA,EAAE,CAACC,KAAK,CAAC,IAAI,EAAER,IAAI,CAAC,GAAGO,EAAE,CAAC;KAC5D,MAGI;QACH,IAAME,QAAQ,GAAGf,eAAe,CAACI,OAAO,CAAC,AAAC;QAC1C,OAAOD,YAAY,CAACW,KAAK,CAAC,IAAI,EAAE;YAAC;gBAAEC,QAAQ,EAARA,QAAQ;gBAAEC,GAAG,EAAEJ,OAAO,CAACI,GAAG;gBAAEC,GAAG,EAAEL,OAAO,CAACK,GAAG,EAAE;gBAAEC,KAAK,EAAEhB,QAAQ;gBAAES,SAAS,EAATA,SAAS;aAAE;YAAEN,QAAQ;SAAC,CAACc,MAAM,CAACb,IAAI,CAAC,CAAC,CAAC;KAC1I;CACF"}