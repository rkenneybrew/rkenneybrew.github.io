{"version":3,"sources":["versionExecPath.ts"],"sourcesContent":["const path = require('path');\nconst accessSync = require('fs-access-sync-compat');\n\nconst constants = require('./constants');\nconst existsSync = require('./existsSync');\n\nconst SLEEP_MS = 200;\nconst installVersion = path.join(__dirname, 'installVersion.js');\n\nlet resolveVersion = null; // break dependencies\nlet execFunction = null; // break dependencies\nexport default function versionExecPath(versionString: string) {\n  if (!resolveVersion) resolveVersion = require('node-resolve-versions'); // break dependencies\n  if (!execFunction) execFunction = require('function-exec-sync'); // break dependencies\n\n  const versions = resolveVersion.sync(versionString);\n  if (versions.length > 1) throw new Error('Multiple versions match: ' + versionString + ' = ' + versions.join(',') + '. Please be specific');\n  const version = versions[0];\n  const installPath = path.join(constants.installDirectory, version);\n  const binRoot = constants.isWindows ? installPath : path.join(installPath, 'bin');\n  const execPath = path.join(binRoot, constants.node);\n\n  // need to install\n  if (!existsSync(execPath)) {\n    execFunction({ cwd: process.cwd(), sleep: SLEEP_MS, callbacks: true }, installVersion, version);\n    accessSync(execPath); // confirm installed\n  }\n  return execPath;\n}\n"],"names":["versionExecPath","path","require","accessSync","constants","existsSync","SLEEP_MS","installVersion","join","__dirname","resolveVersion","execFunction","versionString","versions","sync","length","Error","version","installPath","installDirectory","binRoot","isWindows","execPath","node","cwd","process","sleep","callbacks"],"mappings":"AAAA;;;;+BAWA,SAiBC;;;eAjBuBA,eAAe;;;AAXvC,IAAMC,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC,AAAC;AAC7B,IAAMC,UAAU,GAAGD,OAAO,CAAC,uBAAuB,CAAC,AAAC;AAEpD,IAAME,SAAS,GAAGF,OAAO,CAAC,aAAa,CAAC,AAAC;AACzC,IAAMG,UAAU,GAAGH,OAAO,CAAC,cAAc,CAAC,AAAC;AAE3C,IAAMI,QAAQ,GAAG,GAAG,AAAC;AACrB,IAAMC,cAAc,GAAGN,IAAI,CAACO,IAAI,CAACC,SAAS,EAAE,mBAAmB,CAAC,AAAC;AAEjE,IAAIC,cAAc,GAAG,IAAI,AAAC,EAAC,qBAAqB;AAChD,IAAIC,YAAY,GAAG,IAAI,AAAC,EAAC,qBAAqB;AAC/B,SAASX,eAAe,CAACY,aAAqB,EAAE;IAC7D,IAAI,CAACF,cAAc,EAAEA,cAAc,GAAGR,OAAO,CAAC,uBAAuB,CAAC,CAAC,CAAC,qBAAqB;IAC7F,IAAI,CAACS,YAAY,EAAEA,YAAY,GAAGT,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,qBAAqB;IAEtF,IAAMW,QAAQ,GAAGH,cAAc,CAACI,IAAI,CAACF,aAAa,CAAC,AAAC;IACpD,IAAIC,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE,MAAM,IAAIC,KAAK,CAAC,2BAA2B,GAAGJ,aAAa,GAAG,KAAK,GAAGC,QAAQ,CAACL,IAAI,CAAC,GAAG,CAAC,GAAG,sBAAsB,CAAC,CAAC;IAC5I,IAAMS,OAAO,GAAGJ,QAAQ,CAAC,CAAC,CAAC,AAAC;IAC5B,IAAMK,WAAW,GAAGjB,IAAI,CAACO,IAAI,CAACJ,SAAS,CAACe,gBAAgB,EAAEF,OAAO,CAAC,AAAC;IACnE,IAAMG,OAAO,GAAGhB,SAAS,CAACiB,SAAS,GAAGH,WAAW,GAAGjB,IAAI,CAACO,IAAI,CAACU,WAAW,EAAE,KAAK,CAAC,AAAC;IAClF,IAAMI,QAAQ,GAAGrB,IAAI,CAACO,IAAI,CAACY,OAAO,EAAEhB,SAAS,CAACmB,IAAI,CAAC,AAAC;IAEpD,kBAAkB;IAClB,IAAI,CAAClB,UAAU,CAACiB,QAAQ,CAAC,EAAE;QACzBX,YAAY,CAAC;YAAEa,GAAG,EAAEC,OAAO,CAACD,GAAG,EAAE;YAAEE,KAAK,EAAEpB,QAAQ;YAAEqB,SAAS,EAAE,IAAI;SAAE,EAAEpB,cAAc,EAAEU,OAAO,CAAC,CAAC;QAChGd,UAAU,CAACmB,QAAQ,CAAC,CAAC,CAAC,oBAAoB;KAC3C;IACD,OAAOA,QAAQ,CAAC;CACjB"}