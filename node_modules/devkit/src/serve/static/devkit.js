jsio=function init(cloneFrom){function getModuleDef(t){return t+=".js",jsio.__modules[t]||new ModuleDef(t)}function ModuleDef(t){this.path=t,this.friendlyPath=t,util.splitPath(t,this),this.directory=util.resolve(ENV.getCwd(),this.directory)}function ENV_node(){var t=module.constructor,e=module.parent,i=util.bind(e,e&&e.require||require),n=i("fs"),s=i("path"),r=i("vm");this.requireCache=require.cache,this.main=require.main,this.name="node",this.global=global,this.isWindowsNode="win32"===process.platform;var o=process.cwd();this.setCwd=function(t){o=s.resolve(o,t)},this.getCwd=function(){return o},this.pathSep=s.sep,this.log=function(){var t;try{t=Array.prototype.map.call(arguments,function(t){return t instanceof Error&&t.message?"Error:"+t.message+"\nStack:"+t.stack+"\nArguments:"+t.arguments:"string"==typeof t?t:JSON.stringify(t)}).join(" ")+"\n"}catch(e){t=Array.prototype.join.call(arguments," ")+"\n"}return process.stderr.write(t),t},this.getPath=function(){return __dirname},this.eval=function(t,e){return r.runInThisContext(t,e,!0)},this.fetch=function(t){t=util.resolve(this.getCwd(),t);var e,i,r;try{var o=s.dirname(t);e=s.basename(t),i=e.toLowerCase(),r=n.readdirSync(o)}catch(a){return!1}for(var l,h=0;l=r[h];++h)if(l.toLowerCase()==i&&l!=e)throw"Invalid case when importing ["+t+"].  You probably meant"+l;try{return n.readFileSync(t,"utf8")}catch(a){return!1}};var a=/\((?!module.js)(?:file:\/\/)?(.*?)(:\d+)(:\d+)\)/g;this.loadModule=function(e,n,r,o,l){if(r==INITIAL_FILE&&!l.initialImport){var h,c=(new Error).stack;a.lastIndex=0;do h=a.exec(c);while(h&&/jsio\.js$/.test(h[1]));h&&(n=s.dirname(h[1]),r=s.basename(h[1]))}try{return e(null,n,r,o,l)}catch(u){if(u.code!=MODULE_NOT_FOUND)throw u;var d,p=i,f=s.join(n,r);d=this.requireCache[f],d||(d=new t(f),d.filename=f,d.paths=t._nodeModulePaths(s.dirname(f)));var _=o.original||o.from;try{return{exports:d?d.require(_):p(_),path:o.from}}catch(g){if(g.code==MODULE_NOT_FOUND)throw u;throw g}}}}function ENV_browser(){var XHR=window.XMLHttpRequest||function(){return new ActiveXObject("Msxml2.XMLHTTP")},cwd=null,path=null,JOIN=Array.prototype.join;this.name="browser",this.global=window,this.pathSep="/",this.global.jsio||(this.global.jsio=jsio),window.console&&console.log?!console.log.apply||/Android|iPhone|iPad|iPod/.test(navigator.userAgent)?this.log=function(){var t=JOIN.call(arguments," ");return console.log(t),t}:this.log=function(){return console.log.apply(console,arguments),JOIN.call(arguments," ")}:this.log=function(){return JOIN.call(arguments," ")},this.getCwd=function(){if(!cwd){var t=window.location,e=t.pathname;cwd=t.protocol+"//"+t.host+e.substring(0,e.lastIndexOf("/")+1)}return cwd},this.getPath=function(){if(!path){try{for(var t,e=new RegExp("(.*?)"+jsio.__filename+"(\\?.*)?$"),i=document.getElementsByTagName("script"),n=0;t=i[n];++n){var s=t.src.match(e);if(s){path=s[1],/^[A-Za-z]*:\/\//.test(path)&&(path=util.relative(this.getCwd(),path));break}}}catch(r){}path||(path=".")}return path};var debugHost=location.protocol+"//"+location.host+"/",debugPath=location.pathname;this.debugPath=function(t){return util.buildPath(debugHost,"/"!=t[0]&&debugPath,t)};var rawEval="undefined"==typeof eval("(function(){})")?function(t,e){return new Function("return "+t)()}:function(t,e){var t=t+"\n//@ sourceURL="+e;return window.eval(t)};this.eval=function(t,e,i){try{return rawEval(t,this.debugPath(e))}catch(n){throw n instanceof SyntaxError&&DEBUG&&this.checkSyntax&&this.checkSyntax(i,e),n}},this.checkSyntax=function(t,e){try{var i=jsio("import jsio.util.syntax",{suppressErrors:!0,dontExport:!0});i(t,e)}catch(n){}},this.fetch=function(t){var e=new XHR;try{e.open("GET",t,!1),e.send(null)}catch(i){return ENV.log("e:",i),!1}return 404==e.status||-1100==e.status?!1:e.responseText}}function findModule(t){for(var e,i,n=0;i=t[n];++n){var s=i.path,r=srcCache[s];if(r){var o=s.match(/^(.*\/)[^\\\/]+$/);return i.directory=o&&o[1]||"",i.src=r.src,i.pre=!0,i}if(e=ENV.fetch(s),e!==!1)return i.src=e,i;failedFetch[s]=!0}return!1}function processStack(){return importStack.map(function(t,e){var i=0==e?(new Error).stack:importStack[e-1].stack,n=i.indexOf(t.path);return n>=0&&(t.line=":"+parseInt(i.substring(n+t.path.length+1))),e+1+': "'+t.friendlyPath+'" '+t.path+(t.line||"")})}function loadModule(t,e,i,n,s){for(var r,o=n.from,a=util.resolveModulePath(o,e),l=0;r=a[l];++l){var h=a[l].path;if(!s.reload&&h in jsio.__modules)return a[l];h in failedFetch&&a.splice(l--,1)}if(!a.length){if(s.suppressErrors)return!1;var c=new Error("Could not import `"+n.from+"`	Import Stack:\n		"+processStack().join("\n		"));throw c.jsioLogged=!0,c.code=MODULE_NOT_FOUND,c}var u=findModule(a);if(!u){if(s.suppressErrors)return!1;for(var r,d=[],l=0;r=a[l];++l)d.push(r.path);var c=new Error("Could not import `"+o+"`\n	looked in:\n		"+d.join("\n		")+"\n	Import Stack:\n		"+processStack().join("\n		"));throw c.code=MODULE_NOT_FOUND,c}return u.friendlyPath=o,!u.baseMod||u.baseMod in jsioPath.cache||(jsioPath.cache[u.baseMod]=u.basePath),"base"==o||!s.reload&&(s.dontPreprocess||u.pre)||(u.pre=!0,applyPreprocessors(e,u,["import","inlineSlice"],s)),s.preprocessors&&applyPreprocessors(e,u,s.preprocessors,s),u}function applyPreprocessors(t,e,i,n){for(var s=0,r=i.length;r>s;++s){var o=getPreprocessor(i[s]);o&&"function"==typeof o&&o(t,e,n)}}function getPreprocessor(t){var e=jsio.__modules["jsio.preprocessors."+t];return"function"==typeof t?t:e&&e.exports||localJsio("import jsio.preprocessors."+t)}function execModuleDef(t,e){var i=e.src;delete e.src;var n="(function(_){with(_){delete _;return function $$"+e.friendlyPath.replace(/[\:\\\/.-]/g,"_")+"(){"+i+"\n}}})",s=e.exports=t.exports,r=ENV.eval(n,e.path,i);r=r(t),r.call(s),s!=t.module.exports?e.exports=t.module.exports:e.exports=t.exports}function resolveImportRequest(t,e,i){for(var n,s=jsio.__cmds,r=[],o=!1,a=0;(n=s[a])&&!(o=n(t,e,i,r));++a);if(o!==!0)throw new("undefined"!=typeof SyntaxError?SyntaxError:Error)(String(o||"invalid jsio command: jsio('"+e+"')"));return r}function makeContext(t,e,i,n){return t||(t={}),t.exports||(t.exports={}),t.jsio=util.bind(this,_require,t,i.directory,i.filename),t.require=function(e,i){return i||(i={}),i.dontExport=!0,t.jsio(e,i)},t.require.main=ENV.main,t.module={id:e,exports:t.exports},n||"jsio.base"==e||(t.jsio("from jsio.base import *",{dontPreprocess:!0}),t.logging.__create(e,t)),t.jsio.__jsio=jsio,t.jsio.__env=jsio.__env,t.jsio.__dir=i.directory,t.jsio.__filename=i.filename,t.jsio.path=jsioPath,t.__dirname=i.directory,t.__filename=util.buildPath(t.__dirname,i.filename),t}function _require(t,e,i,n,s){s=s||{},e=e||"./",i=i||INITIAL_FILE;for(var r=s.exportInto||t||ENV.global,o=resolveImportRequest(r,n,s),a=o.length,l=a>1?{}:null,h=0;a>h;++h){var c,u,d,p=o[h],f=p.from,_=jsio.__modules;try{u=jsio.__env.loadModule(loadModule,e,i,p,s)}catch(g){d=g}if(u)c=u.path;else if(u===!1)return!1;if(d){if(s.suppressErrors)return!1;throw d.jsioLogged||(ENV.log("\nError loading module:\n","    [[",n,"]]\n","    requested by:",e+i,"\n","    current directory:",jsio.__env.getCwd(),"\n","  "+d.stack.split("\n").join("\n  ")),d.jsioLogged=!0),d}if(u&&importStack.push({friendlyPath:u.friendlyPath,path:u.path,stack:(new Error).stack}),c in _||(_[c]=u),!u.exports){var m=makeContext(s.context,f,u,p.dontAddBase);if(p.dontUseExports){var v=[";(function(){"],y=1;for(var b in p["import"])m.exports[b]=void 0,v[y++]="if(typeof "+b+'!="undefined"&&exports.'+b+"==undefined)exports."+b+"="+b+";";v[y]="})();",u.src+=v.join("")}execModuleDef(m,u)}importStack.pop();var w=u.exports;if(1==a&&(l=w),!s.dontExport)if(p.as){for(var S=p.as.match(/^\.*(.*?)\.*$/)[1],x=S.split("."),j=x.length-1,C=r,y=0;j>y;++y){var E=x[y];E&&(C[E]||(C[E]={}),C=C[E])}C[x[j]]=w,a>1&&(l[S]=w)}else if(p["import"])if(p["import"]["*"])for(var y in _[c].exports)r[y]=w[y];else for(var y in p["import"])r[p["import"][y]]=w[y]}return l}var INITIAL_FILE="<initial file>",MODULE_NOT_FOUND="MODULE_NOT_FOUND",DEBUG=!0,SLICE=Array.prototype.slice,ENV,rexpEndSlash=/(\/|\\)$/;ModuleDef.prototype.setBase=function(t,e){this.baseMod=t,this.basePath=e+"/"+t};var HOST=/^([a-z][a-z0-9+\-\.]*:\/\/.*?\/)(.*)$/,PROTOCOL=/^[a-z][a-z0-9+\-\.]*:/,util={bind:function(t,e){var i=SLICE.call(arguments,2);return function(){return e="string"==typeof e?t[e]:e,e.apply(t,i.concat(SLICE.call(arguments,0)))}},addEndSlash:function(t){return rexpEndSlash.test(t)?t:t+"/"},removeEndSlash:function(t){return t.replace(rexpEndSlash,"")},relative:function(t,e){var i=t.length;if(e.substring(0,i)==t)return e.slice(i+/[\/\\]/.test(e.charAt(i)));for(var n=util.removeEndSlash(e).split(ENV.pathSep),s=util.removeEndSlash(t).split(ENV.pathSep),r=0;n[r]==s[r];)++r;if(r){e=n.slice(r).join(ENV.pathSep);for(var o=s.length-r;o>0;--o)e="../"+e}return e},buildPath:function(){for(var t=[],e=0,i=arguments.length;i>e;++e){var n=arguments[e];PROTOCOL.test(n)&&(t.length=0),"."!=n&&"./"!=n&&n&&t.push(n)}return util.resolveRelativePath(t.join("/"))},resolveRelativePath:function(t){var e=t.match(HOST);e&&(t=e[2]),t=t.replace(/\/+/g,"/").replace(/\/\.\//g,"/");for(var i;(i=t)!=(t=t.replace(/(^|\/)(?!\.?\.\/)([^\/]+)\/\.\.\//g,"$1")););return e?e[1]+t.replace(/^\//,""):t},isAbsolutePath:function(t){return/^\//.test(t)||PROTOCOL.test(t)||ENV.isWindowsNode&&/^[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+/.test(t)},resolve:function(t,e){return this.isAbsolutePath(e)?util.resolveRelativePath(e):util.buildPath(t,e)},resolveRelativeModule:function(t,e){for(var i=[],n=t.split("."),s=n.length,r=s>1&&!n[0],o=r?0:-1;++o<s;)i.push(n[o]?n[o]:"..");return util.buildPath(r?e:"",i.join("/"))},resolveModulePath:function(t,e){if("."==t.charAt(0))return[getModuleDef(util.resolveRelativeModule(t,e)),getModuleDef(util.resolveRelativeModule(t+".index",e))];for(var i=t.split("."),n=i.length,s=n;s>0;--s){var r=i.slice(0,s).join("."),o=jsioPath.cache[r],a=i.slice(s).join("/");if(o)return[getModuleDef(util.buildPath(o,a)),getModuleDef(util.buildPath(o,a+"/index"))]}for(var l=i[0],a=i.join("/"),h=[],c=jsioPath.get(),u=c.length,s=0;u>s;++s){var d=c[s],p=util.buildPath(d,a),f=getModuleDef(p);f.setBase(l,d),h.push(f);var f=getModuleDef(p+"/index");f.setBase(l,d),h.push(f)}return h},splitPath:function(t,e){e||(e={});var i=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"))+1;return e.directory=t.substring(0,i),e.filename=t.substring(i),e}},jsio=util.bind(this,_require,null,null,null);jsio.__util=util,jsio.__init__=init;var srcCache;jsio.setCache=function(t){srcCache=jsio.__srcCache=t},jsio.setCache(cloneFrom&&cloneFrom.__srcCache||{}),jsio.setCachedSrc=function(t,e,i){return srcCache[t]&&srcCache[t].locked?void console.warn("Cache is ignoring (already present and locked) src "+t):void(srcCache[t]={path:t,src:e,locked:i})},jsio.getCachedSrc=function(t){return srcCache[t]},jsio.__filename="jsio.js",jsio.__cmds=[],jsio.__jsio=jsio,jsio.__require=_require,jsio.__modules={preprocessors:{}};var jsioPath={set:function(t){this.value=[],("string"==typeof t?[t]:t).map(this.add,this)},get:function(){return jsioPath.value.slice(0)},add:function(t){if(2==arguments.length){var e=arguments[0],i=util.resolve(ENV.getCwd(),arguments[1]);this.cache[e]=i}else{t=util.resolve(ENV.getCwd(),t);for(var n=jsioPath.value,s=n.length,r=0;s>r;++r)if(n[r]==t)return;n.push(t)}},remove:function(t){for(var e=jsioPath.value,i=e.length,n=0;i>n;++n)e[n]==t&&e.splice(n,1)},value:[],cache:{}};jsio.path=jsioPath,jsio.addPath=util.bind(jsioPath,"add"),jsio.addCmd=util.bind(jsio.__cmds,"push"),jsio.setEnv=function(t){!t&&cloneFrom?ENV=new cloneFrom.__env.constructor(util):("string"==typeof t&&(t={node:ENV_node,browser:ENV_browser}[t]||ENV_browser),ENV=new t(util)),this.__env=ENV,this.__dir=ENV.getCwd(),ENV.loadModule||(ENV.loadModule=loadModule),jsio.path.cache.jsio=cloneFrom?cloneFrom.path.cache.jsio:ENV.getPath(),t==ENV_browser&&jsio.path.set(ENV.getPath())},cloneFrom?jsio.setEnv():"undefined"!=typeof JSIO_ENV_CTOR?jsio.setEnv(JSIO_ENV_CTOR):"undefined"!=typeof process&&process.version?jsio.setEnv("node"):"undefined"==typeof XMLHttpRequest&&"undefined"==typeof ActiveXObject||jsio.setEnv("browser"),jsio.main=ENV&&ENV.main;var boundJsio,localJsio=function(t){return boundJsio||(boundJsio=util.bind(this,_require,{},ENV.getPath(),"jsio.js")),boundJsio(t,{dontExport:!0,dontPreprocess:!0})},failedFetch={},importStack=[];jsio.addCmd(function(t,e,i,n){var s=e.match(/^\s*(from|external)\s+([\w.\-$]+)\s+(import|grab)\s+(.*)$/);return s?(n.push({from:s[2],dontAddBase:"external"==s[1],dontUseExports:"grab"==s[3]||"external"==s[1],"import":{}}),s[4].replace(/\s*([\w.\-$*]+)(?:\s+as\s+([\w.\-$]+))?/g,function(t,e,i){n[0]["import"][e]=i||e}),!0):void 0}),jsio.addCmd(function(t,e,i,n){var s=e.match(/^\s*import\s+(.*)$/);return s?(s[1].replace(/\s*([\w.\-$]+)(?:\s+as\s+([\w.\-$]+))?,?/g,function(t,e,i){n.push(i?{from:e,as:i}:{from:e,as:e})}),!0):void 0}),jsio.addCmd(function(t,e,i,n){var s=e.match(/^\s*[\w.0-9$\/\-:\\]+\s*$/);if(s){var r=util.resolveRelativePath(s[0]),o="."==r.charAt(0);return r=r.replace(/\.\.\//g,".").replace(/\.\//g,"").replace(/\/+$/g,""),"\\"===ENV.pathSep&&r.match(/^[a-zA-Z]:.*/)||(r=r.replace(/\//g,".")),n[0]={from:(o?".":"")+r,original:e},!0}}),jsio.install=function(){jsio("from .base import *"),GLOBAL.logger=logging.get("jsiocore")},jsio.eval=function(t,e){e=ENV.getCwd()||"/";var i=new ModuleDef(e);i.src=t,applyPreprocessors(e,i,["import","cls"],{}),execModuleDef(ENV.global,i)},jsio.clone=util.bind(null,init,jsio);var moduleInfo=util.resolveModulePath("jsio")[0];return moduleInfo&&(jsio.__modules[moduleInfo.path]=new ModuleDef(moduleInfo.path),jsio.__modules[moduleInfo.path].exports=jsio),jsio}(),jsio.path.set(["../../node_modules/jsio/packages"]),jsio.path.cache={jsio:"../../node_modules/jsio/packages",squill:"../../node_modules/squill",util:"../../node_modules/jsio/packages/util",math:"../../node_modules/jsio/packages/math",lib:"../../node_modules/jsio/packages/lib",std:"../../node_modules/jsio/packages/std",math2D:"../../node_modules/jsio/packages/math2D",net:"../../node_modules/jsio/packages/net"},jsio.setCache({"../../node_modules/jsio/packages/base.js":{path:"../../node_modules/jsio/packages/base.js",friendlyPath:"jsio.base",directory:"../../node_modules/jsio/packages",filename:"base.js",src:'exports.log=jsio.__env.log,exports.GLOBAL=jsio.__env.global,Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),o=this,n=function(){},e=function(){return o.apply(this instanceof n?this:t,r.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,e.prototype=new n,e});var SLICE=Array.prototype.slice;"function"==typeof Array.isArray?exports.isArray=Array.isArray:exports.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},exports.bind=function(t,r){if(arguments.length>2){var o=SLICE.call(arguments,2);return"string"==typeof r?function(){if(t[r])return t[r].apply(t,o.concat(SLICE.call(arguments,0)));throw logger.error("No method:",r,"for context",t)}:function(){return r.apply(t,o.concat(SLICE.call(arguments,0)))}}return"string"==typeof r?function(){if(t[r])return t[r].apply(t,arguments);throw logger.error("No method:",r,"for context",t)}:function(){return r.apply(t,arguments)}},exports.Class=function(t,r,o){return exports.__class__(function(){return this.init&&this.init.apply(this,arguments)},t,r,o)},exports.__class__=function(t,r,o,n){var e,i=function(){};if("string"!=typeof r&&(n=o,o=r,r=null),r&&(e=exports.logging.get(r)),!o)throw new Error("parent or prototype not provided");if(n||(n=o,o=null),o)if(exports.isArray(o)){i.prototype={};for(var s,a=0;s=o[a];++a){s==Error&&ErrorParentClass&&(s=ErrorParentClass);for(var p in s.prototype)p in i.prototype||(i.prototype[p]=s.prototype[p])}o=o[0]}else o==Error&&ErrorParentClass&&(o=ErrorParentClass),i.prototype=o.prototype;var c=o?function(t,r,n){var e=o.prototype[r];if(!e)throw new Error("method "+r+" does not exist");return e.apply(t,n||[])}:null,s=t.prototype=new i;return s.constructor=t,s.__parentClass__=o,r&&(s.__class__=r),n.call(s,e||c,e&&c),t};var ErrorParentClass=exports.__class__(function(){var t=Error.prototype.constructor.apply(this,arguments);for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])},function(){});exports.Class.defaults=exports.merge=function(t,r){t=t||{};for(var o=1,n=arguments.length;n>o;++o){var e=arguments[o];for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=e[i])}return t},exports.delay=function(t,r){var o,n,e=null,i=function(){t.apply(o,n)};return function(){o=this,n=arguments,e&&clearTimeout(e),e=setTimeout(i,r||0)}},exports.logging=function(){var t={DEBUG:1,LOG:2,INFO:3,WARN:4,ERROR:5,NONE:10},r={},o=!1,n="";t.setPrefix=function(t){n=t+" "},t.setProduction=function(t){o=!!t;for(var n in r)r[n].setProduction(o)},t.get=function(t){var n=t in r?r[t]:r[t]=new e(t);return n.setProduction(o),n},t.set=function(t,o){r[t]=o},t.getAll=function(){return r},t.__create=function(r,o){o.logger=t.get(r)};var e=exports.__class__(function(r,n){this._name=r,this._isProduction=o,this.setLevel(n||t.LOG)},function(){function r(r){var o=t[r];return function(){if(!this._isProduction&&o>=this._level){var t=r+" "+n+this._name,e=this._listener||exports.log;return e&&e.apply(this._listener,[t].concat(SLICE.call(arguments)))}return arguments[0]}}this.setProduction=function(r){this._isProduction=r,r&&this.setLevel(t.NONE)},this.setLevel=function(r){this._level=r,this._isProduction&&(r=t.NONE),this.DEBUG=r<=t.DEBUG,this.LOG=r<=t.LOG,this.INFO=r<=t.INFO,this.WARN=r<=t.WARN,this.ERROR=r<=t.ERROR},this.setListener=function(t){this._listener=t},this.debug=r("DEBUG"),this.log=r("LOG"),this.info=r("INFO"),this.warn=r("WARN"),this.error=r("ERROR")});return t}();var logger=exports.logging.get("jsiocore");',pre:!0},"devkit.js":{path:"devkit.js",friendlyPath:".devkit",directory:"",filename:"devkit.js",src:'jsio("import .Simulator"),jsio("import .util.DeviceInfo as DeviceInfo"),jsio("import .util.ajax"),jsio("import .util.bluebird as Promise");var resolveURL=util.ajax.resolveURL,devkit=window.devkit;devkit||(devkit=window.devkit={});var _simulators={};GLOBAL.devkit={Promise:Promise,getApps:function(){return util.ajax.get({url:resolveURL("/api/apps")}).then(function(t){return t[0]})},setHost:function(t){util.ajax.setHost(t)},createSimulator:function(t,e){var i={app:t};return Promise.all([util.ajax.get({url:resolveURL("/api/mount"),query:i}),util.ajax.get({url:resolveURL("/api/devices")})]).bind(this).spread(function(i,r){DeviceInfo.setInfo(r[0]),i=i[0],i.url=resolveURL(i.url),Object.keys(i.debuggerURLs).forEach(function(t){i.debuggerURLs[t]=resolveURL(i.debuggerURLs[t])});var o=new Simulator(merge({parent:e.parent,app:t,mountInfo:i},e));return this._lastSimulator=o,_simulators[o.id]=o,o.api})["catch"](function(t){logger.error("unable to start simulator"),console.error(t)})},getSimulator:function(t){return t?_simulators[t].api:this._lastSimulator.api||null},getSimulators:function(){return Object.keys(_simulators).map(function(t){return _simulators[t].api})},connectClient:function(){}};',pre:!0},"Simulator.js":{path:"Simulator.js",friendlyPath:".Simulator",directory:"",filename:"Simulator.js",src:'jsio("from util.browser import $"),jsio("import .util.ajax"),jsio("import .util.DeviceInfo as DeviceInfo"),jsio("import .util.ChannelAPI as ChannelAPI"),jsio("import .ui.Chrome"),jsio("import .util.upgrade"),jsio("import .devkitConn");var resolveURL=util.ajax.resolveURL,defaultParentNode=document.querySelector("devkit")||document.body,head=document.getElementsByTagName("head")[0],Simulator=exports=Class(function(){function t(t){return t.PUBLIC_API=!0,t}var i=0,e=Class(ChannelAPI,function(t){this.init=function(i){t(this,"init"),this._simulator=i,devkitConn.getTransport().bind(this).then(function(t){this.devkit.setTransport(t)});for(var e in Simulator.prototype)"function"==typeof Simulator.prototype[e]&&Simulator.prototype[e].PUBLIC_API&&(this[e]=i[e].bind(i))},this.devkit=new ChannelAPI});this.init=function(t){this._opts=t,this.id=t.id||"sim"+ ++i,this._type=t.type,this._screen=t.screen,this._userAgent=t.userAgent,this._app=t.app,this._deviceInfo=DeviceInfo.get(this._opts.type),this._buildTarget=t.buildTarget||this._deviceInfo.getTarget(),this.api=new e(this),this._mountInfo=t.mountInfo,t.chrome!==!1&&(this._ui=new ui.Chrome(this),this._ui.on("change:type",bind(this,"onDeviceChange"))),this._modules={},this.loadModules(t.modules),t.debuggerModules!==!1&&this.loadModules(this._mountInfo.debuggerURLs)},this.getURL=t(function(){return this._mountInfo.url}),this.getUI=function(){return this._ui},this.getApp=t(function(){return this._app}),this.getOpts=function(){return this._opts},this.getManifest=t(function(){return this._mountInfo.manifest}),this.getModules=t(function(){return this._modules}),this.loadModules=function(t){t&&Object.keys(t).forEach(function(i){if(!(i in this._modules)){var e,s=t[i];e=/\\.js$/.test(s)?$({parent:head,tag:"script",src:s}):$({parent:this._opts.parent||defaultParentNode,tag:"iframe",src:s,className:"module-frame"}),this._modules[i]={path:s,el:e}}},this)},this.onDeviceChange=function(){this._deviceInfo=this._ui.getDeviceInfo(),this._type=this._deviceInfo.getId(),this._buildTarget=this._deviceInfo.getTarget(),window.location.hash="device="+JSON.stringify({type:this._type}),this.rebuild()},this.rebuild=t(function(){return this._ui&&this._ui.setBuilding(!0),console.log("%cbuilding "+this._mountInfo.manifest.shortName+"...","font-weight: bold; color: blue"),util.ajax.get({url:resolveURL("/api/simulate/"),query:{app:this._app,deviceType:this._type,deviceId:this.id,scheme:"debug",target:this._buildTarget}}).bind(this).then(function(t){return console.log("%cbuild completed:%c "+t[0].elapsed+" seconds","font-weight: bold; color: blue","color: green"),console.log("build result:",t[0]),this._ui&&(this._ui.setBuilding(!1),this._ui.loadURL(this._mountInfo.url)),t},function(t){logger.error("Unable to simulate",this._app),console.error(t)})}),this.getFrame=t(function(){return this._ui&&this._ui.getFrame()}),this.getDevicePixelRatio=t(function(){return this._ui&&this._ui.getDevicePixelRatio()||window.devicePixelRatio}),this.getParent=t(function(){return this._ui&&this._ui.getParent()||null}),this.prompt=t(function(t){return this._ui&&this._ui.prompt(t)||Promise.reject()}),this.screenshot=t(function(t){return this.api.getChannel("devkit-simulator").request("screenshot",t)})});',pre:!0},"../../node_modules/jsio/packages/util/browser.js":{path:"../../node_modules/jsio/packages/util/browser.js",friendlyPath:"util.browser",directory:"../../node_modules/jsio/packages/util",filename:"browser.js",baseMod:"util",basePath:"/Users/jimbo3744/Projects/GameClosure/devkit/node_modules/jsio/packages/util",src:'function isWindow(e){return e&&!$.isElement(e)&&$.isElement(e.document)}function ieGetAlpha(e){try{return e.filters.item("alpha")}catch(t){}try{return e.filters.item("progid:DXImageTransform.Microsoft.Alpha")}catch(t){}return null}jsio("external .sizzle import Sizzle"),jsio("import math.geom.Rect");var singleId=/^#([\\w-]+)$/,$=exports.$=function(e,t){switch(typeof e){case"object":return $.isElement(e)?$.remove(e):$.isElement(e.document&&e.document.body)?$.size(e):$.create(e);case"string":return singleId.test(e)?$.id(e.substring(1),t):Sizzle.apply(GLOBAL,arguments)}},DOM2="object"==typeof HTMLElement;$.isElement=DOM2?function(e){return e&&e instanceof HTMLElement}:function(e){return e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},$.id=function(e,t){return"string"==typeof e?(t||window).document.getElementById(e):e},$.apply=function(e,t){if(t.attrs)for(attr in t.attrs)e.setAttribute(attr,t.attrs[attr]);t.id&&(e.id=t.id),t.style&&$.style(e,t.style),t.src&&(e.src=t.src),(t["class"]||t.className)&&(e.className=t["class"]||t.className);var n=t.parent||t.parentNode;if(n&&t.first?$.insertBefore(n,e,n.firstChild):t.before?$.insertBefore(t.before.parentNode||n,e,t.before):t.after?$.insertAfter(t.after.parentNode||n,e,t.after):n&&n.appendChild(e),"html"in t&&(e.innerHTML=t.html),"text"in t&&$.setText(e,t.text),t.children)for(var r=t.children,i=0,o=r.length;o>i;++i)e.appendChild($.isElement(r[i])?r[i]:$(r[i]));return e},$.insertBefore=function(e,t,n){e&&t&&(n&&n.parentNode==e?e.insertBefore(t,n):e.appendChild(t))},$.insertAfter=function(e,t,n){e&&t&&(n&&n.parentNode==e?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):$.insertBefore(e,t,e.firstChild))},$.create=function(e){var t=(e&&e.win||window).document;return e&&"string"!=typeof e?$.apply(e.el||t.createElement(e.tag||e.tagName||"div"),e):t.createElement(e||"div")},$.show=function(e,t){$.id(e).style.display=t||"block"},$.hide=function(e){$.id(e).style.display="none"},$.addClass=function(e,t){if(e){var e=$.id(e);"string"==typeof t&&(t=t.split(" "));for(var n=" "+e.className+" ",r=0,i=t.length;i>r;++r){var o=t[r];-1==n.indexOf(" "+o+" ")&&(n+=o+" ")}return e.className=n.replace(/^\\s+|\\s+$/g,""),$}},$.hasClass=function(e,t){if(!e)return!1;for(var e=$.id(e),n=e.className.split(" "),r=0,i=n.length;i>r;++r)if(n[r].trim()===t)return!0;return!1},$.getTag=function(e,t){return e.getElementsByTagName(t)},$.removeClass=function(e,t){if(e){var e=$.id(e);e.className=(" "+e.className+" ").replace(" ","  ").replace(new RegExp("( "+t.replace("s+"," | ").replace("-","-")+" )","g")," ").replace(/\\s+/," ").replace(/^\\s+|\\s+$/g,"")}},$.style=function(e,t){if(e instanceof Array)for(var n,r=0;n=e[r];++r)$.style(n,t);else{e=$.id(e);var i=e.style;for(prop in t)switch(prop){case"styleFloat":case"cssFloat":case"float":i.styleFloat=i.cssFloat=t[prop];break;case"opacity":if(i.opacity=t[prop],e.filters)try{var o=ieGetAlpha(),a=1==t[prop]?99.99:100*t[prop];o?o.Opacity=a:i.filter="alpha(opacity="+a+")"}catch(s){}break;case"borderRadius":i.borderRadius=i.MozBorderRadius=t[prop];break;case"boxSizing":i.MsBoxSizing=i.MozBoxSizing=i.WebkitBoxSizing=t[prop];default:i[prop]=t[prop]}}},$.onEvent=function(e,t,n){"function"!=typeof n&&(n=bind.apply(GLOBAL,Array.prototype.slice.call(arguments,2)));var r=n;return e=$.id(e),e.addEventListener?e.addEventListener(t,r,!1):(r=function(e){var t=e||window.event;n(t)},e.attachEvent("on"+t,r)),bind($,"removeEvent",e,t,r)},$.removeEvent=function(e,t,n){e=$.id(e),e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},$.stopEvent=function(e){e&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault())},$.setText=function(e,t){e=$.id(e),t=String(t),"textContent"in e?e.textContent=t:"innerText"in e?e.innerText=t.replace(/\\n/g," "):(e.innerHTML="",e.appendChild(document.createTextNode(t)))},$.setValue=function(e,t){e=$.id(e),"value"in e?e.value=t:"value"in e.firstChild&&(e.firstChild.value=t)},$.remove=function(e){e=$.id(e),e&&e.parentNode&&e.parentNode.removeChild(e)},$.cursorPos=function(e,t){var n=$.pos(t);return n.top=e.clientY-n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),n.left=e.clientX-n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft),n},$.pos=function(e){for(var t=e,n={top:0,left:0};t&&t!=document.body;){for(n.left+=t.offsetLeft,n.top+=t.offsetTop;t.offsetParent!=t.parentNode;)n.top-=t.scrollTop,n.left-=t.scrollLeft,t=t.parentNode;t=t.offsetParent}return n},$.size=function(e){if($.isElement(e))return{width:e.offsetWidth,height:e.offsetHeight};if(e.document){var t=e.document.documentElement||e.document.body;return new math.geom.Rect(t.offsetTop,t.offsetLeft,e.innerWidth||t.clientWidth||t.clientWidth,e.innerHeight||t.clientHeight||t.clientHeight)}},$.insertCSSFile=function(e){document.getElementsByTagName("head")[0].appendChild($({tag:"link",attrs:{rel:"stylesheet",type:"text/css",href:e}}))};',pre:!0},"../../node_modules/jsio/packages/util/sizzle.js":{path:"../../node_modules/jsio/packages/util/sizzle.js",friendlyPath:".sizzle",directory:"../../node_modules/jsio/packages/util",filename:"sizzle.js",src:'Sizzle=function(){function e(e,t,n,r,i,o){for(var u="previousSibling"==e&&!o,a=0,l=r.length;l>a;a++){var f=r[a];if(f){u&&1===f.nodeType&&(f.sizcache=n,f.sizset=a),f=f[e];for(var c=!1;f;){if(f.sizcache===n){c=r[f.sizset];break}if(1!==f.nodeType||o||(f.sizcache=n,f.sizset=a),f.nodeName===t){c=f;break}f=f[e]}r[a]=c}}}function t(e,t,n,r,i,o){for(var a="previousSibling"==e&&!o,l=0,f=r.length;f>l;l++){var c=r[l];if(c){a&&1===c.nodeType&&(c.sizcache=n,c.sizset=l),c=c[e];for(var s=!1;c;){if(c.sizcache===n){s=r[c.sizset];break}if(1===c.nodeType)if(o||(c.sizcache=n,c.sizset=l),"string"!=typeof t){if(c===t){s=!0;break}}else if(u.filter(t,[c]).length>0){s=c;break}c=c[e]}r[l]=s}}}var n=/((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^[\\]]*\\]|[\'"][^\'"]*[\'"]|[^[\\]\'"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?/g,r=0,i=Object.prototype.toString,o=!1,u=function(e,t,r,o){r=r||[];var f=t=t||document;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return r;var s,d,v,g,y=[],T=!0,b=m(t);for(n.lastIndex=0;null!==(s=n.exec(e));)if(y.push(s[1]),s[2]){g=RegExp.rightContext;break}if(y.length>1&&l.exec(e))if(2===y.length&&a.relative[y[0]])d=h(y[0]+y[1],t);else for(d=a.relative[y[0]]?[t]:u(y.shift(),t);y.length;)e=y.shift(),a.relative[e]&&(e+=y.shift()),d=h(e,d);else{if(!o&&y.length>1&&9===t.nodeType&&!b&&a.match.ID.test(y[0])&&!a.match.ID.test(y[y.length-1])){var N=u.find(y.shift(),t,b);t=N.expr?u.filter(N.expr,N.set)[0]:N.set[0]}if(t){var N=o?{expr:y.pop(),set:c(o)}:u.find(y.pop(),1!==y.length||"~"!==y[0]&&"+"!==y[0]||!t.parentNode?t:t.parentNode,b);for(d=N.expr?u.filter(N.expr,N.set):N.set,y.length>0?v=c(d):T=!1;y.length;){var x=y.pop(),E=x;a.relative[x]?E=y.pop():x="",null==E&&(E=t),a.relative[x](v,E,b)}}else v=y=[]}if(v||(v=d),!v)throw"Syntax error, unrecognized expression: "+(x||e);if("[object Array]"===i.call(v))if(T)if(t&&1===t.nodeType)for(var S=0;null!=v[S];S++)v[S]&&(v[S]===!0||1===v[S].nodeType&&p(t,v[S]))&&r.push(d[S]);else for(var S=0;null!=v[S];S++)v[S]&&1===v[S].nodeType&&r.push(d[S]);else r.push.apply(r,v);else c(v,r);return g&&(u(g,f,r,o),u.uniqueSort(r)),r};u.uniqueSort=function(e){if(d&&(o=!1,e.sort(d),o))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)},u.matches=function(e,t){return u(e,null,null,t)},u.find=function(e,t,n){var r,i;if(!e)return[];for(var o=0,u=a.order.length;u>o;o++){var i,l=a.order[o];if(i=a.match[l].exec(e)){var f=RegExp.leftContext;if("\\\\"!==f.substr(f.length-1)&&(i[1]=(i[1]||"").replace(/\\\\/g,""),r=a.find[l](i,t,n),null!=r)){e=e.replace(a.match[l],"");break}}}return r||(r=t.getElementsByTagName("*")),{set:r,expr:e}},u.filter=function(e,t,n,r){for(var i,o,u=e,l=[],f=t,c=t&&t[0]&&m(t[0]);e&&t.length;){for(var s in a.filter)if(null!=(i=a.match[s].exec(e))){var d,p,h=a.filter[s];if(o=!1,f==l&&(l=[]),a.preFilter[s])if(i=a.preFilter[s](i,f,n,l,r,c)){if(i===!0)continue}else o=d=!0;if(i)for(var v=0;null!=(p=f[v]);v++)if(p){d=h(p,i,v,f);var g=r^!!d;n&&null!=d?g?o=!0:f[v]=!1:g&&(l.push(p),o=!0)}if(void 0!==d){if(n||(f=l),e=e.replace(a.match[s],""),!o)return[];break}}if(e==u){if(null==o)throw"Syntax error, unrecognized expression: "+e;break}u=e}return f};var a=u.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,CLASS:/\\.((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)/,NAME:/\\[name=[\'"]*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)[\'"]*\\]/,ATTR:/\\[\\s*((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)\\s*(?:(\\S?=)\\s*([\'"]*)(.*?)\\3|)\\s*\\]/,TAG:/^((?:[\\w\\u00c0-\\uFFFF\\*_-]|\\\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\\((even|odd|[\\dn+-]*)\\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\))?(?=[^-]|$)/,PSEUDO:/:((?:[\\w\\u00c0-\\uFFFF_-]|\\\\.)+)(?:\\(([\'"]*)((?:\\([^\\)]+\\)|[^\\2\\(\\)]*)+)\\2\\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t,n){var r="string"==typeof t,i=r&&!/\\W/.test(t),o=r&&!i;i&&!n&&(t=t.toUpperCase());for(var a,l=0,f=e.length;f>l;l++)if(a=e[l]){for(;(a=a.previousSibling)&&1!==a.nodeType;);e[l]=o||a&&a.nodeName===t?a||!1:a===t}o&&u.filter(t,e,!0)},">":function(e,t,n){var r="string"==typeof t;if(r&&!/\\W/.test(t)){t=n?t:t.toUpperCase();for(var i=0,o=e.length;o>i;i++){var a=e[i];if(a){var l=a.parentNode;e[i]=l.nodeName===t?l:!1}}}else{for(var i=0,o=e.length;o>i;i++){var a=e[i];a&&(e[i]=r?a.parentNode:a.parentNode===t)}r&&u.filter(t,e,!0)}},"":function(n,i,o){var u=r++,a=t;if(!/\\W/.test(i)){var l=i=o?i:i.toUpperCase();a=e}a("parentNode",i,u,n,l,o)},"~":function(n,i,o){var u=r++,a=t;if("string"==typeof i&&!/\\W/.test(i)){var l=i=o?i:i.toUpperCase();a=e}a("previousSibling",i,u,n,l,o)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var r=t.getElementById(e[1]);return r?[r]:[]}},NAME:function(e,t,n){if("undefined"!=typeof t.getElementsByName){for(var r=[],i=t.getElementsByName(e[1]),o=0,u=i.length;u>o;o++)i[o].getAttribute("name")===e[1]&&r.push(i[o]);return 0===r.length?null:r}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,o){if(e=" "+e[1].replace(/\\\\/g,"")+" ",o)return e;for(var u,a=0;null!=(u=t[a]);a++)u&&(i^(u.className&&(" "+u.className+" ").indexOf(e)>=0)?n||r.push(u):n&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(/\\\\/g,"")},TAG:function(e,t){for(var n=0;t[n]===!1;n++);return t[n]&&m(t[n])?e[1]:e[1].toUpperCase()},CHILD:function(e){if("nth"==e[1]){var t=/(-?)(\\d*)n((?:\\+|-)?\\d*)/.exec("even"==e[2]&&"2n"||"odd"==e[2]&&"2n+1"||!/\\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=r++,e},ATTR:function(e,t,n,r,i,o){var u=e[1].replace(/\\\\/g,"");return!o&&a.attrMap[u]&&(e[1]=a.attrMap[u]),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,r,i,o){if("not"===e[1]){if(!(n.exec(e[3]).length>1||/^\\w/.test(e[3]))){var l=u.filter(e[3],t,r,!0^o);return r||i.push.apply(i,l),!1}e[3]=u(e[3],null,null,t)}else if(a.match.POS.test(e[0])||a.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!u(n[3],e).length},header:function(e){return/h\\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||"BUTTON"===e.nodeName.toUpperCase()},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0==t},eq:function(e,t,n){return n[3]-0==t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],o=a.filters[i];if(o)return o(e,n,t,r);if("contains"===i)return(e.textContent||e.innerText||"").indexOf(t[3])>=0;if("not"===i){for(var u=t[3],n=0,l=u.length;l>n;n++)if(u[n]===e)return!1;return!0}},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":for(;r=r.previousSibling;)if(1===r.nodeType)return!1;if("first"==n)return!0;r=e;case"last":for(;r=r.nextSibling;)if(1===r.nodeType)return!1;return!0;case"nth":var i=t[2],o=t[3];if(1==i&&0==o)return!0;var u=t[0],a=e.parentNode;if(a&&(a.sizcache!==u||!e.nodeIndex)){var l=0;for(r=a.firstChild;r;r=r.nextSibling)1===r.nodeType&&(r.nodeIndex=++l);a.sizcache=u}var f=e.nodeIndex-o;return 0==i?0==f:f%i==0&&f/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=a.attrHandle[n]?a.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),i=r+"",o=t[2],u=t[4];return null==r?"!="===o:"="===o?i===u:"*="===o?i.indexOf(u)>=0:"~="===o?(" "+i+" ").indexOf(u)>=0:u?"!="===o?i!=u:"^="===o?0===i.indexOf(u):"$="===o?i.substr(i.length-u.length)===u:"|="===o?i===u||i.substr(0,u.length+1)===u+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],o=a.setFilters[i];return o?o(e,n,t,r):void 0}}},l=a.match.POS;for(var f in a.match)a.match[f]=new RegExp(a.match[f].source+/(?![^\\[]*\\])(?![^\\(]*\\))/.source);var c=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(s){c=function(e,t){var n=t||[];if("[object Array]"===i.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var r=0,o=e.length;o>r;r++)n.push(e[r]);else for(var r=0;e[r];r++)n.push(e[r]);return n}}var d;document.documentElement.compareDocumentPosition?d=function(e,t){var n=4&e.compareDocumentPosition(t)?-1:e===t?0:1;return 0===n&&(o=!0),n}:"sourceIndex"in document.documentElement?d=function(e,t){var n=e.sourceIndex-t.sourceIndex;return 0===n&&(o=!0),n}:document.createRange&&(d=function(e,t){var n=e.ownerDocument.createRange(),r=t.ownerDocument.createRange();n.selectNode(e),n.collapse(!0),r.selectNode(t),r.collapse(!0);var i=n.compareBoundaryPoints(Range.START_TO_END,r);return 0===i&&(o=!0),i}),function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name=\'"+t+"\'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(a.find.ID=function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var r=t.getElementById(e[1]);return r?r.id===e[1]||"undefined"!=typeof r.getAttributeNode&&r.getAttributeNode("id").nodeValue===e[1]?[r]:void 0:[]}},a.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(a.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var r=[],i=0;n[i];i++)1===n[i].nodeType&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href=\'#\'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(a.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=u,t=document.createElement("div");if(t.innerHTML="<p class=\'TEST\'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){u=function(t,n,r,i){if(n=n||document,!i&&9===n.nodeType&&!m(n))try{return c(n.querySelectorAll(t),r)}catch(o){}return e(t,n,r,i)};for(var n in e)u[n]=e[n];t=null}}(),document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var e=document.createElement("div");e.innerHTML="<div class=\'test e\'></div><div class=\'test\'></div>",0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(a.order.splice(1,0,"CLASS"),a.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null))}();var p=document.compareDocumentPosition?function(e,t){return 16&e.compareDocumentPosition(t)}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},m=function(e){return 9===e.nodeType&&"HTML"!==e.documentElement.nodeName||!!e.ownerDocument&&"HTML"!==e.ownerDocument.documentElement.nodeName},h=function(e,t){for(var n,r=[],i="",o=t.nodeType?[t]:t;n=a.match.PSEUDO.exec(e);)i+=n[0],e=e.replace(a.match.PSEUDO,"");e=a.relative[e]?e+"*":e;for(var l=0,f=o.length;f>l;l++)u(e,o[l],r);return u.filter(i,r)};return u}();',
pre:!0},"../../node_modules/jsio/packages/math/geom/Rect.js":{path:"../../node_modules/jsio/packages/math/geom/Rect.js",friendlyPath:"math.geom.Rect",directory:"../../node_modules/jsio/packages/math/geom",filename:"Rect.js",baseMod:"math",basePath:"/Users/jimbo3744/Projects/GameClosure/devkit/node_modules/jsio/packages/math",src:'jsio("import lib.Enum"),jsio("import .Point"),jsio("import .Line"),jsio("import .intersect");var Rect=exports=Class(function(){this.init=function(t,i,h,s){switch(arguments.length){case 0:this.width=this.height=this.x=this.y=0;break;case 1:this.width=t.width,this.height=t.height,this.x=t.x,this.y=t.y;break;case 2:this.x=t.x,this.y=t.y,this.width=i.x,this.height=i.y;break;case 3:this.x=t.x,this.y=t.y,this.width=i,this.height=h;break;case 4:this.x=t,this.y=i,this.width=h,this.height=s}},this.normalize=function(){return this.width<0&&(this.x-=this.width,this.width=-this.width),this.height<0&&(this.y-=this.height,this.height=-this.height),this},this.intersectRect=function(t){if(intersect.isRectAndRect(this,t)){var i=this.x,h=this.y,s=this.x+this.width,e=this.y+this.height;this.x=Math.max(i,t.x),this.y=Math.max(h,t.y),this.width=Math.min(s,t.x+t.width)-this.x,this.height=Math.min(e,t.y+t.height)-this.y}else this.width=0,this.height=0},this.unionRect=function(t){this.normalize(),t.normalize&&t.normalize();var i=this.x+this.width,h=this.y+this.height,s=t.x+t.width,e=t.y+t.height;this.x=this.x<t.x?this.x:t.x,this.y=this.y<t.y?this.y:t.y,this.width=(i>s?i:s)-this.x,this.height=(h>e?h:e)-this.y},this.getCorner=function(t){switch(t){case CORNERS.TOP_LEFT:return new Point(this.x,this.y);case CORNERS.TOP_RIGHT:return new Point(this.x+this.width,this.y);case CORNERS.BOTTOM_LEFT:return new Point(this.x,this.y+this.height);case CORNERS.BOTTOM_RIGHT:return new Point(this.x+this.width,this.y+this.height)}},this.getSide=function(t){switch(t){case SIDES.TOP:return new Line(this.getCorner(CORNERS.TOP_LEFT),this.getCorner(CORNERS.TOP_RIGHT));case SIDES.RIGHT:return new Line(this.getCorner(CORNERS.TOP_RIGHT),this.getCorner(CORNERS.BOTTOM_RIGHT));case SIDES.BOTTOM:return new Line(this.getCorner(CORNERS.BOTTOM_RIGHT),this.getCorner(CORNERS.BOTTOM_LEFT));case SIDES.LEFT:return new Line(this.getCorner(CORNERS.BOTTOM_LEFT),this.getCorner(CORNERS.TOP_LEFT))}},this.getCenter=function(){return new Point(this.x+this.width/2,this.y+this.height/2)}}),SIDES=Rect.SIDES=lib.Enum("TOP","BOTTOM","LEFT","RIGHT"),CORNERS=Rect.CORNERS=lib.Enum("TOP_LEFT","TOP_RIGHT","BOTTOM_RIGHT","BOTTOM_LEFT");',pre:!0},"../../node_modules/jsio/packages/lib/Enum.js":{path:"../../node_modules/jsio/packages/lib/Enum.js",friendlyPath:"lib.Enum",directory:"../../node_modules/jsio/packages/lib",filename:"Enum.js",baseMod:"lib",basePath:"/Users/jimbo3744/Projects/GameClosure/devkit/node_modules/jsio/packages/lib",src:'exports=function(){if(1==arguments.length){if("object"==typeof arguments[0]){var r=arguments[0];for(var t in r)r[t]in r||(r[r[t]]=t);return r}"string"!=typeof arguments[0]&&(n=arguments[0])}if(!n)var n=arguments;for(var r={},t=0,e=n.length;e>t;++t)n[t]&&(r[n[t]]=t+1),r[t+1]=n[t];return r};',pre:!0},"../../node_modules/jsio/packages/math/geom/Point.js":{path:"../../node_modules/jsio/packages/math/geom/Point.js",friendlyPath:".Point",directory:"../../node_modules/jsio/packages/math/geom",filename:"Point.js",src:'var Point=exports=Class(function(){this.init=function(t,n){switch(arguments.length){case 0:this.x=0,this.y=0;break;case 1:this.x=t.x||0,this.y=t.y||0;break;case 2:this.x=t||0,this.y=n||0}},this.rotate=function(t){var n=this.x,i=this.y,e=Math.cos(t),s=Math.sin(t);return this.x=n*e-i*s,this.y=n*s+i*e,this},this.translate=this.add=function(t,n){return"number"==typeof t?(this.x+=t,this.y+=n):(this.x+=t.x,this.y+=t.y),this},this.subtract=function(t,n){return"number"==typeof t?(this.x-=t,this.y-=n):(this.x-=t.x,this.y-=t.y),this},this.scale=function(t,n){return void 0===n&&(n=t),this.x*=t,this.y*=n,this},this.setMagnitude=function(t){var n=this.getAngle();return this.x=t*Math.cos(n),this.y=t*Math.sin(n),this},this.normalize=function(){var t=this.getMagnitude();return this.x/=t,this.y/=t,this},this.addMagnitude=function(t){return this.setMagnitude(this.getMagnitude()+t)},this.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},this.getSquaredMagnitude=function(){return this.x*this.x+this.y*this.y},this.getDirection=this.getAngle=function(){return Math.atan2(this.y,this.x)}});Point.getPolarR=function(t,n){throw"notImplemented"},Point.getPolarTheta=function(t,n){var i=Math.atan2(n,t)+2*Math.PI;return i>2*Math.PI?i%(2*Math.PI):i},Point.add=Point.translate=function(t,n,i,e){switch(arguments.length){case 2:return new Point(t).add(n);case 3:return new Point(t).add(n,i);case 4:return new Point(t,n).add(i,e)}},Point.subtract=function(t,n,i,e){switch(arguments.length){case 2:return new Point(t).subtract(n);case 3:return new Point(t).subtract(n,i);case 4:return new Point(t,n).subtract(i,e)}},Point.scale=function(t,n,i){switch(arguments.length){case 2:return new Point(t).scale(n);case 3:return new Point(t,n).scale(i)}},Point.setMagnitude=function(t,n,i){switch(arguments.length){case 2:return new Point(t).setMagnitude(i);case 3:return new Point(t,n).setMagnitude(i)}},Point.addMagnitude=function(t,n,i){switch(arguments.length){case 2:pt=new Point(t);break;case 3:pt=new Point(t,n),n=i}return pt.addMagnitude(n)},Point.getMagnitude=function(t,n){return new Point(t,n).getMagnitude()},Point.rotate=function(t,n,i){switch(arguments.length){case 2:return new Point(t).rotate(n);case 3:return new Point(t,n).rotate(i)}},Point.project=function(t,n){var i=new Point(n).normalize();return i.scale(i.x*t.x+i.y*t.y)};',pre:!0},"../../node_modules/jsio/packages/math/geom/Line.js":{path:"../../node_modules/jsio/packages/math/geom/Line.js",friendlyPath:".Line",directory:"../../node_modules/jsio/packages/math/geom",filename:"Line.js",src:'jsio("import .Point"),exports=Class(function(){this.init=function(t,n,i,s){switch(arguments.length){case 0:this.start=new Point,this.end=new Point;break;case 1:this.start=new Point(t.start),this.end=new Point(t.end);break;case 2:this.start=new Point(t),this.end=new Point(n);break;case 3:this.start=new Point(t),this.end=new Point(n,i);break;case 4:default:this.start=new Point(t,n),this.end=new Point(i,s)}},this.getMagnitude=this.getLength=function(){var t=this.end.x-this.start.x,n=this.end.y-this.start.y;return Math.sqrt(t*t+n*n)}});',pre:!0},"../../node_modules/jsio/packages/math/geom/intersect.js":{path:"../../node_modules/jsio/packages/math/geom/intersect.js",friendlyPath:".intersect",directory:"../../node_modules/jsio/packages/math/geom",filename:"intersect.js",src:'jsio("import .Point"),jsio("import .Line"),jsio("import .Rect");var intersect=exports;intersect.pointAndRect=intersect.ptAndRect=function(t,e){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height},intersect.rectAndPoint=intersect.rectAndPt=function(t,e){return intersect.pointAndRect(e,t)},intersect.pointAndCircle=intersect.ptAndCirc=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i<e.radius*e.radius},intersect.circleAndPoint=intersect.circAndPt=function(t,e){return intersect.pointAndCircle(e,t)},intersect.circleAndCircle=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.radius+e.radius;return r*r>=n*n+i*i},intersect.isRectAndRect=function(t,e){return!(t.y+t.height<e.y||e.y+e.height<t.y||t.x+t.width<e.x||e.x+e.width<t.x)},intersect.circleAndRect=function(t,e){return intersect.pointAndRect(t,e)?!0:intersect.lineAndCircle(e.getSide(1),t)||intersect.lineAndCircle(e.getSide(2),t)||intersect.lineAndCircle(e.getSide(3),t)||intersect.lineAndCircle(e.getSide(4),t)},intersect.rectAndCircle=function(t,e){return intersect.circleAndRect(e,t)},intersect.lineAndCircle=function(t,e){var n=intersect.pointToLine(e,t);return n.getMagnitude()<e.radius},intersect.circleAndLine=function(t,e){return intersect.lineAndCircle(e,t)},intersect.pointToLine=intersect.ptToLine=function(t,e){var n,i=e.end.x-e.start.x,r=e.end.y-e.start.y,c=((t.x-e.start.x)*i+(t.y-e.start.y)*r)/(i*i+r*r);return n=0>c?new Point(e.start):c>1?new Point(e.end):new Point(e.start.x+c*i,e.start.y+c*r),new Line(n,t)},intersect.rectAndRect=function(t,e){return jsio("import .Rect"),(intersect.rectAndRect=function(t,e){if(t===!0)return new Rect(e);if(e===!0)return new Rect(e);if(intersect.isRectAndRect(t,e)){var n=Math.max(t.x,e.x),i=Math.max(t.y,e.y),r=Math.min(t.x+t.width,e.x+e.width),c=Math.min(t.y+t.height,e.y+e.height);return new Rect(n,i,r-n,c-i)}return null})(t,e)};',pre:!0},"util/ajax.js":{path:"util/ajax.js",friendlyPath:".util.ajax",directory:"util/",filename:"ajax.js",src:'jsio("import util.ajax"),jsio("import .bluebird as Promise"),exports.get=Promise.promisify(util.ajax.get),exports.post=Promise.promisify(util.ajax.post);var _host,_protocol;exports.setHost=function(o){_host=o},exports.setProtocol=function(o){_protocol=o},exports.resolveURL=function(o){return _host&&!/^https?:|^\\/\\//.test(o)&&(o="//"+_host+o),!/^https?:/.test(o)&&/\\/\\//.test(o)&&(o=(_protocol||window.location.protocol)+o),o};',pre:!0},"../../node_modules/jsio/packages/util/ajax.js":{path:"../../node_modules/jsio/packages/util/ajax.js",friendlyPath:"util.ajax",directory:"../../node_modules/jsio/packages/util",filename:"ajax.js",src:'function _sendNext(){if(_inflight<exports.MAX_SIMULTANEOUS){var t=_pending.shift();t&&_send(t)}}function _send(t){++_inflight;var e=exports.createXHR();e.open(t.method,t.url,!(0==t.async));var n=!1;for(var r in t.headers)"content-type"==r.toLowerCase()&&(n=!0),e.setRequestHeader(r,t.headers[r]);e.withCredentials=t.withCredentials,n||e.setRequestHeader("Content-Type","text/plain"),e.onreadystatechange=bind(this,onReadyStateChange,t,e),t.timeout&&(t.timeoutRef=setTimeout(bind(this,cancel,e,t),t.timeout)),t.ts=+new Date,e.send(t.data||null)}function cancel(t,e){if(--_inflight,e.timedOut&&logger.log("already timed out?!"),t.onreadystatechange=null,e.timedOut=!0,t.readyState>=t.HEADERS_RECEIVED)try{var n=t.getAllResponseHeaders()}catch(r){}e.cb&&e.cb({timeout:!0},null,n)}function onReadyStateChange(t,e){if(4==e.readyState){if(t.timedOut)throw"Unexpected?!";--_inflight,setTimeout(_sendNext,0);var n=t.cb;if("timeoutRef"in t&&(clearTimeout(t.timeoutRef),t.timeoutRef=null),n&&!t.handled){t.handled=!0;var r=/^application\\/json(;|$)/.test(e.getResponseHeader("Content-Type"))||"json"==t.type,i=e.response||e.responseText,o=i,s=!1;if(r&&i&&"string"==typeof i)try{o=JSON.parse(i)}catch(a){s=!0}200!=e.status&&0!=e.status||s?n({status:e.status,response:o,parseError:s},null,e.getAllResponseHeaders()):n(null,o,e.getAllResponseHeaders())}}}jsio("import std.uri as URI"),exports.MAX_SIMULTANEOUS=4;var _inflight=0,doc;exports.getDoc=function(){if(doc)return doc;try{doc=window.ActiveXObject&&new ActiveXObject("htmlfile"),doc&&(doc.open().write("<html></html>"),doc.close(),window.attachEvent("onunload",function(){try{doc.body.innerHTML=""}catch(t){}doc=null}))}catch(t){}return doc||(doc=document),doc};var ctor=function(){var t=window;exports.getDoc();return new(ctor=t.XMLHttpRequest?t.XMLHttpRequest:function(){return t.ActiveXObject&&new t.ActiveXObject("Msxml2.XMLHTTP")||null})};exports.createXHR=function(){return new ctor},exports.post=function(t,e){return exports.get(merge({method:"POST"},t),e)};var Request=Class(function(){var t=0;this.init=function(e,n){if("string"==typeof e&&(e={url:e}),!e||!e.url)return void logger.error("no url provided");if(this.method=(e.method||"GET").toUpperCase(),this.url=e.url,this.type=e.type,this.async=e.async,this.timeout=e.timeout,this.withCredentials=!!e.withCredentials,this.id=++t,this.headers={},this.cb=n,e.headers)for(var r in e.headers)if(e.headers.hasOwnProperty(r)){var i=e.headers[r];this.headers[r]=i}var o=e.data&&"object"==typeof e.data;"GET"==this.method&&e.data&&(this.url=new URI(this.url).addQuery(o?e.data:URI.parseQuery(e.data)).toString()),e.query&&(this.url=new URI(this.url).addQuery("object"==typeof e.query?e.query:URI.parseQuery(e.query)).toString());try{this.data="GET"!=this.method?o?JSON.stringify(e.data):e.data:null,o&&!this.headers["Content-Type"]&&(this.headers["Content-Type"]="application/json")}catch(s){return void(n&&n({invalidData:!0},null,""))}}}),_pending=[];exports.get=function(t,e){var n=new Request(t,e);_inflight>=exports.MAX_SIMULTANEOUS?_pending.push(n):_send(n)};',pre:!0},"../../node_modules/jsio/packages/std/uri.js":{path:"../../node_modules/jsio/packages/std/uri.js",friendlyPath:"std.uri",directory:"../../node_modules/jsio/packages/std",filename:"uri.js",baseMod:"std",basePath:"/Users/jimbo3744/Projects/GameClosure/devkit/node_modules/jsio/packages/std",src:'jsio("import util.path");var attrs=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],URI=module.exports=Class(function(){this.init=function(t,r){if(t instanceof URI)for(var e,i=0;e=attrs[i];++i)this["_"+e]=t["_"+e];else{this._isStrict=r;var s=URI.parse(t,r);for(var e in s)this["_"+e]=s[e]}};for(var t,r=0;t=attrs[r];++r)(function(t){var r=t.charAt(0).toUpperCase()+t.slice(1);this["get"+r]=function(){return this["_"+t]},this["set"+r]=function(r){return this["_"+t]=r,this}}).call(this,t);this.query=function(t){return URI.parseQuery(this._query)[t]},this.hash=function(t){return URI.parseQuery(this._anchor)[t]},this.addHash=function(t){var r=URI.parseQuery(this._anchor);for(var e in t)r[e]=t[e];return this._anchor=URI.buildQuery(r),this},this.setPath=function(t){var r=util.path.splitPath(t);return this._file=r.filename,this._directory=r.directory,this._path=t,this},this.setFile=function(t){return this.setPath(util.path.join(this._directory,t))},this.setDirectory=function(t){return this.setPath(util.path.join(t,this._file))},this.push=function(t){return t&&(this._path=(this._path+"/"+t).replace(/\\/\\/+/g,"/")),this},this.addQuery=function(t){var r=URI.parseQuery(this._query);for(var e in t)r[e]=t[e];return this._query=URI.buildQuery(r),this},this.removeQuery=function(t){var r=URI.parseQuery(this._query);if(Array.isArray(t))for(var e=0,i=t.length;i>e;++e)delete r[t[e]];else delete r[t];return this._query=URI.buildQuery(r),this},this.toJSON=function(){return this.toString(!1)},this.toString=function(t){var r=this._protocol?this._protocol+"://":"",e=this._host?this._host+(80==(this._port||80)?"":":"+this._port):"";if(t)return r+e;var i=this._path,s=this._query?"?"+this._query:"",o=this._anchor?"#"+this._anchor:"";return r+e+i+s+o}});URI.relativeTo=function(t,r){var t=String(t);if(r&&!/^http(s?):\\/\\//.test(t)){var e=new URI(r).setAnchor("").setQuery("").setFile("").toString("/"==t.charAt(0));t=URI.resolveRelative(e+t)}return new URI(t)},URI.resolveRelative=function(t){for(var r;(r=t)!=(t=t.replace(/(^|\\/)([^\\/]+)\\/\\.\\.\\//g,"/")););return t.replace(/[^.]\\.\\//g,"")},URI.buildQuery=function(t){var r=[];for(var e in t)r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r.join("&")},URI.parseQuery=function(t){for(var r=t.split("&"),e=r.length,i={},s=0;e>s;++s){var o=r[s].split("="),n=decodeURIComponent(o[0]);n&&(i[n]=decodeURIComponent(o[1]))}return i};var strictRegex=/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,looseRegex=/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,queryStringRegex=/(?:^|&)([^&=]*)=?([^&]*)/g;URI.parse=function(t,r){for(var e,i=r?strictRegex:looseRegex,s={},o=i.exec(t),n=0;e=attrs[n];++n)s[e]=o[n]||"";var h=s.queryKey={};return s.query.replace(queryStringRegex,function(t,r,e){t&&(h[r]=e)}),s},URI.isSameDomain=function(t,r){var e=URI.parse(t),i=URI.parse(r);return e.port==i.port&&e.host==i.host&&e.protocol==i.protocol};',pre:!0},"../../node_modules/jsio/packages/util/path.js":{path:"../../node_modules/jsio/packages/util/path.js",friendlyPath:"util.path",directory:"../../node_modules/jsio/packages/util",filename:"path.js",pre:!0,src:'var util=jsio.__jsio.__util;exports.join=util.buildPath,exports.resolveRelativePath=util.resolveRelativePath,exports.splitPath=util.splitPath,exports.relative=util.relative,exports.splitExt=function(e){var t=exports.splitPath(e),i=t.filename.lastIndexOf(".");return-1==i?(t.basename=t.filename,t.ext=""):(t.basename=t.filename.substring(0,i),t.ext=t.filename.substring(i)),t};'},"util/bluebird.js":{path:"util/bluebird.js",friendlyPath:".bluebird",directory:"util/",filename:"bluebird.js",src:'!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,r;return function n(t,e,r){function i(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module \'"+s+"\'");throw u.code="MODULE_NOT_FOUND",u}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,n,t,e,r)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,r){"use strict";function n(){this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16);var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=s.isStatic?s(this.drainQueues):s}var i;try{throw new Error}catch(o){i=o}var s=t("./schedule.js"),a=t("./queue.js"),c="undefined"!=typeof process?process:void 0;n.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},n.prototype._withDomain=function(t){return void 0===c||null==c.domain||t.domain||(t=c.domain.bind(t)),t},n.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),t=this._withDomain(t),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(r){throw new Error("No async scheduler available\\n\\n    See http://goo.gl/m3OTXk\\n")}},n.prototype.invokeLater=function(t,e,r){t=this._withDomain(t),this._lateQueue.push(t,e,r),this._queueTick()},n.prototype.invokeFirst=function(t,e,r){t=this._withDomain(t),this._normalQueue.unshift(t,e,r),this._queueTick()},n.prototype.invoke=function(t,e,r){t=this._withDomain(t),this._normalQueue.push(t,e,r),this._queueTick()},n.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},n.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),n=t.shift();e.call(r,n)}else e._settlePromises()}},n.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},e.exports=new n,e.exports.firstLineError=i},{"./queue.js":24,"./schedule.js":26}],2:[function(t,e,r){"use strict";e.exports=function(t,e,r){function n(){return this.value}function i(){throw this.reason}function o(t){return this._then(n,null,null,{value:t},void 0)}function s(t){return this._then(i,i,null,{reason:t},void 0)}function a(t){this._setBoundTo(t)}t.prototype.bind=function(e){var n=r(e);if(n instanceof t){if(!n.isFulfilled()){if(n.isRejected())return t.reject(n.reason());var i=this.then(),c=i;return i=i._then(o,s,null,n,void 0),n._then(a,i._reject,null,i,null),i._cancellable()||i._setPendingCancellationParent(c),i}e=n.value()}var i=this.then();return i._setBoundTo(e),i},t.bind=function(e,r){return t.resolve(r).bind(e)},t.prototype._setPendingCancellationParent=function(t){this._settledValue=t},t.prototype._pendingCancellationParent=function(){if(this.isPending()&&void 0!==this._settledValue){var t=this._settledValue;return t.cancellable(),this._settledValue=void 0,t}},t.prototype._setIsMigratingBinding=function(){this._bitField=8388608|this._bitField},t.prototype._unsetIsMigratingBinding=function(){this._bitField=-8388609&this._bitField},t.prototype._isMigratingBinding=function(){return 8388608===(8388608&this._bitField)},t.prototype._setBoundTo=function(t){this._boundTo=t},t.prototype._isBound=function(){return void 0!==this._boundTo}}},{}],3:[function(t,e,r){"use strict";function n(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise.js")();o.noConflict=n,e.exports=o},{"./promise.js":20}],4:[function(t,e,r){"use strict";e.exports=function(e){var r=t("./errors.js"),n=t("./async.js"),i=r.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,r=this;void 0!==(e=r._cancellationParent)&&e.isCancellable();)r=e;this._unsetCancellable(),r._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),n.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=this._pendingCancellationParent(),this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);return n._setCancellable(),n._cancellationParent=void 0,n}}},{"./async.js":1,"./errors.js":11}],5:[function(t,e,r){"use strict";e.exports=function(){function e(t){this._parent=t;var r=this._length=1+(void 0===t?0:t._length);m(this,e),r>32&&this.uncycle()}function r(t,e){for(var r=0;r<e.length-1;++r)e[r].push("From previous event:"),e[r]=e[r].join("\\n");return r<e.length&&(e[r]=e[r].join("\\n")),t+"\\n"+e.join("\\n")}function n(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function i(t){for(var e=t[0],r=1;r<t.length;++r){for(var n=t[r],i=e.length-1,o=e[i],s=-1,a=n.length-1;a>=0;--a)if(n[a]===o){s=a;break}for(var a=s;a>=0;--a){var c=n[a];if(e[i]!==c)break;e.pop(),i--}e=n}}function o(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i=p.test(n)||"    (No stack trace)"===n,o=i&&v(n);i&&!o&&(d&&" "!==n.charAt(0)&&(n="    "+n),e.push(n))}return e}function s(t){for(var e=t.stack.replace(/\\s+$/g,"").split("\\n"),r=0;r<e.length;++r){var n=e[r];if("    (No stack trace)"===n||p.test(n))break}return r>0&&(e=e.slice(r)),e}function a(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var r=/\\[object [a-zA-Z0-9$_]+\\]/;if(r.test(e))try{var n=JSON.stringify(t);e=n}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+c(e)+">, no stack trace)"}function c(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function u(t){var e=t.match(y);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var l=t("./async.js"),h=t("./util.js"),f=/[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](main|debug|zalgo|instrumented)/,p=null,_=null,d=!1;h.inherits(e,Error),e.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],r={},n=0,i=this;void 0!==i;++n)e.push(i),i=i._parent;t=this._length=n;for(var n=t-1;n>=0;--n){var o=e[n].stack;void 0===r[o]&&(r[o]=n)}for(var n=0;t>n;++n){var s=e[n].stack,a=r[s];if(void 0!==a&&a!==n){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[n]._parent=void 0,e[n]._length=1;var c=n>0?e[n-1]:this;t-1>a?(c._parent=e[a+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var u=c._length+1,l=n-2;l>=0;--l)e[l]._length=u,u++;return}}}},e.prototype.parent=function(){return this._parent},e.prototype.hasParent=function(){return void 0!==this._parent},e.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var s=e.parseStackAndMessage(t),a=s.message,c=[s.stack],u=this;void 0!==u;)c.push(o(u.stack.split("\\n"))),u=u._parent;i(c),n(c),t.stack=r(a,c),t.__stackCleaned__=!0}},e.parseStackAndMessage=function(t){var e=t.stack,r=t.toString();return e="string"==typeof e&&e.length>0?s(t):["    (No stack trace)"],{message:r,stack:o(e)}},e.formatAndLogError=function(t,e){if("object"==typeof console){var r;if("object"==typeof t||"function"==typeof t){var n=t.stack;r=e+_(n,t)}else r=e+String(t);"function"==typeof console.warn||"object"==typeof console.warn?console.warn(r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}},e.unhandledRejection=function(t){e.formatAndLogError(t,"^--- With additional stack trace: ")},e.isSupported=function(){return"function"==typeof m},e.fireRejectionEvent=function(t,r,n,i){var o=!1;try{"function"==typeof r&&(o=!0,"rejectionHandled"===t?r(i):r(n,i))}catch(s){l.throwLater(s)}var a=!1;try{a=j(t,n,i)}catch(s){a=!0,l.throwLater(s)}var c=!1;if(g)try{c=g(t.toLowerCase(),{reason:n,promise:i})}catch(s){c=!0,l.throwLater(s)}a||o||c||"unhandledRejection"!==t||e.formatAndLogError(n,"Possibly unhandled ")};var v=function(){return!1},y=/[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;e.setBounds=function(t,r){if(e.isSupported()){for(var n,i,o=t.stack.split("\\n"),s=r.stack.split("\\n"),a=-1,c=-1,l=0;l<o.length;++l){var h=u(o[l]);if(h){n=h.fileName,a=h.line;break}}for(var l=0;l<s.length;++l){var h=u(s[l]);if(h){i=h.fileName,c=h.line;break}}0>a||0>c||!n||!i||n!==i||a>=c||(v=function(t){if(f.test(t))return!0;var e=u(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=c)})}};var g,m=function(){var t=/^\\s*at\\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():a(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,p=t,_=e;var r=Error.captureStackTrace;return v=function(t){return f.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,r(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var n=new Error;if("string"==typeof n.stack&&n.stack.split("\\n")[0].indexOf("stackDetection@")>=0)return p=/@/,_=e,d=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in n||!i?(_=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?a(e):e.toString()},null):(p=t,_=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),j=function(){if(h.isNode)return function(t,e,r){return"rejectionHandled"===t?process.emit(t,r):process.emit(t,e,r)};var t=!1,e=!0;try{var r=new self.CustomEvent("test");t=r instanceof CustomEvent}catch(n){}if(!t)try{var i=document.createEvent("CustomEvent");i.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(i)}catch(n){e=!1}e&&(g=function(e,r){var n;return t?n=new self.CustomEvent(e,{detail:r,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!1,!0,r)),n?!self.dispatchEvent(n):!1});var o={};return o.unhandledRejection="onunhandledRejection".toLowerCase(),o.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,r){var n=o[t],i=self[n];return i?("rejectionHandled"===t?i.call(self,r):i.call(self,e,r),!0):!1}}();return e}},{"./async.js":1,"./util.js":30}],6:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function n(t,e){var r={},n=s(t).call(r,e);if(n===a)return n;var i=c(r);return i.length?(a.e=new u("Catch filter must inherit from Error or be a simple predicate function\\n\\n    See http://goo.gl/o84o68\\n"),a):n}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,c=t("./es5.js").keys,u=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,i=this._promise,o=i._boundTo,c=0,u=this._instances.length;u>c;++c){var l=this._instances[c],h=l===Error||null!=l&&l.prototype instanceof Error;if(h&&t instanceof l){var f=s(r).call(o,t);return f===a?(e.e=f.e,e):f}if("function"==typeof l&&!h){var p=n(l,t);if(p===a){t=a.e;break}if(p){var f=s(r).call(o,t);return f===a?(e.e=f.e,e):f}}}return e.e=t,e},r}},{"./errors.js":11,"./es5.js":12,"./util.js":30}],7:[function(t,e,r){"use strict";e.exports=function(t,e,r){function n(){this._trace=new e(o())}function i(){return r()?new n:void 0}function o(){var t=s.length-1;return t>=0?s[t]:void 0}var s=[];return n.prototype._pushContext=function(){r()&&void 0!==this._trace&&s.push(this._trace)},n.prototype._popContext=function(){r()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,i}},{}],8:[function(t,e,r){"use strict";e.exports=function(e,r){var n,i,o=t("./async.js"),s=t("./errors.js").Warning,a=t("./util.js"),c=a.canAttachTrace,u=a.isNode&&(!!process.env.BLUEBIRD_DEBUG||"development"===process.env.NODE_ENV);return e.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),o.invokeLater(this._notifyUnhandledRejection,this,void 0)},e.prototype._notifyUnhandledRejectionIsHandled=function(){r.fireRejectionEvent("rejectionHandled",n,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),r.fireRejectionEvent("unhandledRejection",i,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._captureStackTrace=function(){return u&&(this._trace=new r(this._peekContext())),this},e.prototype._attachExtraTrace=function(t,e){if(u&&c(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=r.parseStackAndMessage(t);t.stack=i.stack.join("\\n"),t.__stackCleaned__=!0}}},e.prototype._warn=function(t){var e=new s(t),n=this._peekContext();if(n)n.attachExtraTrace(e);else{var i=r.parseStackAndMessage(e);e.stack=i.message+"\\n"+i.stack.join("\\n")}r.formatAndLogError(e,"")},e.onPossiblyUnhandledRejection=function(t){i="function"==typeof t?t:void 0},e.onUnhandledRejectionHandled=function(t){n="function"==typeof t?t:void 0},e.longStackTraces=function(){if(o.haveItemsQueued()&&u===!1)throw new Error("cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/DT1qyG\\n");u=r.isSupported()},e.hasLongStackTraces=function(){return u&&r.isSupported()},r.isSupported()||(e.longStackTraces=function(){},u=!1),function(){return u}}},{"./async.js":1,"./errors.js":11,"./util.js":30}],9:[function(t,e,r){"use strict";var n=t("./util.js"),i=n.isPrimitive,o=n.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},r=function(){throw this},n=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return o&&i(t)?this._then(n(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return o&&i(t)?this._then(n(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":30}],10:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.reduce;t.prototype.each=function(t){return r(this,t,null,e)},t.each=function(t,n){return r(t,n,null,e)}}},{}],11:[function(t,e,r){"use strict";function n(t,e){function r(n){return this instanceof r?(l(this,"message","string"==typeof n?n:e),l(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new r(n)}return u(r,Error),r}function i(t){return this instanceof i?(l(this,"name","OperationalError"),l(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(l(this,"message",t.message),l(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5.js").freeze,c=t("./util.js"),u=c.inherits,l=c.notEnumerableProp,h=n("Warning","warning"),f=n("CancellationError","cancellation error"),p=n("TimeoutError","timeout error"),_=n("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(d){o=n("TypeError","type error"),s=n("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(_.prototype[v[y]]=Array.prototype[v[y]]);_.prototype.length=0,_.prototype.isOperational=!0;var g=0;_.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\\n"+t+"AggregateError of:\\n";g++,t=Array(4*g+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\\n"),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join("\\n"),e+=n+"\\n"}return g--,e},u(i,Error);var m=Error.__BluebirdErrorTypes__;m||(m=a({CancellationError:f,TimeoutError:p,OperationalError:i,RejectionError:i,AggregateError:_}),l(Error,"__BluebirdErrorTypes__",m)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:h}},{"./es5.js":12,"./util.js":30}],12:[function(t,e,r){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},c=function(t,e,r){return t[e]=r.value,t},u=function(t){return t},l=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,defineProperty:c,freeze:u,getPrototypeOf:l,isES5:n,propertyIsWritable:function(){return!0}}}},{}],13:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.map;t.prototype.filter=function(t,n){return r(this,t,n,e)},t.filter=function(t,n,i){return r(t,n,i,e)}}},{}],14:[function(t,e,r){"use strict";e.exports=function(e,r,n){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function c(t,e,r){var n;return n=f&&p(e)?r?s(e):a(e):r?i:o,t._then(n,_,void 0,e,void 0)}function u(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundTo):o();if(void 0!==s){var a=n(s,i);if(a instanceof e)return a=a._target(),c(a,t,i.isFulfilled())}return i.isRejected()?(r.e=t,r):t}function l(t){var r=this.promise,i=this.handler,o=r._isBound()?i.call(r._boundTo,t):i(t);if(void 0!==o){var s=n(o,r);if(s instanceof e)return s=s._target(),c(s,t,!0)}return t}var h=t("./util.js"),f=h.wrapsPrimitiveReceiver,p=h.isPrimitive,_=h.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?u:l,e?u:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":30}],15:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var n}for(var i=arguments.length,o=new Array(i),s=0;i>s;++s)o[s]=arguments[s];t&&o.pop();var n=new r(o).promise();return void 0!==t?n.spread(t):n}}},{"./util.js":30}],16:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,e,r,n){this.constructor$(t),this._promise._setIsSpreadable(),this._promise._captureStackTrace(),this._callback=e,this._preservedValues=n===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=r>=1?[]:f,this._init$(void 0,-2)}function a(t,e,r,n){var i="object"==typeof r&&null!==r?r.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,n)}var c=t("./util.js"),u=c.tryCatch,l=c.errorObj,h={},f=[];c.inherits(s,r),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,r){var n=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(n[r]===h){if(n[r]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return n[r]=t,void this._queue.push(r);null!==s&&(s[r]=t);var c=this._callback,f=this._promise._boundTo;this._promise._pushContext();var p=u(c).call(f,t,r,o);if(this._promise._popContext(),p===l)return this._reject(p.e);var _=i(p,this._promise);if(_ instanceof e){if(_=_._target(),_._isPending())return a>=1&&this._inFlight++,n[r]=h,_._proxyPromiseArray(this,r);if(!_._isFulfilled())return this._reject(_._reason());p=_._value()}n[r]=p}var d=++this._totalResolved;d>=o&&(null!==s?this._filter(n,s):this._resolve(n))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,r=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var n=t.pop();this._promiseFulfilled(r[n],n)}},s.prototype._filter=function(t,e){for(var r=e.length,n=new Array(r),i=0,o=0;r>o;++o)t[o]&&(n[i++]=e[o]);n.length=i,this._resolve(n)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?n("fn must be a function\\n\\n    See http://goo.gl/916lJJ\\n"):a(this,t,e,null).promise()},e.map=function(t,e,r,i){return"function"!=typeof e?n("fn must be a function\\n\\n    See http://goo.gl/916lJJ\\n"):a(t,e,r,i).promise()}}},{"./util.js":30}],17:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\\n\\n    See http://goo.gl/916lJJ\\n");return function(){var n=new e(r);n._captureStackTrace(),n._pushContext();var i=s(t).apply(this,arguments);return n._popContext(),n._resolveFromSyncValue(i),n}},e.attempt=e["try"]=function(t,n,a){if("function"!=typeof t)return i("fn must be a function\\n\\n    See http://goo.gl/916lJJ\\n");var c=new e(r);c._captureStackTrace(),c._pushContext();var u=o.isArray(n)?s(t).apply(a,n):s(t).call(a,n);return c._popContext(),c._resolveFromSyncValue(u),c},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":30}],18:[function(t,e,r){"use strict";e.exports=function(e){function r(t,e){var r=this;if(!o.isArray(t))return n.call(r,t,e);var i=a(e).apply(r._boundTo,[null].concat(t));i===c&&s.throwLater(i.e)}function n(t,e){var r=this,n=r._boundTo,i=void 0===t?a(e).call(n,null):a(e).call(n,null,t);i===c&&s.throwLater(i.e)}function i(t,e){var r=this;if(!t){var n=r._target(),i=n._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(r._boundTo,t);o===c&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,c=o.errorObj;e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=n;void 0!==e&&Object(e).spread&&(o=r),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":1,"./util.js":30}],19:[function(t,e,r){"use strict";e.exports=function(e,r){var n=t("./util.js"),i=t("./async.js"),o=n.tryCatch,s=n.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var r=t.value,i=t.handler,a=t.promise,c=t.receiver,u=o(i).call(c,r);if(u===s){if(null!=u.e&&"StopProgressPropagation"!==u.e.name){var l=n.canAttachTrace(u.e)?u.e:new Error(n.toString(u.e));a._attachExtraTrace(l),a._progress(u.e)}}else u instanceof e?u._then(a._progress,null,null,a,void 0):a._progress(u)},e.prototype._progressUnchecked=function(t){for(var n=this._length(),o=this._progress,s=0;n>s;s++){var a=this._progressHandlerAt(s),c=this._promiseAt(s);if(c instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:c,receiver:this._receiverAt(s),value:t}):i.invoke(o,c,t);else{var u=this._receiverAt(s);"function"==typeof a?a.call(u,t,c):u instanceof r&&!u._isResolved()&&u._promiseProgressed(t,c)}}}}},{"./async.js":1,"./util.js":30}],20:[function(t,e,r){"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new c("the promise constructor requires a resolver function\\n\\n    See http://goo.gl/EC22Yn\\n");if(this.constructor!==e)throw new c("the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/KsIlge\\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,t!==u&&this._resolveFromResolver(t)}var r=function(){return new c("circular promise resolution chain\\n\\n    See http://goo.gl/LhFpo0\\n")},n=function(){return new e.PromiseInspection(this._target())},i=function(t){return e.reject(new c(t))},o=t("./util.js"),s=t("./async.js"),a=t("./errors.js"),c=e.TypeError=a.TypeError;e.RangeError=a.RangeError,e.CancellationError=a.CancellationError,e.TimeoutError=a.TimeoutError,e.OperationalError=a.OperationalError,e.RejectionError=a.OperationalError,e.AggregateError=a.AggregateError;var u=function(){},l={},h={e:null},f=t("./thenables.js")(e,u),p=t("./promise_array.js")(e,u,f,i),_=t("./captured_trace.js")(),d=t("./debuggability.js")(e,_),v=(t("./context.js")(e,_,d),t("./catch_filter.js")(h)),y=t("./promise_resolver.js"),g=y._nodebackForPromise,m=o.errorObj,j=o.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var r=arguments.length;if(r>1){var n,i=new Array(r-1),o=0;for(n=0;r-1>n;++n){var s=arguments[n];if("function"!=typeof s)return e.reject(new c("Catch filter must inherit from Error or be a simple predicate function\\n\\n    See http://goo.gl/o84o68\\n"));i[o++]=s}i.length=o,t=arguments[n];var a=new v(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(n,n,void 0,this,void 0)},e.prototype.then=function(t,e,r){if(d()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+o.classString(t);arguments.length>1&&(n+=", "+o.classString(e)),this._warn(n)}return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var n=this._then(t,e,r,void 0,void 0);n._setIsFinal()},e.prototype.spread=function(t,e){var r=this._target(),n=r._isSpreadable()?r===this?this:this.then():this.all();return n._then(t,e,void 0,l,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){var t=new p(this).promise();return t._setIsSpreadable(),t},e.prototype.error=function(t){return this.caught(o.originatesFromRejection,t)},e.is=function(t){return t instanceof e},e.fromNode=function(t){var r=new e(u),n=j(t)(g(r));return n===m&&r._rejectCallback(n.e,!0,!0),r},e.all=function(t){var e=new p(t).promise();return e._setIsSpreadable(),e},e.defer=e.pending=function(){var t=new e(u);return new y(t)},e.cast=function(t){var r=f(t);if(!(r instanceof e)){var n=r;r=new e(u),r._fulfillUnchecked(n)}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(u);return r._captureStackTrace(),r._rejectCallback(t,!0),r},e.setScheduler=function(t){if("function"!=typeof t)throw new c("fn must be a function\\n\\n    See http://goo.gl/916lJJ\\n");var e=s._schedule;return s._schedule=t,e},e.prototype._then=function(t,r,n,i,o){var a=void 0!==o,c=a?o:new e(u);a||(c._propagateFrom(this,5),c._captureStackTrace());var l=this._target();l!==this&&(a||(c._setIsMigrated(),void 0===i&&(c._setIsMigratingBinding(),i=this)));var h=l._addCallbacks(t,r,n,c,i);return l._isResolved()&&!l._isSettlePromisesQueued()&&s.invoke(l._settlePromiseAtPostResolution,l,h),c},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 131071&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._isSpreadable=function(){return(131072&this._bitField)>0},e.prototype._setIsSpreadable=function(){this._bitField=131072|this._bitField},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return this._isBound()&&void 0===e?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,r){var n=t._fulfillmentHandlerAt(r),i=t._rejectionHandlerAt(r),o=t._progressHandlerAt(r),s=t._promiseAt(r),a=t._receiverAt(r);s instanceof e&&(s._setIsMigrated(),void 0===a&&(a=t,s._setIsMigratingBinding())),this._addCallbacks(n,i,o,s,a)},e.prototype._addCallbacks=function(t,e,r,n,i){var o=this._length();if(o>=131066&&(o=0,this._setLength(0)),0===o)this._promise0=n,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=5*o-5;this[s+3]=n,this[s+4]=i,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof r&&(this[s+2]=r)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var n=5*r-5;this[n+3]=e,this[n+4]=t}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._resolveCallback=function(t,n){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(r(),!1,!0);var i=f(t,this);if(!(i instanceof e))return this._fulfill(t);var o=1|(n?4:0);this._propagateFrom(i,o);var s=i._target();if(s._isPending()){for(var a=this._length(),c=0;a>c;++c)s._migrateCallbacks(this,c);this._setFollowing(),\nthis._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},e.prototype._rejectCallback=function(t,e,r){r||o.markAsOriginatingFromRejection(t);var n=o.ensureErrorObject(t),i=o.canAttachTrace(t)&&"string"==typeof n.stack&&n.stack.length>0;this._attachExtraTrace(n,e?i:!1),this._reject(t,n===t?void 0:n)},e.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var r=!0,n=j(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,r),e=null)});r=!1,this._popContext(),void 0!==n&&n===m&&null!==e&&(e._rejectCallback(n.e,!0,!0),e=null)},e.prototype._settlePromiseFromHandler=function(t,e,n,i){if(!i._isRejected()){i._pushContext();var o;if(o=e!==l||this._isRejected()?j(t).call(e,n):j(t).apply(this._boundTo,n),i._popContext(),o===m||o===i||o===h){var s=o===i?r():o.e;i._rejectCallback(s,!1,!0)}else i._resolveCallback(o)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&this._setBoundTo(t._boundTo)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this._promiseAt(t),n=r instanceof e;if(n&&r._isMigrated())return r._unsetIsMigrated(),s.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,a=this._settledValue,c=this._receiverAt(t);n&&r._isMigratingBinding()&&(r._unsetIsMigratingBinding(),c=c._boundTo),this._clearCallbackDataAtIndex(t),"function"==typeof i?n?this._settlePromiseFromHandler(i,c,a,r):i.call(c,a,r):c instanceof p?c._isResolved()||(this._isFulfilled()?c._promiseFulfilled(a,r):c._promiseRejected(a,r)):n&&(this._isFulfilled()?r._fulfill(a):r._reject(a,o)),t>=4&&4===(31&t)&&s.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){s.settlePromises(this),this._setSettlePromisesQueued()},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=r();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=o.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var n=r();return this._attachExtraTrace(n),this._rejectUnchecked(n)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void s.throwLater(function(t){throw"stack"in t&&s.invokeFirst(_.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e._makeSelfResolutionError=r,t("./method.js")(e,u,f,i),t("./bind.js")(e,u,f),t("./finally.js")(e,h,f),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,p,f,u),o.toFastProperties(e),o.toFastProperties(e.prototype),e.Promise=e,_.setBounds(s.firstLineError,o.lastLineError),t("./cancel.js")(e),t("./map.js")(e,p,i,f,u),t("./nodeify.js")(e),t("./progress.js")(e,p),t("./promisify.js")(e,u),t("./reduce.js")(e,p,i,f,u),t("./timers.js")(e,u),t("./each.js")(e,u),t("./filter.js")(e,u),e.prototype=e.prototype,e}},{"./async.js":1,"./bind.js":2,"./cancel.js":4,"./captured_trace.js":5,"./catch_filter.js":6,"./context.js":7,"./debuggability.js":8,"./direct_resolve.js":9,"./each.js":10,"./errors.js":11,"./filter.js":13,"./finally.js":14,"./join.js":15,"./map.js":16,"./method.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./reduce.js":25,"./synchronous_inspection.js":27,"./thenables.js":28,"./timers.js":29,"./util.js":30}],21:[function(t,e,r){"use strict";e.exports=function(e,r,n,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var n,i=this._promise=new e(r);t instanceof e&&(n=t,i._propagateFrom(n,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),c=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function u(t,r){var s=n(this._values,this._promise);if(s instanceof e){if(s._setBoundTo(this._promise._boundTo),s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(u,this._reject,void 0,this,r):void this._reject(s._reason());if(s=s._value(),!c(s)){var a=new e.TypeError("expecting an array, a promise or a thenable\\n\\n    See http://goo.gl/s8MMhc\\n");return void this.__hardReject__(a)}}else if(!c(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\\n\\n    See http://goo.gl/s8MMhc\\n")._reason());if(0===s.length)return void(-5===r?this._resolveEmptyArray():this._resolve(o(r)));var l=this.getActualLength(s.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var h=this._promise,f=0;l>f;++f){var p=this._isResolved(),_=n(s[f],h);_ instanceof e?(_=_._target(),p?_._unsetRejectionIsUnhandled():_._isPending()?_._proxyPromiseArray(this,f):_._isFulfilled()?this._promiseFulfilled(_._value(),f):this._promiseRejected(_._reason(),f)):p||this._promiseFulfilled(_,f)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":30}],22:[function(t,e,r){"use strict";function n(t){return t instanceof Error&&p.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(n(t)){e=new h(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=p.keys(t),i=0;i<r.length;++i){var o=r[i];_.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,r){if(null!==t){if(e){var n=i(c(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;o>a;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(r);t=null}}}var s,a=t("./util.js"),c=a.maybeWrapAsError,u=t("./errors.js"),l=u.TimeoutError,h=u.OperationalError,f=a.haveGetters,p=t("./es5.js"),_=/^(?:name|message|stack|cause)$/;if(s=f?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},f){var d={get:function(){return o(this.promise)}};p.defineProperty(s.prototype,"asCallback",d),p.defineProperty(s.prototype,"callback",d)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\n\\n    See http://goo.gl/sdkXL9\\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\n\\n    See http://goo.gl/sdkXL9\\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\n\\n    See http://goo.gl/sdkXL9\\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new l("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=s},{"./errors.js":11,"./es5.js":12,"./util.js":30}],23:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function i(t,e,r){var i=f.getDataPropertyOrDefault(t,e+r,j);return i?n(i):!1}function o(t,e,r){for(var n=0;n<t.length;n+=2){var i=t[n];if(r.test(i))for(var o=i.replace(r,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new y("Cannot promisify an API that has normal methods with \'%s\'-suffix\\n\\n    See http://goo.gl/iWrZbw\\n".replace("%s",e))}}function s(t,e,r,s){for(var a=f.inheritedDataKeys(t),c=[],u=0;u<a.length;++u){var l=a[u],h=t[l],p=s===m?!0:m(l,h,t);"function"!=typeof h||n(h)||i(t,l,e)||!s(l,h,t,p)||c.push(l,h)}return o(c,e,r),c}function a(t,n){function i(){var i=n;n===h&&(i=this),"string"==typeof t&&(t=i[t]);var o=new e(r);o._captureStackTrace(),o._setIsSpreadable();var s=p(o);try{t.apply(i,_(arguments,s))}catch(a){var c=d(a);o._attachExtraTrace(c),o._reject(c)}return o}return i.__isPromisified__=!0,i}function c(t,e,r,n){for(var i=new RegExp(b(e)+"$"),o=s(t,e,i,r),a=0,c=o.length;c>a;a+=2){var u=o[a],l=o[a+1],p=u+e;t[p]=n===k?k(u,h,u,l,e):n(l,function(){return k(u,h,u,l,e)})}return f.toFastProperties(t),t}function u(t,e){return k(t,e,void 0,t)}var l,h={},f=t("./util.js"),p=t("./promise_resolver.js")._nodebackForPromise,_=f.withAppended,d=f.maybeWrapAsError,v=f.canEvaluate,y=t("./errors").TypeError,g="Async",m=function(t,e){return f.isIdentifier(t)&&"_"!==t.charAt(0)&&!f.isClass(e)},j={__isPromisified__:!0},b=function(t){return t.replace(/([$])/,"\\\\$")},k=v?l:a;e.promisify=function(t,e){if("function"!=typeof t)throw new y("fn must be a function\\n\\n    See http://goo.gl/916lJJ\\n");return n(t)?t:u(t,arguments.length<2?h:e)},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/9ITlV0\\n");e=Object(e);var r=e.suffix;"string"!=typeof r&&(r=g);var n=e.filter;"function"!=typeof n&&(n=m);var i=e.promisifier;if("function"!=typeof i&&(i=k),!f.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\\n\\n    See http://goo.gl/8FZo5V\\n");for(var o=f.inheritedDataKeys(t,{includeHidden:!0}),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&f.isClass(a)&&(c(a.prototype,r,n,i),c(a,r,n,i))}return c(t,r,n,i)}}},{"./errors":11,"./promise_resolver.js":22,"./util.js":30}],24:[function(t,e,r){"use strict";function n(t,e,r,n,i){for(var o=0;i>o;++o)r[o+n]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,n=(r-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},i.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,i=this._length,o=r+i&e-1;n(this,0,this,e,o)},e.exports=i},{}],25:[function(t,e,r){"use strict";e.exports=function(e,r,n,i,o){function s(t,r,n,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===n,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var a=i(n,this._promise),c=!1,u=a instanceof e;u&&(a=a._target(),a._isPending()?a._proxyPromiseArray(this,-1):a._isFulfilled()?(n=a._value(),this._gotAccum=!0):(this._reject(a._reason()),c=!0)),u||this._zerothIsAccum||(this._gotAccum=!0),this._callback=r,this._accum=n,c||this._init$(void 0,-5)}function a(t,e,r,i){if("function"!=typeof e)return n("fn must be a function\\n\\n    See http://goo.gl/916lJJ\\n");var o=new s(t,e,r,i);return o.promise()}var c=t("./util.js"),u=c.tryCatch,l=c.errorObj;c.inherits(s,r),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,r){var n=this._values;n[r]=t;var o,s=this.length(),a=this._preservedValues,c=null!==a,h=this._gotAccum,f=this._valuesPhase;if(!f)for(f=this._valuesPhase=new Array(s),o=0;s>o;++o)f[o]=0;if(o=f[r],0===r&&this._zerothIsAccum?(this._accum=t,this._gotAccum=h=!0,f[r]=0===o?1:2):-1===r?(this._accum=t,this._gotAccum=h=!0):0===o?f[r]=1:(f[r]=2,this._accum=t),h){for(var p,_=this._callback,d=this._promise._boundTo,v=this._reducingIndex;s>v;++v)if(o=f[v],2!==o){if(1!==o)return;if(t=n[v],this._promise._pushContext(),c?(a.push(t),p=u(_).call(d,t,v,s)):p=u(_).call(d,this._accum,t,v,s),this._promise._popContext(),p===l)return this._reject(p.e);var y=i(p,this._promise);if(y instanceof e){if(y=y._target(),y._isPending())return f[v]=4,y._proxyPromiseArray(this,v);if(!y._isFulfilled())return this._reject(y._reason());p=y._value()}this._reducingIndex=v+1,this._accum=p}else this._reducingIndex=v+1;this._resolve(c?a:this._accum)}},e.prototype.reduce=function(t,e){return a(this,t,e,null)},e.reduce=function(t,e,r,n){return a(t,e,r,n)}}},{"./util.js":30}],26:[function(t,e,r){"use strict";var n;if(t("./util.js").isNode){var i=process.version.split(".").map(Number);n=0===i[0]&&i[1]>10||i[0]>0?global.setImmediate:process.nextTick}else"undefined"!=typeof MutationObserver?(n=function(t){var e=document.createElement("div"),r=new MutationObserver(t);return r.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},n.isStatic=!0):n="undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\\n\\n    See http://goo.gl/m3OTXk\\n")};e.exports=n},{"./util.js":30}],27:[function(t,e,r){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/hc1DLj\\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/hPuiwB\\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/hc1DLj\\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/hPuiwB\\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],28:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t,n){if(u(t)){if(t instanceof e)return t;if(o(t)){var l=new e(r);return t._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l}var h=a.tryCatch(i)(t);if(h===c){n&&n._pushContext();var l=e.reject(h.e);return n&&n._popContext(),l}if("function"==typeof h)return s(t,h,n)}return t}function i(t){return t.then}function o(t){return l.call(t,"_promise0")}function s(t,n,i){function o(r){l&&(t===r?l._rejectCallback(e._makeSelfResolutionError(),!1,!0):l._resolveCallback(r),l=null)}function s(t){l&&(l._rejectCallback(t,f,!0),l=null)}function u(t){l&&"function"==typeof l._progress&&l._progress(t)}var l=new e(r),h=l;i&&i._pushContext(),l._captureStackTrace(),i&&i._popContext();var f=!0,p=a.tryCatch(n).call(t,o,s,u);return f=!1,l&&p===c&&(l._rejectCallback(p.e,!0,!0),l=null),h}var a=t("./util.js"),c=a.errorObj,u=a.isObject,l={}.hasOwnProperty;return n}},{"./util.js":30}],29:[function(t,e,r){"use strict";e.exports=function(e,r){function n(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var r=new s(e);o.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._cancel(r)}},c=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,n){if(void 0===n){n=t,t=void 0;var i=new e(r);return setTimeout(function(){i._fulfill()},n),i}return n=+n,e.resolve(t)._then(c,null,null,n,void 0)};e.prototype.delay=function(t){return u(this,t)},e.prototype.timeout=function(t,e){t=+t;var r=this.then().cancellable();r._cancellationParent=this;var o=setTimeout(function(){a(r,e)},t);return r._then(n,i,void 0,o,void 0)}}},{"./util.js":30}],30:[function(t,e,r){"use strict";function n(){try{return C.apply(this,arguments)}catch(t){return F.e=t,F}}function i(t){return C=t,n}function o(t){return"string"==typeof t?t:""+t}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function c(t){return s(t)?new Error(o(t)):t}function u(t,e){var r,n=t.length,i=new Array(n+1);for(r=0;n>r;++r)i[r]=t[r];return i[r]=e,i}function l(t,e,r){if(!k.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var n=Object.getOwnPropertyDescriptor(t,e);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function h(t,e,r){if(s(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return k.defineProperty(t,e,n),t}function f(t){throw t}function p(t){try{if("function"==typeof t){var e=k.keys(t.prototype);return e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(r){return!1}}function _(t){function e(){}return e.prototype=t,e}function d(t){return R.test(t)}function v(t,e,r){for(var n=new Array(t),i=0;t>i;++i)n[i]=e+i+r;return n}function y(t){try{return t+""}catch(e){return"[no string representation]"}}function g(t){try{h(t,"isOperational",!0)}catch(e){}}function m(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function j(t){return t instanceof Error&&k.propertyIsWritable(t,"stack")}function b(t){return{}.toString.call(t)}var k=t("./es5.js"),w="undefined"==typeof navigator,E=function(){try{var t={};return k.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),F={e:{}},C,T=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var n={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},P=function(){return"string"!==this}.call("string"),S=function(){return k.isES5?function(t,e){for(var r=[],n=Object.create(null),i=Object(e).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=t;){var o;try{o=i(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!n[c]){n[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}t=k.getPrototypeOf(t)}return r}:function(t){var e=[];for(var r in t)e.push(r);return e}}(),R=/^[a-z$_][a-z$_0-9]*$/i,A=function(){return"stack"in new Error?function(t){return j(t)?t:new Error(y(t))}:function(t){if(j(t))return t;try{throw new Error(y(t))}catch(e){return e}}}(),x={isClass:p,isIdentifier:d,inheritedDataKeys:S,getDataPropertyOrDefault:l,thrower:f,isArray:k.isArray,haveGetters:E,notEnumerableProp:h,isPrimitive:s,isObject:a,canEvaluate:w,errorObj:F,tryCatch:i,inherits:T,withAppended:u,asString:o,maybeWrapAsError:c,wrapsPrimitiveReceiver:P,toFastProperties:_,filledRange:v,toString:y,canAttachTrace:j,ensureErrorObject:A,originatesFromRejection:m,markAsOriginatingFromRejection:g,classString:b,isNode:"undefined"!=typeof process&&"[object process]"===b(process).toLowerCase()};try{throw new Error}catch(O){x.lastLineError=O}e.exports=x},{"./es5.js":12}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);',
pre:!0},"util/DeviceInfo.js":{path:"util/DeviceInfo.js",friendlyPath:".util.DeviceInfo",directory:"util/",filename:"DeviceInfo.js",src:'function copy(t){return JSON.parse(JSON.stringify(t))}jsio("import .Size"),module.exports=Class(function(){this.init=function(t){this._opts=t},this.getId=function(){return this._opts.id},this.getName=function(){return this._opts.name},this.getTarget=function(){return this._opts.target},this.isNativeTarget=function(){return/^native/.test(this._opts.target)},this.centerSimulatorX=function(){return"centerX"in this._opts?this._opts.centerX:!0},this.centerSimulatorY=function(){return"centerY"in this._opts?this._opts.centerY:!0},this.getScreenSize=function(t){var e=this._opts,i=e&&e?new Size(e.width,e.height):new Size;return t&&i.rotate(),i.scale(1/this.getDevicePixelRatio())},this.getChromeSize=function(t){var e=this._opts,i=e&&e.background;Array.isArray(i)&&(i=i[0]);var r=i?new Size(i.width,i.height):new Size;return t&&r.rotate(),r.scale(1/this.getDevicePixelRatio())},this.getViewportSize=function(t){var e=this._opts;if(e.viewportSize){var i=Array.isArray(e.viewportSize)?new Size(e.viewportSize[t%e.viewportSize.length]):new Size(e.viewportSize);return i.scale(1/this.getDevicePixelRatio())}return this.getScreenSize(t%2)},this.getCustomStyle=function(){return this._opts.style},this.getBackground=function(t){var e=this._opts.background;return Array.isArray(e)?e[t%e.length]:e},this.getBackgroundCount=function(){var t=this._opts.background;return Array.isArray(t)?t.length:1},this.getDevicePixelRatio=function(){return this._opts.devicePixelRatio||1},this.canRotate=function(){return"canRotate"in this._opts?!!this._opts.canRotate:!0},this.canDrag=function(){return"canDrag"in this._opts?!!this._opts.canDrag:!0}}),module.exports.get=function(t,e){function i(t){var i=module.exports.defaults[t];e.screen.width==i.width&&e.screen.height==i.height?n=copy(i):e.screen.width==i.height&&e.screen.height==i.width&&(n=copy(i),n.rotation=1)}var r=module.exports.allInfo[t];if(r)return new module.exports(r);e||(e={});var n,o="mobile";return e.screen&&(/-ios$/.test(t)?["iphone","iphone4","iphone5","ipad","ipad3"].forEach(bind(this,i)):/-android$/.test(t)&&["nexus","galaxy-nexus"].forEach(bind(this,i))),n||(n=copy(module.exports.defaults[o]),e.width&&(n.width=e.width),e.height&&(n.height=e.height),/^browser-/.test(t)&&(e.target="browser-mobile")),new module.exports(n)},module.exports.setInfo=function(t){for(var e in t)t[e].id=e;module.exports.allInfo=t};',pre:!0},"util/Size.js":{path:"util/Size.js",friendlyPath:".Size",directory:"util/",filename:"Size.js",src:'function hasWidth(t){return t&&"object"==typeof t&&"width"in t}var Size=Class(function(){this.init=function(t,i){hasWidth(t)?(this.width=t.width,this.height=t.height):(this.width=t||0,this.height=i||0)},this.rotate=function(){var t=this.height;return this.height=this.width,this.width=t,this},this.getRatio=function(){return this.width/this.height},this.add=function(t,i){hasWidth(t)?(this.width+=t.width,this.height+=t.height):(this.width+=t,this.height+=i)},this.scale=function(t){return this.width*=t,this.height*=t,this},this.toString=function(){return this.width+"x"+this.height}});Size.subtract=function(t,i){return new Size(t.width-i.width,t.height-i.height)},Size.add=function(t,i){return new Size(t.width+i.width,t.height+i.height)},Size.scale=function(t,i){return new Size(t.width*i,t.height*i)},module.exports=Size;',pre:!0},"util/ChannelAPI.js":{path:"util/ChannelAPI.js",friendlyPath:".util.ChannelAPI",directory:"util/",filename:"ChannelAPI.js",src:'jsio("import .Channel"),exports=Class(function(){this.init=function(){this._channels={}},this.getChannel=function(n){var t=this._channels[n];return t||(t=new Channel(n),this._channels[n]=t,this._transport&&t.setTransport(this._transport)),t},this.setTransport=function(n){this._transport=n;for(var t in this._channels)this._channels[t].setTransport(n)}});',pre:!0},"util/Channel.js":{path:"util/Channel.js",friendlyPath:".Channel",directory:"util/",filename:"Channel.js",src:'jsio("import lib.PubSub"),jsio("import .bluebird as Promise"),exports=Class(lib.PubSub,function(n){var t=0;this.init=function(n){this._name=n,this._requests={},this._onTransportConnect=this._onTransportConnect.bind(this),this._onTransportDisconnect=this._onTransportDisconnect.bind(this),this._onTransportMessage=this._onTransportMessage.bind(this),this._onConnect=new Promise(function(n){this.once("connect",n)}.bind(this))},this.connect=function(){return this._onConnect},this._isConnected=!1,this.isConnected=function(){return this._isConnected},this.disconnect=this.close=function(){this._sendInternalMessage("disconnect")},this.setTransport=function(n){this._transport&&this._transport!=n&&this._transport.removeListener("disconnect",this._onTransportDisconnect).removeListener("connect",this._onTransportConnect).removeListener(this._name,this._onTransportMessage),this._transport=n,n&&(n.on("disconnect",this._onTransportDisconnect).on("connect",this._onTransportConnect).on(this._name,this._onTransportMessage),this._onTransportConnect())},this._onTransportConnect=function(){this._sendInternalMessage("connect")},this._onTransportDisconnect=function(){this._isConnected=!1},this._onTransportMessage=function(t){t.internal?this._onInternalMessage(t.internal):t.res?t.error?this._requests[t.res].reject(t.error):this._requests[t.res].resolve(t.data):t.id?n(this,"emit",[t.name,t.data,new s(this,t.id)]):n(this,"emit",[t.name,t.data])},this._sendInternalMessage=function(n){this._transport&&this._transport.emit(this._name,{internal:n})},this._onInternalMessage=function(n){switch(n){case"connect":this._sendInternalMessage("connectConfirmed");case"connectConfirmed":this._isConnected=!0,this._emit("connect");break;case"disconnect":this._isConnected=!1,this._emit("disconnect")}};var s=Class(function(){this.init=function(n,t){this.channel=n,this.id=t,this.responded=!1},this.error=function(n){this.responded||(this.responded=!0,this.channel._send({error:n,res:this.id}))},this.send=function(n){this.responded||(this.responded=!0,this.channel._send({data:n,res:this.id}))}});this._send=function(n){this._transport?this._transport.emit(this._name,n):logger.warn(this._name,"failed to send",n)},this._emit=function(t,s){n(this,"emit",arguments)},this.emit=function(n,t){return"newListener"==n?this._emit(n,t):void this._send({name:n,data:t})},this.request=function(n,s){return this.connect().bind(this).then(function(){var e=++t;return this._send({name:n,data:s,id:e}),new Promise(function(n,t){this._requests[e]={resolve:n,reject:t}}.bind(this))})}});',pre:!0},"../../node_modules/jsio/packages/lib/PubSub.js":{path:"../../node_modules/jsio/packages/lib/PubSub.js",friendlyPath:"lib.PubSub",directory:"../../node_modules/jsio/packages/lib",filename:"PubSub.js",src:'jsio("from ..std.uuid import uuid");var ctx=jsio.__env.global,SLICE=Array.prototype.slice;exports=Class(function(){this.init=function(){},this.publish=function(s){if(this._subscribers){var i=SLICE.call(arguments,1);if(this._subscribers.__any)for(var t,e=[s].concat(i),r=this._subscribers.__any.slice(0),n=0;t=r[n];++n)t.apply(ctx,e);if(!this._subscribers[s])return this;for(var t,r=this._subscribers[s].slice(0),n=0;t=r[n];++n)t.apply(ctx,i)}return this},this.subscribe=function(s,i,t){var e;2==arguments.length?e=i:(e=bind.apply(GLOBAL,SLICE.call(arguments,1)),e._ctx=i,e._method=t);var r=this._subscribers||(this._subscribers={});return(r[s]||(r[s]=[])).push(e),this},this.subscribeOnce=function(s,i,t){var e=arguments,r=bind(this,function(){this.unsubscribe(s,r),2==e.length?i.apply(GLOBAL,arguments):bind.apply(GLOBAL,SLICE.call(e,1)).apply(GLOBAL,arguments)});return e.length>=3&&(r._ctx=i,r._method=t),this.subscribe(s,r)},this.unsubscribe=function(s,i,t){if(!this._subscribers||!this._subscribers[s])return this;for(var e,r=this._subscribers[s],n=0;e=r[n];++n)e!=i&&(e._ctx!=i||t&&e._method!=t)||r.splice(n--,1);return this},this.listeners=function(s){return this._subscribers=this._subscribers?this._subscribers:{},this.hasOwnProperty.call(this._subscribers,s)?this._subscribers[s]:this._subscribers[s]=[]},this.addListener=this.on=function(s,i){return this.listeners(s).length+1>this._maxListeners&&0!==this._maxListeners&&"undefined"!=typeof console&&console.warn("Possible EventEmitter memory leak detected. "+this._subscribers[s].length+" listeners added. Use emitter.setMaxListeners() to increase limit."),this.emit("newListener",s,i),this.subscribe(s,this,i)},this.once=function(s,i){return this.subscribeOnce(s,this,i)},this.removeListener=function(s,i){return this.unsubscribe(s,this,i),this},this.removeAllListeners=function(s){if(this._subscribers)for(var i in this._subscribers)null!=s&&s!=i||delete this._subscribers[i];return this},this.emit=function(s){return this.publish.apply(this,arguments),this.listeners(s).length>0},this._maxListeners=10,this.setMaxListeners=function(s){this._maxListeners=s},this.hasListeners=function(s){return this._subscribers&&this._subscribers[s]&&this._subscribers[s].length},this.listenTo=function(s,i,t){var e=this._listeningTo||(this._listeningTo={}),r=s._listenId||(s._listenId=uuid(8,16));return e[r]=s,s.subscribe(i,this,t),this},this.stopListening=function(s,i,t){var e,r,n,h,u,b,c,l,o=this._listeningTo;if(!o)return this;logger.log(s);var _=!i&&!t;s&&((o={})[s._listenId]=s);for(var a in o){for(s=o[a],r=i?[i]:Object.keys(s._subscribers),h=0,c=r.length;c>h;h++)if(i=r[h],e=s._subscribers[i]){for(s._subscribers[i]=n=[],u=0,b=e.length;b>u;u++)l=e[u],(t&&t!==l._method||this&&this!==l._ctx)&&n.push(l);n.length||delete s._subscribers[i]}_&&delete this._listeningTo[a]}return this}});',pre:!0},"../../node_modules/jsio/packages/std/uuid.js":{path:"../../node_modules/jsio/packages/std/uuid.js",friendlyPath:"..std.uuid",directory:"../../node_modules/jsio/packages/std",filename:"uuid.js",src:'var CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");exports.uuid=function(r,a){var n=CHARS,o=[],t=Math.random;if(a=a||n.length,r)for(var e=0;r>e;e++)o[e]=n[0|t()*a];else{var i;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(var e=0;36>e;e++)o[e]||(i=0|16*t(),o[e]=n[19==e?3&i|8:15&i])}return o.join("")};',pre:!0},"ui/Chrome.js":{path:"ui/Chrome.js",friendlyPath:".ui.Chrome",directory:"ui/",filename:"Chrome.js",src:'jsio("from util.browser import $"),jsio("import squill.Widget"),jsio("import std.uri"),jsio("import squill.Menu"),jsio("import squill.Drag"),jsio("import squill.Delegate"),jsio("import ..util.Size as Size"),jsio("import ..util.DeviceInfo as DeviceInfo"),jsio("import ..util.bluebird as Promise"),jsio("import ..components.FrameBackground as FrameBackground"),jsio("import ..components.CenterLayout as CenterLayout"),jsio("import ..components.Toolbar as Toolbar"),jsio("import ..components.DeviceDialog as DeviceDialog"),jsio("import ..components.renderers.facebook as facebookRenderer");var lowerBrowserPrefix=function(){var t=window.getComputedStyle(document.documentElement,""),i=Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/);return i=i&&i[1]||""===t.OLink&&"o"}(),browserPrefix=lowerBrowserPrefix[0].toUpperCase()+lowerBrowserPrefix.substring(1),TRANSFORM_STYLE=browserPrefix+"Transform",TRANSFORM_ORIGIN_STYLE=browserPrefix+"TransformOrigin",TRANSITION_END_EVENT=lowerBrowserPrefix+"TransitionEnd";exports=Class(CenterLayout,function(t){function i(t,i){return i=i||1,{width:t&&t.width?t.width*i+"px":"100%",height:t&&t.height?t.height*i+"px":"100%"}}this._def={className:"simulator no-transitions",children:[{type:Toolbar},{id:"contents",children:[{id:"background",type:FrameBackground},{id:"splashImage"},{id:"resizeHandle"},{id:"build-spinner",children:[{id:"spinner"}]}]}]},this.getContainer=function(){return this.frameWrapper||t(this,"getContainer")},this.init=function(i){this._simulator=i,this._channel=i.api.getChannel("devkit-simulator"),this._channel.on("hideSplash",bind(this,"hideSplash")),this._channel.on("connect",bind(this,"_onConnect"));var e=i.getOpts();t(this,"init",[e])},this.buildWidget=function(){t(this,"buildWidget",arguments);var i=this._opts;this._validOrientations={},this._renderers={Facebook:facebookRenderer};var e=this._simulator.getManifest();e.supportedOrientations?e.supportedOrientations.forEach(function(t){this._validOrientations[t]=!0},this):(this._validOrientations.portrait=!0,this._validOrientations.landscape=!0),this.toolbar.setSimulator(this),this.toolbar.setValidOrientations(this._validOrientations),i.simpleUI?this.toolbar.hide():this.toolbar.show(),this._rotation=i.rotation||0,this._backgroundProps={},this._isDragEnabled=!0,this._offsetX=i.offsetX||0,this._offsetY=i.offsetY||0,this._simulatorIndex=i.index,this._name=i.name||"Simulator",this._mover=new squill.Drag({threshold:0}).subscribe("DragStart",this,"onDragStart").subscribe("Drag",this,"onDrag").subscribe("DragStop",this,"onDragStop"),this._resizer=new squill.Drag({threshold:0}).subscribe("DragStart",this,"onResizeStart").subscribe("Drag",this,"onResize").subscribe("DragStop",this,"onResizeStop"),this.background.on("Down",bind(this,"_startDrag")),$.onEvent(this._el,"mousedown",this,function(t){t.target==this._el}),$.onEvent(this.resizeHandle,"mousedown",this,function(){this._resizer.startDrag()}),window.addEventListener("resize",bind(this,"update")),window.addEventListener("keydown",bind(this,this._rebuildKeyListener),!0),window.addEventListener("message",bind(this,function(t){"devkit:reload"==t.data&&this._simulator.rebuild(),"devkit:toolbar:hide"==t.data&&this.toolbar.hide(),"devkit:toolbar:show"==t.data&&this.toolbar.show()})),this._isMuted=!1,"1"===localStorage.getItem("settingMuted")&&(this._isMuted=!0),this.fromJSON(this._opts)},this._startDrag=function(){this._isDragEnabled&&this._mover.startDrag()},this.showBanner=function(t){return this.banner||(this.banner=this.addWidget({id:"banner",parent:this.contents,type:"label"}),this.bannerAction=this.banner.addWidget({id:"action",type:"button"}),this.bannerClose=this.banner.addWidget({id:"closeBtn",type:"button",className:"glyphicon glyphicon-remove"})),this.banner.setText(t.text),t.action?(this.bannerAction.setLabel(t.action),this.bannerAction.show()):this.bannerAction.hide(),this.bannerClose[t.dismissable===!1?"hide":"show"](),new Promise(function(t,i){this.bannerClose.onClick=function(){this.banner.hide(),i()}.bind(this),this.bannerAction.onClick=function(){this.banner.hide(),t()}.bind(this)}.bind(this))},this.setBuilding=function(t){this.setPaused(t);var i=this["build-spinner"];t?(this.showSplash(),i.style.display="flex",setTimeout(bind(this,function(){i.style.opacity=.5,this.addClass("building")}),100)):(setTimeout(bind(this,function(){$.hide(this["build-spinner"]),this.removeClass("building")}),1e3),i.style.opacity=0)},this._onMenuOpen=function(t){$.addClass(this.toolbar,"menu-open"),t==this.overflowMenu},this._onConnect=function(){this._isMuted&&this.setMuted(!0),this.emit(this._isPaused?"pause":"resume")},this._remoteScreenshot=function(){this._channel.request("screenshot").then(function(t){this._frame.src=t.canvasImg,this._frame.style.width=t.width+"px",this._frame.style.height=t.height+"px"})["catch"](function(t){logger.log("Error taking screenshot",t)})},this.canRotate=function(){return this._canRotate},this.showSplash=function(){this._deviceInfo.isNativeTarget()&&(this.splashImage.style.display="block",this.splashImage.style.opacity=1,this.splashImage.style.backgroundImage="url("+this.getLoadingImageURL()+")")},this.hideSplash=function(){this.splashImage.style.opacity=0,setTimeout(bind(this,function(){this.splashImage.style.display="none"}),500)},this.getFrame=function(){return this._frame},this.editDevice=function(){var t=new DeviceDialog({simulator:this,loadingImage:this.getLoadingImageURL()}).on("select",bind(this,function(i){this.setDeviceInfo(i),t.hide()})).show()},this.toggleDragEnabled=function(){this.setDragEnabled(!this._isDragEnabled)},this.setDragEnabled=function(t){this._isDragEnabled=!!t,this.emit("change:drag")},this.isDragEnabled=function(){return this._isDragEnabled},this.isMuted=function(){return this._isMuted},this.toggleMuted=function(){this.setMuted(!this._isMuted)},this.setMuted=function(t){this._isMuted=t,t?localStorage.setItem("settingMuted","1"):localStorage.setItem("settingMuted","0"),this._channel.emit("mute",{shouldMute:t}),this.emit("change:mute",t),this.emit("change")},this.getLoadingImageURL=function(){var t;return t=this._rotation%2===0?"portrait1136":"landscape1536",new std.uri(this._deviceInfo.getTarget()+"/splash/"+t).toString()},this._rebuildKeyListener=function(t){},this.setTransitionsEnabled=function(t){t?$.removeClass(this._el,"no-transitions"):$.addClass(this._el,"no-transitions")},this.getDeviceInfo=function(){return this._deviceInfo},this.setDeviceInfo=function(t){function i(t,i){console.log(new Array(20-t.length+1).join(" ")+"%c"+t+":%c "+i,"color: green","font-weight: bold; color: blue")}this.setTransitionsEnabled(!1),this._deviceInfo=t,this._customSize=null,i("type",t.getName()||t.getId()),i("build-target",t.getTarget()),i("device-id",this._simulator.id),i("size",t.getScreenSize()),i("pixel-ratio",t.getDevicePixelRatio()),this.update(),this.banner&&this.banner.hide(),this.emit("change:type"),setTimeout(bind(this,"setTransitionsEnabled",!0),1e3)},this.rotate=function(){var t=(this._rotation+1)%2==1;if(this._deviceInfo.canRotate()&&(!t||"landscape"in this._validOrientations)&&(t||"portrait"in this._validOrientations)){++this._rotation,this.setTransitionsEnabled(!0),this.toolbar.hide(),this.contents.style[TRANSFORM_STYLE]="rotate("+(this._rotation%2?90:-90)+"deg)";var i=bind(this,function(){this.contents.removeEventListener(TRANSITION_END_EVENT,i),this.setTransitionsEnabled(!1),this.contents.style[TRANSFORM_STYLE]="",this.toolbar.show(),this.update(),setTimeout(bind(this,"setTransitionsEnabled",!0),100)});this.contents.addEventListener(TRANSITION_END_EVENT,i),this.emit("change")}},this.getFrameName=function(){var t=this._simulator.getManifest(),i=t.studio&&t.studio.domain;i||(i="my-studio.com");var e=i.split(/\\./g).reverse();e.push(t.shortName);var s=e.join("."),n=this._deviceInfo&&this._deviceInfo.getTarget()||"";return/ios/i.test(n)?t.ios&&t.ios.bundleID||s:/android/i.test(n)?t.android&&t.android.packageName||s:s},this._zoom=0,this.getZoom=function(){return this._zoom},this.setZoom=function(t){this._zoom=t||1,this.update(),this.emit("change:zoom",this._zoom),this.emit("change")},this.loadURL=function(t){this.showSplash(),this._frame&&$.remove(this._frame),this._frame=$({before:this.splashImage,tag:"iframe",id:"frame",attrs:{name:this.getFrameName()},src:t,className:"frame"}),this.update()},this.getDevicePixelRatio=function(){return this._deviceInfo.getDevicePixelRatio()},this._setViewport=function(t,e,s){if($.style(this.contents,i(t,s)),this._frame){var n=(this.getDevicePixelRatio(),i(e));n[TRANSFORM_STYLE]="scale("+s+")",n[TRANSFORM_ORIGIN_STYLE]="0px 0px",$.style(this._frame,n)}},this._computeRotation=function(){var t="portrait"in this._validOrientations,i="landscape"in this._validOrientations,e=this._rotation;return this._deviceInfo.canRotate()?t&&!i?e=0:i&&!t&&(e=1):e=0,e},this.reload=function(){this._simulator.rebuild()},this.update=function(){var t=this._deviceInfo;if(t){this._rotation=this._computeRotation();var i=this._customSize||t.getScreenSize();this._rotation%2==1&&i.rotate();var e=this._zoom;if(!e){var s=10,n=100,o=new Size(window.innerWidth-2*s,window.innerHeight-2*n),a=t.getChromeSize(this._rotation%2==1);e=o.getRatio()<a.getRatio()?o.width/a.width:o.height/a.height,e=Math.max(.1,Math.min(1,e))}var r=this._customSize?i:t.getViewportSize(this._rotation);this.contents.style.cssText="",$.style(this.contents,t.getCustomStyle()),this._setViewport(i,r,e);var h=this._renderers[t.getName()];!this._customRenderer||h&&h==this._customRenderer||(this._customRenderer.destroy(this),this._customRenderer=null),h&&h!=this._customRenderer&&(this._customRenderer=h,h.create(this)),this.setCenterX(t.centerSimulatorX()),this.setCenterY(t.centerSimulatorY());var d=t.getBackground(this._rotation),c=1===t.getBackgroundCount()?this._rotation:0;this.background.update(merge({scale:e/t.getDevicePixelRatio(),rotation:c,screenSize:i},d)),this.setContentSize(i.width*e,i.height*e),this.toolbar.setOffset(this.getContentArea(),this.background.getOffset()),this.emit("change")}},this.onResizeStart=function(){this.setTransitionsEnabled(!1),this.toggleClass("resize",!0)},this.onResizeStop=function(){this.computeOffset(),this.toggleClass("resize",!1),this.setTransitionsEnabled(!0)},this.onDragStop=function(){this.computeOffset(),this.setTransitionsEnabled(!0)},this.onDragStart=function(){this.setTransitionsEnabled(!1)},this.onDrag=function(t,i,e){this.addOffset(e.x,e.y)},this.onResize=function(t,i,e){this._customSize||(this._customSize=this._deviceInfo.getScreenSize()),this._customSize.add(2*e.x,2*e.y),this.update()},this.restart=this.refresh=function(){this._frame&&(this._frame.src=this._frame.src)},this.takeScreenshot=function(){var t=window.open("","","width="+(this._screenWidth+2)+",height="+(this._screenHeight+2));this._channel.request("screenshot").then(function(i){var e=i.base64Image,s=t.document,n=new Date,o=("00"+n.getMinutes()).substr(-2),a=n.getHours()+":"+o,r=1+n.getMonth()+"/"+n.getDate();s.open(),s.write("<html><title>Screenshot "+r+" "+a+\'</title></head><body style="margin:0px;padding:0px;background-color:#000;"><img src="\'+e+\'"></body></html>\'),s.close()})["catch"](function(){t.close()})},this.nativeBackButton=function(){this._channel.emit("button:back")},this.nativeHomeButton=function(){this._channel.emit("button:home"),this._isHomeScreen=!this._isHomeScreen,this.emit("change:home",this._isHomeScreen)},this.isHomeScreen=function(){return this._isHomeScreen},this.isDebugMode=function(){return this._isDebugMode},this.toggleDebugMode=function(){this.setDebugMode(!this._isDebugMode)},this.setDebugMode=function(t){this._isDebugMode=t,this.rebuild()},this.step=function(){this.setPaused(!0),this._channel.emit("step")},this.togglePaused=function(){this.setPaused(!this._isPaused)},this.isPaused=function(){return this._isPaused},this.setPaused=function(t){t=!!t,this._isPaused!=t&&(this._isPaused=t,this._channel.emit(t?"pause":"resume"),this.emit("change:pause",t))},this.toJSON=function(){var t={type:this._deviceInfo.getId()};return this._isMuted&&(t.muted=!0),this._rotation%2&&(t.rotated=!0),this._isDragEnabled||(t.draggable=!1),0!==this._zoom&&1!==this._zoom&&(t.zoom=this._zoom),t},this.fromJSON=function(t){t.type&&this.setDeviceInfo(DeviceInfo.get(t.type)),t.muted&&this.setMuted(!0),t.draggable===!1&&this.setDragEnabled(!1),t.rotated&&(this._rotation=1,this.update()),t.zoom&&this.setZoom(t.zoom)}});',pre:!0},"../../node_modules/squill/Alpha.js":{path:"../../node_modules/squill/Alpha.js",friendlyPath:".Alpha",directory:"../../node_modules/squill",filename:"Alpha.js",src:'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .jscolor.jscolor as jscolor");var alphaSelect=!1,alphaIndicator,Alpha=exports=Class(Widget,function(t){this._css="lph",this._type="text",this.init=function(e){e=merge(e,{tag:"input"}),t(this,"init",[e])},this.buildWidget=function(){var t=this._el;t.widget=this,$.onEvent(t,"focus",this,"_onFocus"),$.onEvent(t,"blur",this,"_onBlur"),$.onEvent(t,"change",this,"_onChange");var e,o;alphaSelect||(alphaSelect=document.createElement("div"),alphaSelect.style.display="none",alphaSelect.className="colorMenu",document.body.appendChild(alphaSelect),$.onEvent(alphaSelect,"mousedown",this,"_onSelect"),e=document.createElement("canvas"),e.width=20,e.height=100,alphaSelect.appendChild(e),$.style(e,{"float":"left",width:"20px",height:"100px",margin:"8px 0 0 12px",border:"1px solid #000",borderColor:"ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",backgroundColor:"red"}),$.onEvent(e,"mousedown",this,"_onMouseDown"),$.onEvent(e,"mousemove",this,"_onMouseMove"),$.onEvent(e,"mouseup",this,"_onMouseUp"),$.onEvent(e,"mouseout",this,"_onMouseOut"),alphaIndicator=document.createElement("img"),alphaIndicator.src="img/colorpicker/arrow.gif",alphaSelect.appendChild(alphaIndicator),$.style(alphaIndicator,{position:"absolute",left:"4px",top:"2px",border:"0px hidden"}),o=e.getContext("2d"),linearGradient=o.createLinearGradient(0,0,0,100),linearGradient.addColorStop(0,"#FFFFFF"),linearGradient.addColorStop(1,"#000000"),o.fillStyle=linearGradient,o.fillRect(0,0,20,100))},this._showIndicator=function(t){return 0>t&&(t=0),t>100&&(t=100),$.style(alphaIndicator,{position:"absolute",left:"4px",top:2+t+"px",border:"0px hidden"}),t},this._showMouseAlpha=function(t){alphaSelect.target.value=100-this._showIndicator(t.offsetY),alphaSelect.widget.publish("Change",parseInt(alphaSelect.target.value,10))},this._onChange=function(t){var e=this._el.value;isNaN(e)||(e=parseInt(e,10),e>=0&&100>=e&&alphaSelect.widget.publish("Change",e))},this._onFocus=function(t){var e,o=(alphaSelect.style,this._el.getBoundingClientRect()),n=o.right+4,i=o.top;i+122>window.innerHeight&&(i=o.bottom-122),n+44>window.innerWidth&&(n=o.left-48),$.style(alphaSelect,{position:"absolute",width:"44px",height:"122px",zIndex:"1000000",left:n+"px",top:i+"px",display:"block"}),alphaSelect.widget=t.target.widget,alphaSelect.target=t.target,e=isNaN(alphaSelect.target.value)?0:parseInt(alphaSelect.target.value,10),this._showIndicator(100-e)},this._onBlur=function(t){alphaSelect.style.display="none"},this._onSelect=function(t){$.stopEvent(t)},this._onMouseDown=function(t){$.stopEvent(t),this._showMouseAlpha(t),this._mouseDown=!0},this._onMouseMove=function(t){this._mouseDown&&this._showMouseAlpha(t),$.stopEvent(t)},this._onMouseOut=function(t){this._mouseDown=!1,$.stopEvent(t)},this._onMouseUp=function(t){this._mouseDown=!1,$.stopEvent(t)},this.setValue=function(t){this._el.value=t},this.getValue=function(){return this._el.value}});',pre:!0},"../../node_modules/squill/Widget.js":{path:"../../node_modules/squill/Widget.js",friendlyPath:"squill.Widget",directory:"../../node_modules/squill",filename:"Widget.js",src:'function shallowCopy(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}jsio("from util.browser import $"),jsio("import .Element, .Events, .global"),jsio("import .i18n"),jsio("import .Delegate"),jsio("import .models.Model as Model"),jsio("import .models.bindings as bindings"),jsio("from .__imports__ import classes as WIDGET_CLASSES");var uid=0,WidgetSet=Class(function(){this.init=function(t){this._target=t,this.events=[]},this.getTarget=function(){return this._target},this.hasWidget=function(t){return!!this._target[t]},this.addWidget=function(t,e){this._target[t]=e},this.addSubscription=function(t,e){this._target.dispatchEvent&&t.subscribe.apply(t,[e,this._target,"dispatchEvent",t.getId()].concat(Array.prototype.slice.call(arguments,2)))}}),Widget=exports=Class([Element,Events],function(){function t(t){var e=$.id(t);e.parentNode.insertBefore(this._el,e),e.parentNode.removeChild(e)}this._css="widget",this._name="",this.__getDef__=function(){function t(t){for(var e in t)"attrs"==e||"style"==e?i[e]=merge(i[e],t[e]):"className"==e&&i.className?i.className=t.className+" "+i.className:"children"==e?i.children?i.children.push(t.children):i.children=[t.children]:i.hasOwnProperty(e)||(i[e]=t[e])}var e=this.constructor,i={};do e.prototype.hasOwnProperty("_def")&&t(e.prototype._def);while(e=e.prototype.__parentClass__);return this.hasOwnProperty("_def")&&t(this._def),i},this.init=function(t){t=t||{},this._children=[];var e=this._def=this.__getDef__();this._id=e.id,this.__model=new Model(t.model||e.model),e.className&&(t.className=t.className?t.className+" "+e.className:e.className),e.attrs&&(t.attrs=merge(t.attrs,e.attrs)),e.style&&(t.style=merge(t.style,e.style)),this._opts=t;for(var i in e)"children"!=i&&!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(t[i]=e[i]);t.name&&(this._name=t.name),t.delegate&&(this.delegate=t.delegate);var s;if(t.widgetParent&&(s=t.widgetParent),this.controller=t.controller||s,t.parent){var n=t.parent,r=n instanceof Widget;r?(s||(s=t.parent),t.parent=n.getContainer()):n.appendChild||delete t.parent}s?s.addWidget(this):(t.parent||t.el)&&this.build(t.el)},this.getOpts=function(){return this._opts},this.getId=function(){return this._id||this._el&&this._el.id},this.build=function(t){if(!this._el||this._el!=t){var e=this._opts,i=e.children;i&&delete e.children,this._el=$.create(this._opts),i&&(e.children=i),this.buildContent()}return this},this.getParent=function(){return this._el&&this._el.parentNode},this.getWidgetParent=function(){return this._widgetParent},this.setWidgetParent=function(t){this._widgetParent!=t&&(this._widgetParent.removeWidget(this),t.addWidget(this),this._widgetParent=t)},this.getChildren=function(){return this._children},this.forEachDescend=function(t,e){for(var i=this._children.length,s=0;i>s;++s){var n=this._children[s];t.call(e,n),n.forEachDescend&&n.forEachDescend(t,e)}},this.getFirstChild=function(){return this._children&&this._children.length?this._children[0]:null},this.dispatchEvent=function(t,e){this.delegate.apply(this,arguments)},this.addElement=function(t){this._el.appendChild(t)},this.addWidget=function(t,e,i){if(this._el||this.build(),e=t.parent||e||this.getContainer()||this._el,t instanceof Widget)r=t;else{var s=merge({},t,{parent:e,__result:i});if(s.children){var n=s.children;delete s.children}var r;if("type"in s&&!s.type&&logger.warn("Did you forget to provide a type?",s),s.type&&"string"!=typeof s.type)r=new s.type(s);else if(WIDGET_CLASSES[s.type]){var h=jsio("import "+WIDGET_CLASSES[s.type]);r=new h(s)}else i?("image"==s.type&&(s=merge({tag:"img"},s)),r=$(s)):r=new Widget(s);i&&s.id&&!i.hasWidget(s.id)&&i.addWidget(s.id,r)}if(r instanceof Widget){if(r.getWidgetParent()!=this){var a=r.getWidgetParent();a&&a.removeWidget(this),r._widgetParent=this,r.controller||(r.controller=this),this._children.push(r)}r.getParent()!=e&&r.setParent(e)}if(n)if(r.buildChildren)i||(i=new WidgetSet(r)),r.buildChildren(n,null,i);else for(var o,l=0;o=n[l];++l)this.addWidget(o,r,i);return r},this.removeWidget=function(t){var e=this._children.indexOf(t);e>=0&&this._children.splice(e,1)},this.getContainer=function(){return this._el},this.getName=function(){return this._name},this.setName=function(t){this._name=t},this.buildContent=function(){var t=this._opts;null!==global.getWidgetPrefix()&&$.addClass(this._el,global.getWidgetPrefix()+this._css),this.delegate||(this.delegate=new Delegate),t.errorLabel&&(this._errorLabel=$.create({html:t.errorLabel,className:global.getWidgetPrefix()+"textInputErrorLabel",parent:this._el}));var e=this._def;if(e.children)for(var i=new WidgetSet(this),s=e.children.length-1;s>=0;--s)this.buildChildren(e.children[s],null,i);var n=t.__result||i||new WidgetSet(this);t.children&&this.buildChildren(t.children,null,n),t.data&&this.setData&&bindings.parseData(this,t.data),this.buildWidget(this._el,n)},this.buildChildren=function(t,e,i){e||(e=this.getContainer()||this._el);for(var s=0,n=t.length;n>s;++s)this.addWidget(t[s],e,i)},this.buildWidget=function(){},this.errors=function(){return this.validators.map(function(t){return 0==t.isValid?t.message:void 0})},this.validate=function(){for(var t=!0,e=0,i=this.validators.length;i>e;++e){var s=this.validators[e];t=t&&(s.isValid=s.call(this))}return this._isValid=t},this._isValid=!0,this.isValid=function(){return this._isValid},this.validators=[],this.getI18n=function(t,e){var i=t in this._opts?this._opts:i18n.get(e||this._opts.id);return i&&i[t]||""},this.getElement=function(){return this._el||this.build(),this._el},this.addClass=function(t){$.addClass(this._el,t)},this.removeClass=function(t){$.removeClass(this._el,t)},this.hasClass=function(t){return(" "+this._el.className+" ").indexOf(t)>=0},this.toggleClass=function(t,e){void 0===e&&(e=!this.hasClass(t)),e?this.addClass(t):this.removeClass(t)},this.onBeforeShow=function(){for(var t,e=0;t=this._children[e];++e)t.onBeforeShow.apply(t,arguments)},this.onShow=function(){this._isShowing=!0;for(var t,e=0;t=this._children[e];++e)t.onShow.apply(t,arguments)},this.onBeforeHide=function(){for(var t,e=0;t=this._children[e];++e)t.onBeforeHide.apply(t,arguments)},this.onHide=function(){this._isShowing=!1;for(var t,e=0;t=this._children[e];++e)t.onHide.apply(t,arguments)},this.isShowing=function(){return this._isShowing},this.show=function(){this.onBeforeShow();var t=this._opts&&this._opts.style,e=t&&"none"!=t.display&&t.display||"block";return this._el&&(this._el.style.display=e),this.onShow(),this},this.hide=function(){return this.onBeforeHide(),$.hide(this.getElement()),this.onHide(),this},this.removeChildren=function(){this._children.forEach(function(t){t.remove()})},this.remove=function(){this.onBeforeHide(),$.remove(this.getElement()),this.onHide()},this.getModel=function(){return this.__model},this.setModel=function(t,e){return 1==arguments.length?this.__model.setObject(t):this.__model.set(t,e),this},this.putHere=function(){this._el||this.build();var e="jsioWidgetId"+ ++uid;return global.getTargetDocument().write(\'<div id="\'+e+\'"></div>\'),setTimeout(bind(this,t,e),0),this},this.appendTo=this.setParent=function(t){var e=t&&(t.getContainer&&t.getContainer()||t.appendChild&&t||$.id(t));return e&&(this._el?e.appendChild(this._el):(this._opts.parent=e,this.build())),this}}),map={},lowerCaseMap={};Widget.register=function(t,e){if(e in map)throw Error("A widget with name \'"+e+"\' is already registered");map[e]=t,lowerCaseMap[e.toLowerCase()]=t},Widget.get=function(t){return lowerCaseMap[t.toLowerCase()]},Widget.WidgetSet=WidgetSet;',
pre:!0},"../../node_modules/squill/Element.js":{path:"../../node_modules/squill/Element.js",friendlyPath:".Element",directory:"../../node_modules/squill",filename:"Element.js",src:'jsio("import lib.PubSub"),jsio("from util.browser import $");var Element=exports=Class(lib.PubSub,function(t){this.init=function(t){this._opts=JS.merge(t,{win:window,tag:"div"})},this.build=function(){return this._el||(this._opts.el?(this._el=this._opts.el,$.apply(this._el,this._opts)):this._el=$.create(this._opts),this.buildContent()),this},this.getId=function(){return this._el&&this._el.id||this._opts&&this._opts.id},this.buildContent=function(){},this.destroy=function(){!this._el},this.getElement=function(){return this._el||this.build()._el},this.appendChild=function(t){return this._el||this.build(),this._el.appendChild(t instanceof Element?t._el:t),this},this.appendTo=function(t){return this._el||this.build(),t instanceof Element?t.appendChild(this):t.appendChild(this._el),this},this.setPos=function(t,i){this._el.style.x=t+"px",this._el.style.y=i+"px"},this.center=function(){var t=$(window);this.setPos(Math.max(0,t.width-this._el.offsetWidth)/2,Math.max(0,t.height-this._el.offsetHeight)/2)},this.remove=function(){$.remove(this._el)}});',pre:!0},"../../node_modules/squill/Events.js":{path:"../../node_modules/squill/Events.js",friendlyPath:".Events",directory:"../../node_modules/squill",filename:"Events.js",src:'jsio("from util.browser import $"),jsio("import .Drag"),jsio("import lib.PubSub"),exports=Class(lib.PubSub,function(){var t=Array.prototype.slice,s=/(iPod|iPhone|iPad|Android)/i.test(navigator.userAgent);this.event=function(s,i,n){this._eventEnabled||(this._eventEnabled={});var e=[this,n].concat(t.call(arguments,3)),n=bind.apply(this,e),o=this._eventEnabled;o[i]=!0,$.onEvent(s,i,function(){return o[i]?n.apply(this,arguments):void 0})},this.isDragging=function(){return this._isDragging||!1},this.initDragEvents=function(t){if(!this.__drag){var s=this.__drag=new Drag;s.subscribe("DragStart",this,"onDragStart"),s.subscribe("Drag",this,"onDrag"),s.subscribe("DragStop",this,"onDragStop")}var i=bind(this.__drag,"startDrag");t||(t=this._el),t.addEventListener&&t.addEventListener("touchstart",i,!0),$.onEvent(t,"mousedown",i)},this.initMouseEvents=function(t){t=t||this._el,s?(this.event(t,"touchstart","_onTouchStart"),this.event(t,"touchend","_onTouchEnd")):(this.event(t,"mouseover","onMouseOver"),this.event(t,"mousemove","onMouseMove"),this.event(t,"mouseout","onMouseOut"),this.event(t,"mousedown","onMouseDown"),this.event(t,"mouseup","onMouseUp"),this.event(t,"click","onClick"));var i=this._opts;return i&&i.__result&&i.__result.addSubscription(this,"Select"),this},this.initFocusEvents=function(t){return t=t||this._el,this.event(t,"focus","onFocus"),this.event(t,"blur","onBlur"),this},this.initKeyEvents=function(t){return t=t||this._el,this.event(t,"keydown","onKeyDown"),this.event(t,"keypress","onKeyPress"),this.event(t,"keyup","onKeyUp"),this},this._onTouchStart=function(t){this.onMouseOver(t),this.onMouseDown(t)},this._onTouchEnd=function(t){this.onMouseUp(t),this.onClick(t),this.onMouseOut(t)},this.onMouseOver=function(t){this._enableMouseEvents||(this._isOver=!0),this.publish("Over",t)},this.onMouseMove=function(t){this._enableMouseEvents||this.publish("Move",t)},this.onMouseOut=function(t){this._isOver=!1,this.publish("Out",t)},this.onMouseDown=function(t){return this._isDown=!0,this.publish("Down",t),!1},this.onMouseUp=function(t){return this._isDown=!1,this.publish("Up",t),!1},this.onClick=function(t){return this.publish("Select",t),this.emit("click",t),!1},this.onFocus=function(t){this._isFocused=!0,this.publish("Focus",t)},this.onBlur=function(t){this._isFocused=!1,this.publish("Blur",t)},this.onKeyUp=function(t){this.publish("KeyUp",t)},this.onKeyPress=function(t){this.publish("KeyPress",t)},this.onKeyDown=function(t){this.publish("KeyDown",t)},this.onDragStart=function(t){},this.onDrag=function(t,s){},this.onDragStop=function(t,s){}});',pre:!0},"../../node_modules/squill/Drag.js":{path:"../../node_modules/squill/Drag.js",friendlyPath:".Drag",directory:"../../node_modules/squill",filename:"Drag.js",src:'function resolveMouse(e){if(e.touches)return resolveMouse(e.touches[0]);if("pageX"in e)gCurrentMouse.x=e.pageX,gCurrentMouse.y=e.pageY;else{var t=document.documentElement,r=document.body;gCurrentMouse.x=e.clientX+(t&&t.scrollLeft||r&&r.scrollLeft||0)-(t&&t.clientLeft||r&&r.clientLeft||0),gCurrentMouse.y=e.clientY+(t&&t.scrollTop||r&&r.scrollTop||0)-(t&&t.clientTop||r&&r.clientTop||0)}}function gAddItem(e){gRemoveItem(e),gCurrentDrag.push(e),_active=!0}function gRemoveItem(e){for(var t=0;t<gCurrentDrag.length;++t)gCurrentDrag[t]==e&&(gCurrentDrag.splice(t,1),--t);gCurrentDrag[0]||(_active=!1)}function onMove(e){if(_active){resolveMouse(e);for(var t=0;t<gCurrentDrag.length;++t)gCurrentDrag[t].onMouseMove(e)}}function onUp(e){if(_active)for(var t=0;t<gCurrentDrag.length;++t)gCurrentDrag[t].onMouseUp(e)}function registerWindow(e){var t=e.document;"ontouchstart"in e?(t.addEventListener("touchstart",resolveMouse,!0),t.addEventListener("touchmove",onMove,!0),t.addEventListener("touchend",onUp,!0)):(t.addEventListener("mousedown",resolveMouse,!0),t.addEventListener("mousemove",onMove,!0),t.addEventListener("mouseup",onUp,!0))}jsio("import lib.PubSub"),jsio("import math.geom.Point as Point"),jsio("from util.browser import $");var gCurrentDrag=[],gCurrentMouse={x:0,y:0},_active=!1;exports=Class(lib.PubSub,function(e){this.init=function(e){this._isActive=!1},this.isDragging=function(){return this._isActive},this.startDrag=function(e,t){var r=this._evt=new exports.DragEvent;this._evt.data=t,this._evt.params=merge(e,{threshold:5}),r.srcPt=new Point(gCurrentMouse),r.currPt=new Point(gCurrentMouse),gAddItem(this)},this.onMouseMove=function(e){var t=this._evt,r=Point.subtract(gCurrentMouse,t.srcPt);if(!this._isActive&&r.getMagnitude()>t.params.threshold){this._isActive=!0;var n=e.target&&(e.target.ownerDocument||9==e.target.nodeType&&e.target);this.disableIframes(n),this.publish("DragStart",t)}this._isActive&&($.stopEvent(e),t.prevPt=t.currPt,t.currPt=new Point(gCurrentMouse),this.publish("Drag",t,e,Point.subtract(t.currPt,t.prevPt)))},this.onMouseUp=function(e){return gRemoveItem(this),this._isActive?($.stopEvent(e),this._isActive=!1,this.enableIframes(),this.publish("DragStop",this._evt,e),!0):void 0},this.disableIframes=function(e){this._disabledFrames||(this._disabledFrames=[]),$("iframe",e).forEach(function(e){try{this._disabledFrames.push({frame:e,pointerEvents:e.style.pointerEvents}),e.style.pointerEvents="none"}catch(t){}},this)},this.enableIframes=function(){this._disabledFrames.splice(0,this._disabledFrames.length).forEach(function(e){e.frame.style.pointerEvents=e.pointerEvents})}}),exports.registerWindow=registerWindow,exports.DragEvent=Class(function(){});var win=window;for(registerWindow(win);win.parent!=win;){win=win.parent;try{registerWindow(win)}catch(e){}}',pre:!0},"../../node_modules/squill/global.js":{path:"../../node_modules/squill/global.js",friendlyPath:".global",directory:"../../node_modules/squill",filename:"global.js",src:'var gWidgetPrefix="squill-",gWin=window,gDoc=document;exports.setTargetWindow=function(e){gWin=e,gDoc=e.document},exports.getTargetWindow=function(){return gWin},exports.getTargetDocument=function(){return gDoc},exports.setWidgetPrefix=function(e){gWidgetPrefix=e},exports.getWidgetPrefix=function(){return gWidgetPrefix};',pre:!0},"../../node_modules/squill/i18n.js":{path:"../../node_modules/squill/i18n.js",friendlyPath:".i18n",directory:"../../node_modules/squill",filename:"i18n.js",src:"var gLang=null;exports.setLang=function(t){gLang=t},exports.get=function(t){return gLang&&gLang.get(t)},exports.Language=Class(function(){this.init=function(t){this._dict=t},this.add=function(t,n){this._dict[t]=n},this.get=function(t){return this._dict[t]}});",pre:!0},"../../node_modules/squill/Delegate.js":{path:"../../node_modules/squill/Delegate.js",friendlyPath:".Delegate",directory:"../../node_modules/squill",filename:"Delegate.js",src:"var SLICE=Array.prototype.slice,Delegate=exports=Class(function(){this.init=function(t){t&&t(this)},this.extend=function(t){var i=new Delegate(t);return i.parent=this,i},this.call=function(t,i){return this[i]?this[i].apply(t,SLICE.call(arguments,2)):this.parent?this.parent.apply(t,SLICE.call(arguments,1)):void 0},this.apply=function(t,i){this.call.apply(this,[t].concat(SLICE.call(i)))}});",pre:!0},"../../node_modules/squill/models/Model.js":{path:"../../node_modules/squill/models/Model.js",friendlyPath:".models.Model",directory:"../../node_modules/squill/models",filename:"Model.js",src:'jsio("import lib.PubSub");var Model=exports=Class(lib.PubSub,function(t){function i(t){return JSON.parse(JSON.stringify(t))}function s(t){return t.split(r).map(function(t){return"]"==t[t.length-1]?parseInt(t):t})}function e(t,i){return 0==t.indexOf(i)||0==i.indexOf(t)}this.init=function(t){var i;if(t instanceof Model){var s=t;t={localStorage:s._storageKey},i=s._data}if(this._data={},t&&t.localStorage&&(this._storageKey=t.localStorage,void 0===i)){var e=localStorage.getItem(this._storageKey);if(e)try{i=JSON.parse(e)}catch(r){}}this.setObject(i||{}),t&&(t.values&&Object.keys(t.values).forEach(function(i){this.set(i,t.values[i])},this),t.defaults&&Object.keys(t.defaults).forEach(function(i){this.has(i)||this.set(i,t.defaults[i])},this))},this.setObject=function(t){return this._data=t,this.emit(),this.persist(),this},this.toObject=function(){return i(this._data)},this.clone=function(){return new Model(this.getObject())};var r=/[\\[.,]/;this.has=function(t){return void 0!==this.get(t)},this.get=function(t){for(var i=s(t),e=i.length,r=0,n=this._data;n&&e>r;)n=n[i[r++]];return n},this.getObject=function(t){return i(this.get(t)||{})},this.set=function(t,i){for(var e=s(t),r=e.length-1,n=0,a=this._data;a&&r>n;){var h=e[n++];a[h]||(a[h]="number"==typeof e[n]?[]:{}),a=a[h]}var o=a[e[r]];return i!=o&&(a[e[r]]=i,this.emit(t,i)),this.persist(),this},this.emit=function(i,s){return i&&t(this,"emit",arguments),this._subscribers&&Object.keys(this._subscribers).forEach(function(s){(!i||s!=i&&e(s,i))&&t(this,"emit",[s,this.get(s)])},this),this},this.persist=function(){return this._storageKey&&localStorage.setItem(this._storageKey,JSON.stringify(this._data)),this}});',pre:!0},"../../node_modules/squill/models/bindings.js":{path:"../../node_modules/squill/models/bindings.js",friendlyPath:".models.bindings",directory:"../../node_modules/squill/models",filename:"bindings.js",src:'var RE_BINDING=/(^|[^%])%\\((.*?)\\)([ +0-]?)(\\d*)(\\.?\\d*)([dfcs])/g;exports.parseFormat=function(t,s){var e=[];s.replace(RE_BINDING,function(t,s,i,n,h,u,_,a){e.push({index:a+s.length,endIndex:a+t.length,key:i,pad:n||" ",minLength:parseInt(h),decimal:parseInt(u.substring(1)),type:_,value:""})}),e.reverse(),new Binding(t,null,s,e)},exports.parseData=function(t,s){new Binding(t,s)};var Binding=Class(function(){this.init=function(t,s,e,i){var n=t.getOpts().__result,h=n&&n.getTarget()||t;this._widget=t,this._key=s,this._src=e,this._subs=i,this._connect(h.getModel()),t.on("change",bind(this,"_updateModel")),h.on("model",bind(this,"_connect"))},this._connect=function(t){this._model&&this._disconnect(),this._model=t,this._subs?(this._subs.forEach(function(s){s.value=t.get(s.key),t.subscribe(s.key,this,"_update",s.key)},this),this._update()):this._key&&(t.subscribe(this._key,this,"_updateKey"),this._updateKey(t.get(this._key)))},this._disconnect=function(){var t=this._model;this._subs&&this._subs.forEach(function(s){t.unsubscribe(s.key,this)},this),this._key&&t.unsubscribe(this._key,this)},this._update=function(t,s){var e=this._src;this._subs.forEach(function(i){t&&i.key==t&&(i.value=s),e=e.substring(0,i.index)+i.value+e.substring(i.endIndex)},this),this._widget.setData(e)},this._updateKey=function(t){this._widget.setData(t)},this._updateModel=function(t){this._model&&this._key&&this._model.set(this._key,t)}});',pre:!0},"../../node_modules/squill/__imports__.js":{path:"../../node_modules/squill/__imports__.js",friendlyPath:".__imports__",directory:"../../node_modules/squill",filename:"__imports__.js",pre:!0,src:'exports.classes={alpha:".Alpha",label:".Label",list:".List",button:".TextButton",text:".TextInput",textarea:".TextArea",password:".TextInput",scroller:".Scroller",canvas:".Canvas",checkbox:".CheckBox",menu:".Menu",slider:".Slider",color:".Color",vcenter:".VerticalCenter",treelist:".TreeList",graph:".Graph",select:".SelectBox",widget:".Widget"},exports.resolve=function(e,t){var r=[];if("browser"==e)for(var s in exports.classes)r.push(exports.classes[s]);return r};'},"../../node_modules/squill/jscolor/jscolor.js":{path:"../../node_modules/squill/jscolor/jscolor.js",friendlyPath:".jscolor.jscolor",directory:"../../node_modules/squill/jscolor",filename:"jscolor.js",src:'var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){return jscolor.dir="images/colorpicker/",jscolor.dir},detectDir:function(){for(var e=location.href,t=document.getElementsByTagName("base"),o=0;o<t.length;o+=1)t[o].href&&(e=t[o].href);for(var t=document.getElementsByTagName("script"),o=0;o<t.length;o+=1)if(t[o].src&&/(^|\\/)jscolor\\.js([?#].*)?$/i.test(t[o].src)){var r=new jscolor.URI(t[o].src),s=r.toAbsolute(e);return s.path=s.path.replace(/[^\\/]+$/,""),s.query=null,s.fragment=null,s.toString()}return!1},bind:function(e){e.color=new jscolor.color(e,{})},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent&&e.attachEvent("on"+t,o)},fireEvent:function(e,t){if(e)if(document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent(t,!0,!0),e.dispatchEvent(o)}else if(document.createEventObject){var o=document.createEventObject();e.fireEvent("on"+t,o)}else e["on"+t]&&e["on"+t]()},getElementPos:function(e){var t=e,o=e,r=0,s=0;if(t.offsetParent)do r+=t.offsetLeft,s+=t.offsetTop;while(t=t.offsetParent);for(;(o=o.parentNode)&&"BODY"!==o.nodeName.toUpperCase();)r-=o.scrollLeft,s-=o.scrollTop;return[r,s]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,o=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,o=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,o=e.layerY),{x:t,y:o}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function t(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\\/?[^\\/]*$/,"");else if("."===e||".."===e)e="";else{var o=e.match(/^\\/?[^\\/]*/)[0];e=e.substr(o.length),t+=o}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){var t=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\\/\\/)([^\\/?#]*))?([^?#]*)((\\?)([^#]*))?((#)(.*))?/);return this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){var e=new jscolor.URI(e),o=this,r=new jscolor.URI;return null===e.scheme?!1:(null!==o.scheme&&o.scheme.toLowerCase()===e.scheme.toLowerCase()&&(o.scheme=null),null!==o.scheme?(r.scheme=o.scheme,r.authority=o.authority,r.path=t(o.path),r.query=o.query):(null!==o.authority?(r.authority=o.authority,r.path=t(o.path),r.query=o.query):(""===o.path?(r.path=e.path,null!==o.query?r.query=o.query:r.query=e.query):("/"===o.path.substr(0,1)?r.path=t(o.path):(null!==e.authority&&""===e.path?r.path="/"+o.path:r.path=e.path.replace(/[^\\/]+$/,"")+o.path,r.path=t(r.path)),r.query=o.query),r.authority=e.authority),r.scheme=e.scheme),r.fragment=o.fragment,r)},e&&this.parse(e)},color:function(target,prop){function RGB_HSV(e,t,o){var r=Math.min(Math.min(e,t),o),s=Math.max(Math.max(e,t),o),l=s-r;if(0===l)return[null,0,s];var n=e===r?3+(o-t)/l:t===r?5+(e-o)/l:1+(t-e)/l;return[6===n?0:n,l/s,s]}function HSV_RGB(e,t,o){if(null===e)return[o,o,o];var r=Math.floor(e),s=r%2?e-r:1-(e-r),l=o*(1-t),n=o*(1-t*s);switch(r){case 6:case 0:return[o,n,l];case 1:return[n,o,l];case 2:return[l,o,n];case 3:return[l,n,o];case 4:return[n,l,o];case 5:return[o,l,n]}}function removePicker(){delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function drawPicker(e,t){function o(){var e=THIS.pickerInsetColor.split(/\\s+/),t=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1];n.btn.style.borderColor=t}if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(THIS.pickerCloseText)};for(var r=0,s=4;r<jscolor.images.sld[1];r+=s){var l=document.createElement("div");l.style.height=s+"px",l.style.fontSize="1px",l.style.lineHeight="0",jscolor.picker.sld.appendChild(l)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var n=jscolor.picker;n.box.onmouseup=n.box.onmouseout=function(){target.focus()},n.box.onmousedown=function(){abortBlur=!0},n.box.onmousemove=function(e){(holdPad||holdSld)&&(holdPad&&setPad(e),holdSld&&setSld(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),dispatchImmediateChange())},n.padM.onmouseup=n.padM.onmouseout=function(){holdPad&&(holdPad=!1,jscolor.fireEvent(valueElement,"change"))},n.padM.onmousedown=function(e){holdPad=!0,setPad(e),dispatchImmediateChange()},n.sldM.onmouseup=n.sldM.onmouseout=function(){holdSld&&(holdSld=!1,jscolor.fireEvent(valueElement,"change"))},n.sldM.onmousedown=function(e){holdSld=!0,setSld(e),dispatchImmediateChange()};var i=getPickerDims(THIS);n.box.style.width=i[0]+"px",n.box.style.height=i[1]+"px",n.boxB.style.position="absolute",n.boxB.style.clear="both",n.boxB.style.left=e+"px",n.boxB.style.top=t+"px",n.boxB.style.zIndex=THIS.pickerZIndex,n.boxB.className="colorMenu",n.pad.style.width=jscolor.images.pad[0]+"px",n.pad.style.height=jscolor.images.pad[1]+"px",n.padB.style.position="absolute",n.padB.style.left=THIS.pickerFace+"px",n.padB.style.top=THIS.pickerFace+"px",n.padB.style.border=THIS.pickerInset+"px solid",n.padB.style.borderColor=THIS.pickerInsetColor,n.padM.style.position="absolute",n.padM.style.left="0",n.padM.style.top="0",n.padM.style.width=THIS.pickerFace+2*THIS.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",n.padM.style.height=n.box.style.height,n.padM.style.cursor="crosshair",n.sld.style.overflow="hidden",n.sld.style.width=jscolor.images.sld[0]+"px",n.sld.style.height=jscolor.images.sld[1]+"px",n.sldB.style.display=THIS.slider?"block":"none",n.sldB.style.position="absolute",n.sldB.style.right=THIS.pickerFace+"px",n.sldB.style.top=THIS.pickerFace+"px",n.sldB.style.border=THIS.pickerInset+"px solid",n.sldB.style.borderColor=THIS.pickerInsetColor,n.sldM.style.display=THIS.slider?"block":"none",n.sldM.style.position="absolute",n.sldM.style.right="0",n.sldM.style.top="0",n.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+THIS.pickerFace+2*THIS.pickerInset+"px",n.sldM.style.height=n.box.style.height;try{n.sldM.style.cursor="pointer"}catch(a){n.sldM.style.cursor="hand"}n.btn.style.display=THIS.pickerClosable?"block":"none",n.btn.style.position="absolute",n.btn.style.left=THIS.pickerFace+"px",n.btn.style.bottom=THIS.pickerFace+"px",n.btn.style.padding="0 15px",n.btn.style.height="18px",n.btn.style.border=THIS.pickerInset+"px solid",o(),n.btn.style.color=THIS.pickerButtonColor,n.btn.style.font="12px sans-serif",n.btn.style.textAlign="center";try{n.btn.style.cursor="pointer"}catch(a){n.btn.style.cursor="hand"}switch(n.btn.onmousedown=function(){THIS.hidePicker()},n.btnS.style.lineHeight=n.btn.style.height,modeID){case 0:var c="hs.png";break;case 1:var c="hv.png"}n.padM.style.backgroundImage="url(\'"+jscolor.getDir()+"cross.gif\')",n.padM.style.backgroundRepeat="no-repeat",n.sldM.style.backgroundImage="url(\'"+jscolor.getDir()+"arrow.gif\')",n.sldM.style.backgroundRepeat="no-repeat",n.pad.style.backgroundImage="url(\'"+jscolor.getDir()+c+"\')",n.pad.style.backgroundRepeat="no-repeat",n.pad.style.backgroundPosition="0 0",redrawPad(),redrawSld(),jscolor.picker.owner=THIS,document.getElementsByTagName("body")[0].appendChild(n.boxB)}function getPickerDims(e){var t=[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]];return t}function redrawPad(){switch(modeID){case 0:var e=1;break;case 1:var e=2}var t=Math.round(THIS.hsv[0]/6*(jscolor.images.pad[0]-1)),o=Math.round((1-THIS.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=THIS.pickerFace+THIS.pickerInset+t-Math.floor(jscolor.images.cross[0]/2)+"px "+(THIS.pickerFace+THIS.pickerInset+o-Math.floor(jscolor.images.cross[1]/2))+"px";var r=jscolor.picker.sld.childNodes;switch(modeID){case 0:for(var s=HSV_RGB(THIS.hsv[0],THIS.hsv[1],1),l=0;l<r.length;l+=1)r[l].style.backgroundColor="rgb("+s[0]*(1-l/r.length)*100+"%,"+s[1]*(1-l/r.length)*100+"%,"+s[2]*(1-l/r.length)*100+"%)";break;case 1:var s,n,i=[THIS.hsv[2],0,0],l=Math.floor(THIS.hsv[0]),a=l%2?THIS.hsv[0]-l:1-(THIS.hsv[0]-l);switch(l){case 6:case 0:s=[0,1,2];break;case 1:s=[1,0,2];break;case 2:s=[2,0,1];break;case 3:s=[2,1,0];break;case 4:s=[1,2,0];break;case 5:s=[0,2,1]}for(var l=0;l<r.length;l+=1)n=1-1/(r.length-1)*l,i[1]=i[0]*(1-n*a),i[2]=i[0]*(1-n),r[l].style.backgroundColor="rgb("+100*i[s[0]]+"%,"+100*i[s[1]]+"%,"+100*i[s[2]]+"%)"}}function redrawSld(){switch(modeID){case 0:var e=2;break;case 1:var e=1}var t=Math.round((1-THIS.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(THIS.pickerFace+THIS.pickerInset+t-Math.floor(jscolor.images.arrow[1]/2))+"px"}function isPickerOwner(){return jscolor.picker&&jscolor.picker.owner===THIS}function blurTarget(){valueElement===target&&THIS.importColor(),THIS.pickerOnfocus&&THIS.hidePicker()}function blurValue(){valueElement!==target&&THIS.importColor()}function setPad(e){var t=jscolor.getRelMousePos(e),o=t.x-THIS.pickerFace-THIS.pickerInset,r=t.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(o*(6/(jscolor.images.pad[0]-1)),1-r/(jscolor.images.pad[1]-1),null,leaveSld);break;case 1:THIS.fromHSV(o*(6/(jscolor.images.pad[0]-1)),null,1-r/(jscolor.images.pad[1]-1),leaveSld)}}function setSld(e){var t=jscolor.getRelMousePos(e),o=t.y-THIS.pickerFace-THIS.pickerInset;switch(modeID){case 0:THIS.fromHSV(null,null,1-o/(jscolor.images.sld[1]-1),leavePad);break;case 1:THIS.fromHSV(null,1-o/(jscolor.images.sld[1]-1),null,leavePad)}}function dispatchImmediateChange(){THIS.onImmediateChange&&("string"==typeof THIS.onImmediateChange?eval(THIS.onImmediateChange):THIS.onImmediateChange(THIS))}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=target,this.styleElement=target,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var p in prop)prop.hasOwnProperty(p)&&(this[p]=prop[p]);this.hidePicker=function(){isPickerOwner()&&removePicker()},this.showPicker=function(){if(!isPickerOwner()){var e,t,o,r=jscolor.getElementPos(target),s=jscolor.getElementSize(target),l=jscolor.getViewPos(),n=jscolor.getViewSize(),i=getPickerDims(this);switch(this.pickerPosition.toLowerCase()){case"left":e=1,t=0,o=-1;break;case"right":e=1,t=0,o=1;break;case"top":e=0,t=1,o=-1;break;default:e=0,t=1,o=1}var a=(s[t]+i[t])/2;if(this.pickerSmartPosition)var c=[-l[e]+r[e]+i[e]>n[e]&&-l[e]+r[e]+s[e]/2>n[e]/2&&r[e]+s[e]-i[e]>=0?r[e]+s[e]-i[e]:r[e],-l[t]+r[t]+s[t]+i[t]-a+a*o>n[t]?-l[t]+r[t]+s[t]/2>n[t]/2&&r[t]+s[t]-a-a*o>=0?r[t]+s[t]-a-a*o:r[t]+s[t]-a+a*o:r[t]+s[t]-a+a*o>=0?r[t]+s[t]-a+a*o:r[t]+s[t]-a-a*o];else var c=[r[e],r[t]+s[t]-a+a*o];drawPicker(c[e],c[t])}},this.importColor=function(){valueElement?this.adjust?!this.required&&/^\\s*$/.test(valueElement.value)?(valueElement.value="",styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.fromString(valueElement.value)||this.exportColor():this.fromString(valueElement.value,leaveValue)||(styleElement.style.backgroundColor=styleElement.jscStyle.backgroundColor,styleElement.style.color=styleElement.jscStyle.color,this.exportColor(leaveValue|leaveStyle)):this.exportColor()},this.exportColor=function(e){if(!(e&leaveValue)&&valueElement){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),valueElement.value=t}e&leaveStyle||!styleElement||(styleElement.style.backgroundColor="#"+this.toString(),styleElement.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&leavePad||!isPickerOwner()||redrawPad(),e&leaveSld||!isPickerOwner()||redrawSld()},this.fromHSV=function(e,t,o,r){0>e&&(e=0)||e>6&&(e=6),0>t&&(t=0)||t>1&&(t=1),0>o&&(o=0)||o>1&&(o=1),this.rgb=HSV_RGB(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===o?this.hsv[2]:this.hsv[2]=o),this.exportColor(r)},this.fromRGB=function(e,t,o,r){0>e&&(e=0)||e>1&&(e=1),0>t&&(t=0)||t>1&&(t=1),0>o&&(o=0)||o>1&&(o=1);var s=RGB_HSV(null===e?this.rgb[0]:this.rgb[0]=e,null===t?this.rgb[1]:this.rgb[1]=t,null===o?this.rgb[2]:this.rgb[2]=o);null!==s[0]&&(this.hsv[0]=s[0]),0!==s[2]&&(this.hsv[1]=s[1]),this.hsv[2]=s[2],this.exportColor(r)},this.fromString=function(e,t){var o=e.match(/^\\W*([0-9A-F]{3}([0-9A-F]{3})?)\\W*$/i);return o?(6===o[1].length?this.fromRGB(parseInt(o[1].substr(0,2),16)/255,parseInt(o[1].substr(2,2),16)/255,parseInt(o[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(o[1].charAt(0)+o[1].charAt(0),16)/255,parseInt(o[1].charAt(1)+o[1].charAt(1),16)/255,parseInt(o[1].charAt(2)+o[1].charAt(2),16)/255,t),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var THIS=this,modeID="hvs"===this.pickerMode.toLowerCase()?1:0,abortBlur=!1,valueElement=jscolor.fetchElement(this.valueElement),styleElement=jscolor.fetchElement(this.styleElement),holdPad=!1,holdSld=!1,leaveValue=1,leaveStyle=2,leavePad=4,leaveSld=8;if(jscolor.addEvent(target,"focus",function(){THIS.pickerOnfocus&&THIS.showPicker()}),jscolor.addEvent(target,"blur",function(){abortBlur?abortBlur=!1:window.setTimeout(function(){abortBlur||blurTarget(),abortBlur=!1},0)}),valueElement){var updateField=function(){THIS.fromString(valueElement.value,leaveValue),dispatchImmediateChange()};jscolor.addEvent(valueElement,"keyup",updateField),jscolor.addEvent(valueElement,"input",updateField),jscolor.addEvent(valueElement,"blur",blurValue),valueElement.setAttribute("autocomplete","off")}switch(styleElement&&(styleElement.jscStyle={backgroundColor:styleElement.style.backgroundColor,color:styleElement.style.color}),modeID){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};exports=jscolor;',pre:!0},"../../node_modules/squill/Label.js":{path:"../../node_modules/squill/Label.js",friendlyPath:".Label",directory:"../../node_modules/squill",filename:"Label.js",src:'jsio("from util.browser import $"),jsio("import squill.Widget"),jsio("import squill.models.bindings as bindings"),exports=Class(squill.Widget,function(){this._css="label",this._def={children:[{id:"_labelSpan",tag:"span"}]},this.buildWidget=function(){this.setLabel(this.getI18n("label"));var t=this._opts;t.format&&bindings.parseFormat(this,t.format)},this.setData=this.setValue=this.setLabel=this.setText=function(t){/object/i.test(t),$.setText(this._labelSpan,t)},this.setHTML=function(t){this._labelSpan.innerHTML=t}});',pre:!0},"../../node_modules/squill/List.js":{path:"../../node_modules/squill/List.js",friendlyPath:".List",directory:"../../node_modules/squill",filename:"List.js",src:'jsio("import .Window"),jsio("import .Widget"),jsio("from util.browser import $"),jsio("import .models.DataSource as DataSource"),jsio("import .Selection");var List=exports=Class(Widget,function(t){this._css="list",this.init=function(e){e=merge(e,{containSelf:!0,cellSpacing:0,isTiled:!1,preserveCells:!1,renderAll:!0,isFixedHeight:!0,absolutePosition:!0,filter:null}),this.needsRender=delay(this.render),e.cellCtor&&this.setCellCtor(e.cellCtor),e.dataSource&&this.setDataSource(e.dataSource),e.sorter&&this.setSorter(e.sorter),this._lastFilter=null,this._filter=e.filter,this._cellsByID={},this._removed={},this._containSelf=e.containSelf,this._containerTag=e.containerTag,this._applyNodeOrder=e.applyNodeOrder,this._renderOpts={cellSpacing:e.cellSpacing||0},this.updateFilter=delay(function(){this._lastFilter=null,this.needsRender()},100),t(this,"init",[e]),e.__result&&e.__result.addSubscription(this,"select"),Window.get().on("ViewportChange",bind(this,"needsRender"))},this.getContainer=function(){return this._container},this.getDataSource=function(){return this._dataSource},this.setModel=function(e,i){return 1!=arguments.length?t(this,"setModel",arguments):void this.setDataSource(arguments[0])},this.setData=function(t){if(this._dataSource?this._dataSource.clear():this.setDataSource(new DataSource({sorter:this._sorter})),t){var e;e=Array.isArray(t)?t.map(function(t,e){return{id:e,data:t}}):Object.keys(t).map(function(e){return{id:e,data:t[e]}}),this._dataSource.add(e)}this.needsRender()},this.setDataSource=function(t){this._dataSource!=t&&(this._dataSource&&(this._dataSource.unsubscribe("Update",this),this._dataSource.unsubscribe("Remove",this),this.clear()),this._dataSource=t,this._dataSource.subscribe("Update",this,"onUpdateItem"),this._dataSource.subscribe("Remove",this,"onRemoveItem"),this.needsRender())},this.onUpdateItem=function(t,e){var i=this._cellsByID[t];i&&i.getItem()!=e&&i.setItem(e),this.updateFilter()},this.onRemoveItem=function(t){this._removed[t]=!0,this.updateFilter()},this.buildWidget=function(){this._container=$({parent:this._el,className:this._opts.containerClassName,tag:this._containerTag||"div"}),this._containSelf&&!this._applyNodeOrder&&(this._container.style.position="relative"),(this._opts.selection||this._opts.selectable)&&this.setSelectable(this._opts.selection||this._opts.selectable),this.render()},this.setValue=function(t){this.selection&&this.selection.select(t)},this.getValue=function(){return this.selection?this.selection.get():void 0},this.setSelectable=function(t){this.selection=new Selection({parent:this,type:t}).subscribe("Select",this,"_onSelected",!0).subscribe("Deselect",this,"_onSelected",!1),this.selection},this._onSelected=function(t,e,i){void 0!==this._cellsByID[i]&&(this._cellsByID[i].updateSelected(),t&&this.publish("select",i,e))},this.setCellCtor=function(t){t!=this._cellCtor&&(this._cellCtor=t,this.clear())},this.clear=function(){for(var t in this._cellsByID){var e=this._cellsByID[t];e.remove()}this._cellsByID={},this._renderedDataSource=null,this._cellDim=null},this.getCell=this.getCellById=function(t){return this._cellsByID[t]},this.setCell=this.setCellForId=function(t,e){this._cellsByID[t]=e},this.getCells=function(){return this._cellsByID},this.setSorter=function(t){this._sorter=t,this._renderedDataSource&&this._renderedDataSource.setSorter(t)},this.setFilter=function(t){this._filter=t,this.needsRender()},this.setFixedHeight=function(t){this._opts.isFixedHeight=t},this._applyDataSource=function(){if(this._filter!=this._lastFilter)this._lastFilter=this._filter,this._renderedDataSource=this._dataSource.getFilteredDataSource(bind(this,this._filter)),this._lastSorter=this._sorter,this._renderedDataSource.setSorter(this._sorter);else if(this._sorter!=this._lastSorter){if(!this._renderedDataSource||this._renderedDataSource==this._dataSource)return this._filter=function(){return!0},this._applyDataSource();this._lastSorter=this._sorter,this._renderedDataSource.setSorter(this._sorter)}this._renderedDataSource||(this._renderedDataSource=this._dataSource)},this.onShow=function(){t(this,"onShow",arguments),this.needsRender()},this.render=function(){this._dataSource&&(this._applyDataSource(),this._renderedDataSource.sort(),this._opts.renderAll?this.renderAllDelayed():this._opts.isFixedHeight?this.renderFixedHeight():this.renderDynamicHeight(),this._removed={})},this.setCellDim=function(t){this._cellDim=t},this.getCellDim=function(){if(this._cellDim)return this._cellDim;if(this._opts.isFixedHeight){var t=this._renderedDataSource.getItemForIndex(0);if(!t)return!1;var e=t[this._renderedDataSource.getKey()],i=this._cellsByID[e]||(this._cellsByID[e]=this._createCell(t)),s=$.size(i.getElement());if(0==s.width||0==s.height)return null;var r=this._opts.cellSpacing;return r&&(s.width+=r,s.height+=r),this._cellDim=s,s}throw"unimplemented"},this._createCell=function(t){var e=this._dataSource.getKey(),i=new this._cellCtor({parent:this,controller:this,key:e,item:t});return i.getElement().setAttribute("squill-data-id",t[e]),i.render(),i},this._nodeOrder=function(){var t,e,i,s,r,o=this._container,n=this._renderedDataSource,h=n.key;if(o.childNodes.length){for(t=document.createElement("div"),o.insertBefore(t,o.childNodes[0]),r=0;r<n.length;r++)s=n.getItemForIndex(r),e=this._cellsByID[s[h]],i=e.getElement(),e&&i.parentNode&&o.insertBefore(o.removeChild(i),t);o.removeChild(t)}},this.renderAllDelayed=function(){function t(){var t=i.getItemForIndex(s);if(!t)return!1;var e=t[i.getKey()],r=this._cellsByID[e];return r?r.render():r=this._cellsByID[e]=this._createCell(t),!this._applyNodeOrder&&this.positionCell(r,s),++s,!0}function e(){this._renderManyTimeout&&(clearTimeout(this._renderManyTimeout),this._renderManyTimeout=void 0);for(var i=50,s=0,r=+new Date;s++<10||+new Date-r<i;)if(!t.call(this))return void(this._applyNodeOrder&&this._nodeOrder());this._renderManyTimeout=setTimeout(bind(this,e),100)}var i=this._renderedDataSource;if(i){this.updateRenderOpts();var s=0,r=this._removed;for(var o in r)if(!i.getItemForID(o)){var n=this._cellsByID[o];n&&(n.remove(),delete this._cellsByID[o])}e.call(this)}},this.setOffsetParent=function(t){this._opts.offsetParent=t},this.setTiled=function(t){this._opts.isTiled=t,this._isTiled=t},this.updateRenderOpts=function(){var t=this._renderOpts;t.offsetTop=this._containSelf?0:this._container.offsetTop,t.offsetLeft=this._containSelf?0:this._container.offsetLeft;var e=this._offsetParent||this.getOffsetParent();if(t.top=(e.getAttribute("squill-scroller-top")||e.scrollTop)-t.offsetTop,t.height=e.offsetHeight,t.bottom=t.top+t.height,this._opts.isFixedHeight){var i=this.getCellDim();if(!i)return!1;t.cellWidth=i.width,t.cellHeight=i.height}var s=t.numRows=this._renderedDataSource.length;return this._opts.isFixedHeight&&(this._opts.isTiled?(t.maxWidth=e.offsetWidth-t.offsetLeft,t.numPerRow=Math.max(1,t.maxWidth/t.cellWidth|0),t.numRows=Math.ceil(s/t.numPerRow),t.start=Math.max(0,(t.top/t.cellHeight|0)*t.numPerRow),t.end=Math.ceil(t.bottom/t.cellHeight)*t.numPerRow):(t.start=Math.max(0,t.top/t.cellHeight|0),t.end=t.bottom/t.cellHeight+1|0)),this._applyNodeOrder||(this._opts.absolutePosition?this._container.style.height=t.numRows*t.cellHeight+"px":this._container.style.height="auto"),!0},this.positionCell=function(t,e){if(this._opts.absolutePosition){var i,s,r=this._renderOpts,o=t.getElement();this._opts.isTiled?(i=e%r.numPerRow,s=e/r.numPerRow|0,o.style.left=i*r.cellWidth+r.offsetLeft+"px",o.style.top=s*r.cellHeight+r.offsetTop+"px"):o.style.top=(e*r.cellHeight||0)+r.offsetTop+"px"}},this.getOffsetParent=function(){return this._opts.offsetParent||(this._containSelf?this._container:this._container.offsetParent)||document.body},this.renderFixedHeight=function(){var t=this.getOffsetParent();if(t){t!=this._offsetParent&&(this._removeScrollEvt&&this._removeScrollEvt(),this._offsetParent=t,this._removeScrollEvt=$.onEvent(t,"scroll",this,"needsRender"));var e=this._renderedDataSource,i=e.getKey(),s=e.length;if(!s||this.updateRenderOpts()){var r=this._cellsByID;if(this._cellsByID={},s)for(var o=(this._isTiled,this._renderOpts),n=o.start;n<o.end;++n){var h=e.getItemForIndex(n);if(!h)break;var l=h[i],a=r[l];a?(delete r[l],a.render()):a=this._createCell(h),this.positionCell(a,n),this._cellsByID[l]=a}if(this._opts.preserveCells)for(var l in r){var a=r[l];e.getItemForID(l)?this._cellsByID[l]=a:a.remove()}else for(var l in r)r[l].remove()}}}});',
pre:!0},"../../node_modules/squill/Window.js":{path:"../../node_modules/squill/Window.js",friendlyPath:".Window",directory:"../../node_modules/squill",filename:"Window.js",src:'jsio("import lib.PubSub"),jsio("import std.uri"),jsio("from util.browser import $");var UNIQUE_ID="__squill__window_id",Window=exports=Class(lib.PubSub,function(){this.init=function(i){this._win=i||window,this._location=new std.uri(this._win.location),this._dim=$(this._win),$.onEvent(this._win,"resize",this,"onViewportChange"),$.onEvent(this._win,"scroll",this,"onViewportChange")},this.onViewportChange=function(i){this._dim=$(this._win),this.publish("ViewportChange",i,this._dim)},this.getDim=this.getViewport=function(){return this._dim},this.query=function(i){return this._location.query(i)},this.hash=function(i){return this._location.query(i)},this.center=function(i,t){t=merge(t,{subscribe:!0});var n="width"in t?t.width:i.offsetWidth,s="height"in t?t.height:i.offsetHeight;i.style.left=(this._dim.width-n)/2+"px",i.style.top=(this._dim.height-s)/2+"px",t.subscribe&&this.subscribe("ViewportChange",this,"center",i,merge({subscribe:!1},t))}}),gWin={};exports.get=function(i){return i||(i=window),i[UNIQUE_ID]?gWin[i[UNIQUE_ID]]:gWin[i[UNIQUE_ID]]=new Window(i)};',pre:!0},"../../node_modules/squill/models/DataSource.js":{path:"../../node_modules/squill/models/DataSource.js",friendlyPath:".models.DataSource",directory:"../../node_modules/squill/models",filename:"DataSource.js",src:'jsio("import lib.Callback"),jsio("import .BasicDataSource as BasicDataSource");var DataSource=exports=Class(BasicDataSource,function(t){var e={key:"id"};this.init=function(i){this._opts=i=merge(i,e),t(this,"init",[i]),this._byIndex=[],this._byID={},this._ctor=i.ctor,this._reverse=i.reverse,this.length=0,this.onLoad=new lib.Callback,this.setSorter(i.sorter),this.setPersistence(i.persistence),this._changeDataSave=!1,this._changeData={updated:[],updatedHash:{},removed:[],removedHash:{}}},this.setPersistence=function(t){this._persistence=t,t&&(this.onLoad.clear(),t.load(this,this.onLoad.chain()))},this._saveChanges=function(t,e){this._changeDataSave&&!this._changeData[t+"Hash"][e]&&(this._changeData[t+"Hash"][e]=!0,this._changeData[t].push(e))},this.getFilteredDataSource=function(t){var e=new DataSource(this._opts);return this.forEach(function(i){t(i)&&e.add(i)}),this.subscribe("Update",function(i,s){t(s)?e.add(s):e.remove(s)}),this.subscribe("Remove",function(t,i){e.remove(i)}),e},this.signalUpdate=function(t,e,i){if(void 0!==e[this.key])switch(t){case"UPDATE":this._saveChanges("updated",e[this.key]),this.publish("Update",e[this.key],e);break;case"REMOVE":this._saveChanges("removed",e[this.key]),this.publish("Remove",i,e)}};var i=function(){return this._sortKey};this.updated=this.add=function(t){if(isArray(t)){for(var e=[],s=0,n=t.length;n>s;++s)if(t[s]){var h=this.add(t[s]);h&&e.push(h)}return e}var r=t[this.key];if(null!=r){var a=null;if(this._byID[r]){for(var o,s=0;o=this._byIndex[s];++s)if(o[this.key]==r){"function"==typeof o.update?(o.update(t),t=o):a=s;break}}else a=this.length++;return null!==a&&(!this._ctor||t instanceof this._ctor||(t=new this._ctor(t)),this._byIndex[a]=t),this._byID[r]=t,this.signalUpdate("UPDATE",t),this._sorter&&(t._sortKey=this._sorter(t),t.toString=i),t}},this.remove=function(t){if("object"==typeof t&&(t=t[this.key]),null!=t&&this._byID[t]){this.signalUpdate("REMOVE",this._byID[t],t),delete this._byID[t];for(var e,i=0;e=this._byIndex[i];++i)if(e[this.key]==t)return--this.length,this._byIndex.splice(i,1)[0]}},this.keepOnly=function(t){this.compare(t,function(t,e,i){i||t.remove(e)})},this.clear=function(){var t=this._byIndex;this._byIndex=[],this._byID={},this.length=0;for(var e,i=0;e=t[i];++i)this.signalUpdate("REMOVE",e,e[this.key])},this.getCount=function(){return this.length},this.setSorter=function(t){if(this._sorter=t,t)for(var e,s=0;e=this._byIndex[s];++s)e._sortKey=t(e),e.toString=i;return this.sort(),this},this.getIDs=function(){return this._byIndex.map(function(t){return t[this.key]},this)},this.contains=function(t){return!!this._byID[t]},this.getKey=function(){return this.key},this.get=this.getItemForID=function(t){return this._byID[t]||null},this.indexOf=function(t){return this._byIndex.indexOf(t)},this.getItemForIndex=function(t){return this._byIndex[t]},this.sort=function(){this._byIndex.sort(),this._reverse&&this._byIndex.reverse()},this.forEach=this.each=function(t,e){for(var i=0;i<this.length;++i)if(t.call(e,this._byIndex[i],i))return},this.toJSON=function(){return{key:this.key,items:this._byIndex}},this.fromJSON=function(t){this.clear();this.key=t.key;this.add(t.items)},this.toArray=function(){return this._byIndex.slice(0)},this.beginChanges=function(){this._changeDataSave=!0,this._changeData={updated:[],updatedHash:{},removed:[],removedHash:{}}},this.saveChanges=function(){if(this._changeDataSave=!1,this._persistence){var t,e,i=this._changeData;if(this._persistence.remove(i.removed),i.updated.length){var s=[];for(t=0,e=i.updated.length;e>t;t++)s.push(this._byID[i.updated[t]]);this._persistence.update(s)}this._persistence.commit()}},this.load=function(t){this._persistence&&this._persistence.load(this,function(e){e&&logger.log("error loading",JSON.stringify(e)),t&&t(e)})},this.save=function(){this._persistence&&this._persistence.save(this)},this.compare=function(t,e){var i=this.key,s={};if(isArray(t))for(var n=0,h=t.length;h>n;++n)s[t[n][i]]=t[n];else for(var r in t)s[r]=t[r];for(var a,o=this._byIndex.slice(0),n=0;a=o[n];++n){var r=a[i];e.call(this,this,a,s[r]),delete s[r]}for(var r in s)e.call(this,this,null,s[r])},this.filter=function(t){var e,i,s,n,h=new DataSource({key:this.key}),r=this.length;for(h.key=this.key,n=0;r>n;++n){i=this._byIndex[n],s=!0;for(e in t)"string"==typeof i[e]&&-1==i[e].toLowerCase().indexOf(t[e])&&(s=!1);s&&h.add(i)}return h}});',pre:!0},"../../node_modules/jsio/packages/lib/Callback.js":{path:"../../node_modules/jsio/packages/lib/Callback.js",friendlyPath:"lib.Callback",directory:"../../node_modules/jsio/packages/lib",filename:"Callback.js",src:'exports=Class(function(){this._fired=!1,this._id=0,this._pending=null,this.init=function(){this._run=[]},this.hasFired=this.fired=function(){return this._fired},this.reset=function(){this._args=[],this._fired=!1},this.clear=function(){this.reset(),this._run=[],this._pending=null,this._stat=null},this.forward=function(i){this.run.apply(this,i)},this.run=function(i,t){var s=t?bind.apply(this,arguments):i;return s&&(this._fired?s.apply(this,this._args):this._run.push(s)),this},this.runOrTimeout=function(i,t,s){if(i||t)if(this._fired)i.apply(this,this._args);else{var n=bind(this,function(){clearTimeout(r),i.apply(this,this._args)});this.run(n);var r=setTimeout(bind(this,function(){for(var i=0,s=this._run.length;s>i;++i)if(this._run[i]==n){this._run.splice(i,1);break}t()}),s)}},this.fire=function(){if(!this._fired){this._fired=!0;var i=this._run;this._args=arguments;for(var t=0,s=i.length;s>t;++t)i[t]&&i[t].apply(this,arguments)}},this.chain=function(i){return this._pending||(this._pending={}),void 0===i&&(i=this._id++),this._pending[i]=!0,this.reset(),bind(this,"_deferred",i)},this._deferred=function(i){if(this._stat||(this._stat={}),!this._stat.hasOwnProperty(i)){this._stat[i]=Array.prototype.slice.call(arguments,1);var t=this._pending;delete t[i];for(var i in t)if(t.hasOwnProperty(i))return;this.fire(this._stat)}}});',pre:!0},"../../node_modules/squill/models/BasicDataSource.js":{path:"../../node_modules/squill/models/BasicDataSource.js",friendlyPath:".BasicDataSource",directory:"../../node_modules/squill/models",filename:"BasicDataSource.js",src:'jsio("import lib.PubSub as PubSub");var BasicDataSource=exports=Class(PubSub,function(t){this.init=function(i){t(this,"init",arguments),this.key=this._key=i.key,this._channel=i.channel,this._hasRemote=i.hasRemote},this.getKey=function(){return this._key}});',pre:!0},"../../node_modules/squill/Selection.js":{path:"../../node_modules/squill/Selection.js",friendlyPath:".Selection",directory:"../../node_modules/squill",filename:"Selection.js",src:'jsio("import lib.PubSub"),exports=Class(lib.PubSub,function(){this.init=function(t){this._parent=t.parent,this._type=t.type||!1,this._selection=t.selectionStore||new exports.LocalStore,this._maxSelections=t.maxSelections||1,this._currentSelectionCount=0,this._lastSelected=null},this.getType=function(){return this._type},this.isSelected=function(t){return"object"==typeof t&&(t=t[this._parent.getDataSource().key]),this._selection.isSelected(t)},this.toggle=function(t){this._setSelected(t,!this.isSelected(t[this._parent.getDataSource().key]))},this.select=function(t){(this._currentSelectionCount<this._maxSelections||"single"==this._type)&&this._setSelected(t,!0)},this.deselect=function(t){this._setSelected(t,!1)},this.clear=this.deselectAll=function(){this._selection.deselectAll(),this._currentSelectionCount=0},this.get=function(){return 1==this._maxSelections?Object.keys(this._selection.get())[0]:Object.keys(this._selection.get())},this.getSelectionCount=function(){return this._currentSelectionCount},this._setSelected=function(t,e){if(t){var i=this._parent.getDataSource(),s=i.key;if("string"!=typeof t||(t=i.get(t))){var n=t[s];if(this._selection.isSelected(n)!=e){if(e){if(this._lastSelected&&"single"==this._type){var c=this._lastSelected[s];this._selection.deselect(c),this._currentSelectionCount--,this.publish("Deselect",this._lastSelected,c)}this._lastSelected=t,this._selection.select(n),this._currentSelectionCount++}else this._selection.deselect(n),this._currentSelectionCount--;this.publish(e?"Select":"Deselect",t,n)}}}}}),exports.LocalStore=Class(function(){this.init=function(){this._store={}},this.get=function(){return merge({},this._store)},this.select=function(t){this._store[t]=!0},this.deselect=function(t){delete this._store[t]},this.deselectAll=function(t){this._store={}},this.isSelected=function(t){if(void 0!==t)return!!this._store[t];for(var e in this._store)return!0;return!1}});',pre:!0},"../../node_modules/squill/TextButton.js":{path:"../../node_modules/squill/TextButton.js",friendlyPath:".TextButton",directory:"../../node_modules/squill",filename:"TextButton.js",src:'jsio("import .Button, .Widget"),jsio("from util.browser import $");var TextButton=exports=Class(Button,function(t){this._type="text-button",this.buildWidget=function(){var t=this._el;$.setText(t,this.getI18n("label")||this.getI18n("text")),this.initMouseEvents(t),this.initKeyEvents(t)},this.setLabel=function(t){this._opts.label=t,this._el&&$.setText(this._el,t)}});Widget.register(TextButton,"TextButton");',pre:!0},"../../node_modules/squill/Button.js":{path:"../../node_modules/squill/Button.js",friendlyPath:".Button",directory:"../../node_modules/squill",filename:"Button.js",src:'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .hint as hint");var Button=exports=Class(Widget,function(t){this._css="btn",this._type="button",this.init=function(i){i=merge(i,{tag:"button",isEnabled:!0}),this._isEnabled=i.isEnabled,t(this,"init",[i]),this._hint=i.hint},this.create=function(){this._opts.style=JS.merge(this._opts.style,{whiteSpace:"nowrap",display:"block"}),t(this,"create",arguments)},this.buildWidget=function(){var t=this._el;this.initMouseEvents(t),this.initKeyEvents(t),t.style.userSelect="none",t.style.MozUserSelect="none",t.style.KhtmlUserSelect="none",t.unselectable="on"},this._setHintTimeout=function(t){this._hint&&(this._hintTimeout&&clearTimeout(this._hintTimeout),this._hintTimeout=setTimeout(bind(this,function(){hint.show(t.pageX+12,t.pageY+14,this._hint)}),300))},this.onMouseOver=function(t){this._setHintTimeout(t)},this.onMouseMove=function(t){this._setHintTimeout(t)},this.onMouseOut=function(t){hint.hide(),this._hintTimeout&&clearTimeout(this._hintTimeout)},this.onClick=function(i){$.stopEvent(i),this._isEnabled&&(this._opts.onClick&&this._opts.onClick(i,this),t(this,"onClick",arguments))},this.captureOnEnter=function(t){t.subscribe("KeyDown",this,"onKeyDown"),t.subscribe("KeyUp",this,"onKeyUp")},this.onKeyDown=function(t){13==t.keyCode&&($.stopEvent(t),this.onMouseDown())},this.onKeyUp=function(t){13==t.keyCode&&($.stopEvent(t),this.onMouseUp(),this.onClick(t))},this.show=function(){return this.onBeforeShow(),this.getElement().style.display="inline-block",this.onShow(),this},this.blur=function(){this._el&&this._el.blur()},this.focus=function(){this._el&&this._el.focus()},this.setEnabled=function(t){this._isEnabled!=t&&(this._isEnabled=t,t?$.removeClass(this._el,"disabled"):$.addClass(this._el,"disabled"))}});',pre:!0},"../../node_modules/squill/hint.js":{path:"../../node_modules/squill/hint.js",friendlyPath:".hint",directory:"../../node_modules/squill",filename:"hint.js",src:'jsio("from util.browser import $");var hint=$({parent:document.body,className:"hint"});exports.show=function(t,e,i){hint.innerHTML=i,hint.style.left=t+"px",hint.style.top=e+"px",hint.style.display="block",console.log(i),t+hint.offsetWidth>=document.width&&(hint.style.left=t-hint.offsetWidth+"px")},exports.hide=function(){hint=hint||$({parent:document.body,className:"graphHint"}),hint.style.display="none"};var setHintTimeout=function(t){t.target.hintTimeout&&clearTimeout(t.target.hintTimeout),t.target.hintTimeout=setTimeout(bind(this,function(){exports.show(t.pageX+12,t.pageY+14,t.target.hintText)}),300)};exports.add=function(t,e){t.hintText=e,$.onEvent(t,"mouseover",setHintTimeout),$.onEvent(t,"mousemove",setHintTimeout),$.onEvent(t,"mouseout",function(t){exports.hide(),t.target.hintTimeout&&clearTimeout(t.target.hintTimeout)})};',pre:!0},"../../node_modules/squill/TextInput.js":{path:"../../node_modules/squill/TextInput.js",friendlyPath:".TextInput",directory:"../../node_modules/squill",filename:"TextInput.js",src:'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import squill.models.bindings as bindings");var TextInput=exports=Class(Widget,function(t){this._type="text",this._css="textInput",this.init=function(i){i=merge(i,{name:"",value:"",multiline:!1}),this._def={children:[{tag:i.multiline?"textarea":"input",id:"_input",attrs:{type:"text",value:i.value,name:i.name},style:merge(i.textStyle,{MozBoxSizing:"border-box",WebkitBoxSizing:"border-box",MsBoxSizing:"border-box",boxSizing:"border-box"})}],style:{position:"relative"}},i.prefixLabel&&this._def.children.unshift({id:"_label",text:i.label}),t(this,"init",[i])},this.buildWidget=function(){var t=this._el;this._opts.type;"ontouchstart"in this._el&&(this._overlay=$({parent:this._el,attrs:{noCapture:!0},style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:1}}),this._overlay.addEventListener("click",bind(this,function(){$.hide(this._overlay),this._input.focus()}),!0));var i=this._opts;if(!i.prefixLabel||i.placeholder){var e=this.getI18n("label");null===this._input.getAttribute("placeholder")?this._input.setAttribute("placeholder",i.placeholder||e):this._placeholder=$.create({tag:"button",text:e,style:{position:"absolute"},parent:t})}this.initMouseEvents(t),this.initFocusEvents(this._input),this.initKeyEvents(this._input)},this.focus=function(){this._input.focus()},this.blur=function(){this._input.blur()},this.getInputElement=function(){return this._input},this.setName=function(i){t(this,"setName",arguments),this._input&&(this._input.name=i)},this.setData=this.setValue=function(t){void 0===t&&(t=""),this.saveSelection(),this._value=this._input.value=t,this.restoreSelection()},this.getValue=function(){return this._input.value},this.onKeyDown=function(){t(this,"onKeyDown",arguments),this._placeholder&&$.hide(this._placeholder)},this.onKeyUp=function(){t(this,"onKeyUp",arguments),this.checkLabel(),this.checkValue()},this.onMouseDown=function(i){t(this,"onMouseDown",arguments),i.stopPropagation()},this.onKeyPress=function(i){t(this,"onKeyPress",arguments),13==i.keyCode&&this.publish("EnterPressed"),this.checkValue()},this.onBlur=function(){t(this,"onBlur"),this.checkLabel(),this._overlay&&$.show(this._overlay)},this.isValid=function(){return this._isValid},this.checkValue=function(){var t=this._input.value,i=this._opts.formatter;if(i&&(t=i(t)),t==INVALID_VALUE)return this._isValid=!1,void $.addClass(this._el,"invalid");if(this._isValid=!0,$.removeClass(this._el,"invalid"),this._value!=t){this._value=t;var e=this._input;t!=e.value&&(this.saveSelection(),e.value=t,this.restoreSelection()),this.publish("change",this._value),this.publish("ValueChange",this._value)}},this.saveSelection=function(){this._selection={start:this._input.selectionStart,end:this._input.selectionEnd}},this.restoreSelection=function(){var t=this._input;this._isFocused&&(t.selectionStart=this._selection.start,t.selectionEnd=this._selection.end)},this.checkLabel=function(){this._placeholder&&/^\\s*$/.test(this._input.value)&&$.show(this._placeholder)},this.onClick=function(){t(this,"onClick")},this.setEnabled=function(t){this._isEnabled=t,t?(delete this._input.disabled,this.removeClass("disabled")):(this._input.disabled=!0,this.addClass("disabled"))},this.isEnabled=function(){return this._isEnabled},this.disable=function(){this.setEnabled(!1)},this.enable=function(){this.setEnabled(!0)}}),INVALID_VALUE=exports.INVALID_VALUE={};Widget.register(TextInput,"TextInput");',pre:!0},"../../node_modules/squill/TextArea.js":{path:"../../node_modules/squill/TextArea.js",friendlyPath:".TextArea",directory:"../../node_modules/squill",filename:"TextArea.js",src:'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .TextInput");var TextArea=exports=Class(TextInput,function(t){this._tag="textarea"});Widget.register(TextArea,"TextArea");',pre:!0},"../../node_modules/squill/Scroller.js":{path:"../../node_modules/squill/Scroller.js",friendlyPath:".Scroller",directory:"../../node_modules/squill",filename:"Scroller.js",src:'jsio("import .Drag"),jsio("import .Widget"),jsio("import .transforms"),jsio("from util.browser import $"),exports=Class(Widget,function(t){this._css="scroller",this.init=function(s){s=merge(s,{momentum:!0}),this._scrollTop=0,this._lastDelta={diff:0,when:0,duration:0},this._hasMomentum=s.momentum,t(this,"init",[s])},this.buildContent=function(){var s=this._el;if($.style(s,{height:"100%"}),this._scrollPane=$({parent:s,className:"squill-scrollPane",minHeight:"100%"}),"ontouchstart"in s?(s.addEventListener("touchstart",bind(this,"onTouchStart"),!0),s.addEventListener("mousedown",this,"start"),this.initDragEvents(),this._el.style.overflow="hidden",transforms.setTop(this._scrollPane,0)):this._el.style.overflow="auto",this._def){var i=this._def;this._def=null,this.buildChildren(merge({el:this._scrollPane},i))}return t(this,"buildContent",arguments)},this.getScrollTop=function(){return this._scrollTop},this.getContainer=this.getScrollPane=function(){return this._scrollPane},this.onTouchStart=function(){this._momentum&&clearInterval(this._momentum)},this.onDragStart=function(t,s){this._height=this._scrollPane.offsetHeight-this._el.offsetHeight,this._lastDelta.when=+new Date,this._momentum&&clearInterval(this._momentum)},this.onDrag=function(t,s,i){var e=+new Date,o=this._lastDelta;o.diff=i.y,o.duration=o.when&&e-o.when||0,o.when=e,this.scrollTo(this._scrollTop+i.y)},this.scrollTo=function(t,s){this._scrollTop=t,this._scrollTop<-this._height&&(this._scrollTop=-this._height),this._scrollTop>0&&(this._scrollTop=0),this._el.setAttribute("squill-scroller-top",-this._scrollTop);var i=bind(this,function(){if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("scroll",!0,!1),this._el.dispatchEvent(t)}});s?transforms.move(this._scrollPane,0,this._scrollTop,"0.5s ease-in-out",i):(transforms.move(this._scrollPane,0,this._scrollTop),i())},this.onDragStop=function(t,s){if($.stopEvent(s),this._hasMomentum&&0!=this._lastDelta.duration){var i=this._lastDelta,e=i.diff/i.duration,o=(i.when,i.when);this._momentum=setInterval(bind(this,function(){var t=+new Date,s=t-o,i=e*s;this.scrollTo(this._scrollTop+i),e*=.95,Math.abs(e)<.01&&(clearTimeout(this._momentum),this._momentum=null),o=t}),10)}}});',pre:!0},"../../node_modules/squill/transforms.js":{path:"../../node_modules/squill/transforms.js",friendlyPath:".transforms",directory:"../../node_modules/squill",filename:"transforms.js",src:'jsio("from util.browser import $");var vendor=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",has3d="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,hasTransform=vendor+"Transform"in document.documentElement.style,translateStart="translate"+(has3d?"3d(":"("),translateEnd=has3d?",0)":")";hasTransform?(exports.setLeft=function(t,n){t.style[vendor+"Transform"]=translateStart+n+"px,0"+translateEnd},exports.setTop=function(t,n){t.style[vendor+"Transform"]=translateStart+"0,"+n+"px"+translateEnd}):(exports.setLeft=function(t,n){t.style.left=n+"px"},exports.setTop=function(t,n){t.style.top=n+"px"}),exports.onTransitionEnd=function(t,n){var r=!1,o=function(){if(!r){r=!0;for(var t,o=0;t=e[o];++o)t();n()}},e=[$.onEvent(t,"webkitTransitionEnd",o),$.onEvent(t,"transitionend",o),$.onEvent(t,"oTransitionEnd",o)]},exports.setTransition=function(t,n,r){if(n){var o=t.style[vendor+"Transition"];exports.onTransitionEnd(t,function(){t.style[vendor+"Transition"]=o,r&&r()}),t.style[vendor+"Transition"]="-"+vendor+"-transform "+n}else t.style[vendor+"Transition"]="none"},exports.rotate=function(t,n,r,o){return hasTransform?(exports.setTransition(t,r,o),t.style[vendor+"Transform"]="rotate("+n+")",void(o&&!r&&o())):void(o&&o())},exports.move=function(t,n,r,o,e){return hasTransform?(exports.setTransition(t,o,e),t.style[vendor+"Transform"]=translateStart+n+"px,"+r+"px"+translateEnd,void(e&&!o&&e())):void(e&&e())},exports.hasTransform=hasTransform;',pre:!0},"../../node_modules/squill/Canvas.js":{path:"../../node_modules/squill/Canvas.js",friendlyPath:".Canvas",directory:"../../node_modules/squill",filename:"Canvas.js",src:'jsio("from util.browser import $"),jsio("import .Widget");var Canvas=exports=Class(Widget,function(t){this._css="cnvs",this._type="canvas",this.init=function(i){i=merge(i,{tag:"canvas"}),this._isEnabled=i.isEnabled,t(this,"init",[i])},this.create=function(){t(this,"create",arguments)},this.buildWidget=function(){var t=this._el;t.width=this._opts.width,t.height=this._opts.height,this._opts.color&&(t.style.backgroundColor=this._opts.color),this.initMouseEvents(t),this.initKeyEvents(t)}});',pre:!0},"../../node_modules/squill/CheckBox.js":{path:"../../node_modules/squill/CheckBox.js",friendlyPath:".CheckBox",directory:"../../node_modules/squill",filename:"CheckBox.js",src:'jsio("import .Widget"),jsio("from util.browser import $");var CheckBox=exports=Class(Widget,function(t){this._css="checkbox",this._def={tag:"label",children:[{id:"checkbox",tag:"input",attrs:{type:"checkbox"}},{tag:"span",id:"label",text:""}]},this.buildWidget=function(){this.setLabel(this._opts.label||""),this._opts.name&&this.setName(this._opts.name),this._opts.value&&this.setValue(this._opts.value),this.initMouseEvents(this.checkbox),$.onEvent(this.checkbox,"change",this,"_onCheck"),this._opts.__result&&this._opts.__result.addSubscription(this,"Select",this._opts.id)},this._onCheck=function(){this.publish("Check",this.isChecked()),this.emit("change",this.isChecked())},this.setLabel=function(t){$.setText(this.label,t)},this.setName=function(t){this.checkbox.name=t},this.setData=this.setValue=function(t){this.checkbox.checked=!!t},this.isChecked=function(){return this.checkbox.checked},this.setChecked=function(t){this.checkbox.checked=t},this.getValue=function(){return this.isChecked()?this.checkbox.value:null}});',pre:!0},"../../node_modules/squill/Menu.js":{path:"../../node_modules/squill/Menu.js",friendlyPath:".Menu",directory:"../../node_modules/squill",filename:"Menu.js",src:'function trapIframes(){_trappedFrames.length&&untrapIframes(),_trappedFrames=Array.prototype.map.call(document.getElementsByTagName("iframe"),function(e){var t={el:e,set:e.style.pointerEvents};return e.style.pointerEvents="none",t})}function untrapIframes(){_trappedFrames.forEach(function(e){e.el.style.pointerEvents=e.set})}jsio("import lib.PubSub"),jsio("import .Widget"),jsio("import .Delegate"),jsio("from util.browser import $");var Menu=exports=Class(Widget,function(e){this._css="menu",this._def={children:[{id:"container"}]},this.delegate=new Delegate(function(e){e.call=function(e,t){var n=e.controller.delegate;n.call.apply(n,[e.controller].concat(Array.prototype.slice.call(arguments,1)))}}),this.getContainer=function(){return this.container},this.onBeforeShow=function(){},this.onShow=function(){},this.onBeforeHide=function(){},this.onHide=function(){},this.toggle=function(){this._isShowing?this.hide():this.show()},this.show=function(){this._isShowing=!0;var e=this._el,t=bind(this,function(t){for(var n=t.target;n;){if(n==e)return!0;if(/squill-checkbox/.test(n.className))return!1;n=n.parentNode}return t.preventDefault&&t.preventDefault(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,!0}),n=bind(this,function(e){t(e)&&(this.hide(),untrapIframes(),document.body.removeEventListener("mousedown",t,!0),document.body.removeEventListener("mouseup",t,!0),document.body.removeEventListener("click",n,!0))});trapIframes(),document.body.addEventListener("mousedown",t,!0),document.body.addEventListener("mouseup",t,!0),document.body.addEventListener("click",n,!0),$.show(e),this.emit("open"),Menu.emit("open",this)},this.hide=function(){this._isShowing=!1,$.hide(this._el),this.emit("close"),Menu.emit("close",this)}}),subs=new lib.PubSub;Menu.emit=bind(subs,"emit"),Menu.on=bind(subs,"on"),Menu.removeListener=bind(subs,"removeListener");var _trappedFrames=[];',pre:!0},"../../node_modules/squill/Slider.js":{path:"../../node_modules/squill/Slider.js",friendlyPath:".Slider",directory:"../../node_modules/squill",filename:"Slider.js",src:'jsio("from util.browser import $"),jsio("import .Widget");var Slider=exports=Class(Widget,function(t){this._css="rng",this._type="range",this.init=function(i){this._width=i.width||100,this._padding=12,this._hover=!1,this._fillColor=i.fillColor||"#000000",this._lineColor=i.lineColor||"#FFFFFF",this._def={children:[{id:i.id+"Canvas",tag:"canvas",attrs:{width:this._width,height:2*this._padding}}]},t(this,"init",[i])},this._render=function(){var t,i,s=this._width,h=this._padding,e=this._ctx;e.clearRect(0,0,s,2*h),e.lineCap="round",e.beginPath(),e.arc(h+2,h,2,.5*Math.PI,1.5*Math.PI,!1),e.arc(s-h-2,h,2,1.5*Math.PI,.5*Math.PI,!1),e.closePath(),e.lineWidth=1,e.strokeStyle=this._lineColor,e.stroke(),e.fillStyle=this._fillColor,e.fill(),e.save(),this._hover&&(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=10,e.shadowColor="#0099FF"),i=~~((s-2*h)*(this.value-this.min)/(this.max-this.min)),e.beginPath(),e.arc(h+i,h,5,0,2*Math.PI,!1),e.closePath(),t=e.createRadialGradient(h-1+i,h-1,0,h+i,h,4),t.addColorStop(0,"#FFFFFF"),t.addColorStop(1,"#707070"),e.fillStyle=t,e.fill(),e.restore()},this.buildWidget=function(){var t=this._el;canvas=t.firstChild,t.slider=this,$.onEvent(canvas,"mouseout",this,"_onMouseOut"),$.onEvent(canvas,"mousedown",this,"_onMouseDown"),$.onEvent(canvas,"mouseup",this,"_onMouseUp"),$.onEvent(canvas,"mousemove",this,"_onMouseMove"),this.min=this._opts.min||0,this.max=this._opts.max||100,this.step=this._opts.step||1,this.value=this._opts.value||0,this._mouseDown=!1,this._checkRange(),this._ctx=canvas.getContext("2d"),this._render()},this.setValue=function(t){this.value=t,this._render()},this._onChange=function(){this.publish("Change",this.value)},this._checkRange=function(){this.value<this.min&&(this.value=this.min),this.value>this.max&&(this.value=this.max)},this._checkMouse=function(t){var i,s=t.offsetX,h=t.offsetY,e=this._width,o=this._padding,n=this._hover;this._mouseDown?s>o&&h>o-5&&e-o>s&&o+5>h&&(i=(t.offsetX-o)/(e-2*o)*(this.max-this.min),i=this.min+Math.round(i/this.step)*this.step,this.value=i,this._checkRange(),this._render(),this._onChange()):(h>o-5&&o+5>h?(v=o+~~((e-2*o)*(this.value-this.min)/(this.max-this.min)),this._hover=s>v-5&&h<v+5):this._hover=!1,this._hover!==n&&this._render())},this._onMouseOut=function(t){this._mouseDown=!1,this._hover=!1,this._render()},this._onMouseDown=function(t){this._mouseDown=!0,this._checkMouse(t)},this._onMouseUp=function(t){this._mouseDown=!1},this._onMouseMove=function(t){this._checkMouse(t)}});',pre:!0},"../../node_modules/squill/Color.js":{path:"../../node_modules/squill/Color.js",friendlyPath:".Color",directory:"../../node_modules/squill",filename:"Color.js",src:'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .jscolor.jscolor as jscolor");var Color=exports=Class(Widget,function(t){this._css="clr",this._type="text",this.init=function(i){i=merge(i,{tag:"input"}),this._isEnabled=i.isEnabled,t(this,"init",[i])},this.buildWidget=function(){var t=this._el;$.addClass(t,"squill-color"),t.min=this._opts.min||0,t.max=this._opts.max||100,t.step=this._opts.step||1,t.value=this._opts.value||0,t.onchange=bind(this,this._onChange),jscolor.bind(t)},this.setValue=function(t){t&&("#"!==t[0]&&(t="#"+t),this._el.style.backgroundColor=t,t=t.substr(1,6)),this._el.value=t},this.getValue=function(){return this._el.value},this._onChange=function(){this.publish("Change",this._el.value)}});',pre:!0},"../../node_modules/squill/VerticalCenter.js":{path:"../../node_modules/squill/VerticalCenter.js",friendlyPath:".VerticalCenter",directory:"../../node_modules/squill",filename:"VerticalCenter.js",src:'jsio("import .Widget"),jsio("from util.browser import $"),exports=Class(Widget,function(){this._def={tag:"table",style:merge({height:"100%",width:"100%"},def.style),attrs:{cellpadding:0,cellspacing:0},children:[$({tag:"tbody",children:[$({tag:"tr",children:[$({id:"contentPane",tag:"td",attrs:{valign:"middle"},style:{verticalAlign:"middle"}})]})]})]},this.addElement=function(){this.contentPane.appendChild(el)}});',pre:!0},"../../node_modules/squill/TreeList.js":{path:"../../node_modules/squill/TreeList.js",friendlyPath:".TreeList",directory:"../../node_modules/squill",filename:"TreeList.js",src:'jsio("from util.browser import $"),jsio("import .Widget");var elementIDPrefix=0,TreeList=exports=Class(Widget,function(e){var t={key:"id",label:"title",wrapperId:"browser",contentId:"contentWrapper"};this.init=function(i){i=i||{},i=merge(i,t),this._initClasses(i),this._key=i.key,this._label=i.label,this._wrapperId=i.wrapperId,this._contentId=i.contentId,this._leaveWidth=i.leaveWidth||600,elementIDPrefix++,this._elementIDPrefix="menuItem"+elementIDPrefix+"_",i.dataSource?this.setDataSource(i.dataSource):this._dataSource=null,this._def={id:this._wrapperId,className:"browser",children:[{id:this._contentId,className:"contentWrapper",children:[]}]},this._root=null,this._itemByKey={},e(this,"init",arguments)},this._initClasses=function(e){this._classNames={nodeWrapper:e.nodeWrapper||"browserNodeWrapper",nodeWrapperHidden:e.nodeWrapperHidden||"browserNodeWrapperHidden",node:e.node||"browserNode",nodeChildren:e.nodeChildren||"children",nodeActive:e.nodeActive||"active",nodeActiveChild:e.nodeActiveChild||"browserNodeActiveChild"}},this._clearItem=function(e){var t,i,s,n;if(e.children)for(i=e.children;i.length;)this._clearItem(i.pop());if(e.parent){for(t=e.parent,i=t.children,s=0,n=i.length;n>s;s++)if(i[s]===e){i.splice(s,1);break}!i.length&&t.group&&($.remove(t.group.parentNode),$.remove(t.group),delete t.group)}$.remove(e.node),e.group&&$.remove(e.group)},this._createMenuId=function(e){var t=this._menuId;return e&&this._menuId++,this._elementIDPrefix+t},this._createGroup=function(e){var t=this._createMenuId(!0),i=$({parent:$({parent:$.id(this._contentId),id:t,className:e?this._classNames.nodeWrapper:this._classNames.nodeWrapperHidden}),className:this._classNames.node});return i.menuId=t,i},this._createItem=function(e,t){var i=this._createMenuId(!0);e.node=$({parent:t,id:i,tag:"a",text:e[this._label]}),$.onEvent(i,"click",this,"onClick",e)},this.buildWidget=function(){this._menuId=0,this._menuById=[],this._menuStack=[],this._menuActiveItem=!1,null!==this._dataSource&&this._dataSource.each(bind(this,this.onCreateItem))},this._removeFromStack=function(e){for(var t=this._menuStack,i=null;t.length&&t[t.length-1].depth>=e;)i=t.pop(),$.removeClass(i.node.id,this._classNames.nodeActive),$.removeClass(i.node.id,this._classNames.nodeActiveChild),i.group&&($.addClass(i.group.menuId,this._classNames.nodeWrapperHidden),$.removeClass(i.group.menuId,this._classNames.nodeWrapper));return i},this.applyNodeStyle=function(e){e.children&&e.children.length?$.addClass(e.node,this._classNames.nodeChildren):$.removeClass(e.node,this._classNames.nodeChildren),e===this._menuActiveItem?$.addClass(e.node,this._classNames.nodeActive):$.removeClass(e.node,this._classNames.nodeActive),void 0!==e.removeCustomClass&&e.removeCustomClass&&$.removeClass(e.node,e.removeCustomClass),void 0!==e.customClass&&e.customClass&&($.removeClass(e.node,e.customClass),$.addClass(e.node,e.customClass))},this._addToStack=function(e){if(this._menuStack.push(e),this.applyNodeStyle(e),e.children&&e.children.length){if(!e.group){var t,i,s;for(e.children.sort(),e.group=this._createGroup(!0),i=0,s=e.children.length;s>i;i++)t=e.children[i],this._createItem(t,e.group),this.publish("DisplayItem",t.data,t),this.applyNodeStyle(t)}$.addClass(e.group.menuId,this._classNames.nodeWrapper),$.removeClass(e.group.menuId,this._classNames.nodeWrapperHidden)}},this.onClick=function(e){var t,i=this._menuStack,s=null;this.publish("SelectItem",e.data,e),this._menuActiveItem&&(s=this._menuActiveItem,this._menuActiveItem=null,this.applyNodeStyle(s),s=null),i.length&&e.depth<=i[i.length-1].depth&&(s=this._removeFromStack(e.depth)),s!==e&&this._addToStack(e),this._menuActiveItem=e,this.applyNodeStyle(e),i.length&&(t=i.length,i[i.length-1].children&&i[i.length-1].children.length&&t++,$.id(this._contentId).style.width=200*t+this._leaveWidth+"px")},this.onUpdateItem=function(e,t){var i,s,n,r,a,h={title:e[this._label],toString:function(){return this.title}};if(this._itemByKey[t])return void(this._itemByKey[t].node&&(this._itemByKey[t].node.innerHTML=e[this._label]));if(null===e.parent||-1===e.parent)null===this._root&&(this._rootGroup=this._createGroup(!0),this._createItem(h,this._rootGroup),this._root=h,h.data=e,h.depth=0,h.parent=null,this.publish("DisplayItem",h.data,h),this.applyNodeStyle(h));else{if(i=this._itemByKey[e.parent[this._key]])if(i.children||(i.children=[]),s=i.children,!this._menuActiveItem||this._menuActiveItem!==i&&this._menuActiveItem.parent!==i)s.push(h);else{for(r=0,a=s.length;a>r;r++)s[r].node&&($.remove(s[r].node),s[r].node=null);for(s.push(h),s.sort(),i.group||(i.group=this._createGroup(!0),$.id(this._contentId).style.width=200*(this._menuStack.length+1)+500+"px"),r=0,a=s.length;a>r;r++)n=s[r],this._createItem(n,i.group),this.publish("DisplayItem",n.data,n),this.applyNodeStyle(n)}h.depth=i.depth+1,h.parent=i}h.data=e,this._itemByKey[t]=h},this.onCreateItem=function(e){this.onUpdateItem(e,e[this._key])},this.onRemoveItem=function(e,t){var i,s,n=this._itemByKey[t];n&&(i=n.parent.children.length<=1,s=e[this._dataSource.parentKey],this._removeFromStack(this._itemByKey[t].depth-1),this._clearItem(this._itemByKey[t]),this._menuActiveItem=!1,delete this._itemByKey[t],this.publish("UnSelectItem"),i&&s&&(n=this._itemByKey[s[this._dataSource.key]],this.publish("DisplayItem",n.data,n),this.applyNodeStyle(n)))},this.showItem=function(e){var t=this.getTreeNode(e);this.publish("DisplayItem",e,t),this.applyNodeStyle(t)},this.setDataSource=function(e){this._dataSource=e,this._dataSource.subscribe("Update",this,this.onUpdateItem),this._dataSource.subscribe("Remove",this,this.onRemoveItem)},this.getPathString=function(e){var t,i,s="",n=this._menuStack;for(e=e||" ",t=0,i=n.length;i>t;t++)""!==s&&(s+=e),s+=n[t].data[this._label];return s},this.getTreeNode=function(e){return this._itemByKey[e[this._dataSource.key]]}});',
pre:!0},"../../node_modules/squill/Graph.js":{path:"../../node_modules/squill/Graph.js",friendlyPath:".Graph",directory:"../../node_modules/squill",filename:"Graph.js",src:'jsio("from util.browser import $"),jsio("import .Widget"),jsio("import .hint as hint");var Graph=exports=Class(Widget,function(t){this._css="cnvs",this._type="canvas",this.init=function(e){params=merge(e,{tag:"canvas"}),t(this,"init",arguments),this.setSettings(e.settings||{}),this._width=e.width||400,this._height=e.height||400,this._rectangles=[],this._data=!1,$.onEvent(this._el,"mousemove",this,this._onMouseMove),$.onEvent(this._el,"mouseout",this,this._onMouseOut)},this._onMouseMove=function(t){for(var e,i=this._rectangles,a=!1,n=i.length;n;)if(e=i[--n],t.offsetX>=e.x1&&t.offsetY>=e.y1&&t.offsetX<=e.x2&&t.offsetY<=e.y2){a=!0;break}a?hint.show(t.pageX+15,t.pageY+15,e.label):hint.hide()},this._onMouseOut=function(t){hint.hide()},this.buildWidget=function(){var t=this._el;this.initMouseEvents(t),this.initKeyEvents(t)},this._renderBackground=function(t){var e=this._el,i=e.width,a=e.height;this._currentWidth=i,this._currentHeight=a,this._settings.fillColor?(t.fillStyle=this._settings.fillColor,t.fillRect(0,0,i,a)):t.clearRect(0,0,i,a)},this._calculateSegments=function(t,e){var i,a,n,l=this._settings,s=0,o=0,r=e.length;for(i=0;r>i;i++)for(item=e[i],o=Math.max(t.measureText(item.title).width,o),o>l.maxLabelSize&&(o=l.maxLabelSize),a=0,n=item.points.length;n>a;a++)s=Math.max(item.points[a],s);for(var h,g=[.5,.25,.2,.125,.1],d=0,f=1;s/(g[d]*f)>10;)d++,d>=g.length&&(d=0,f*=10);return h=Math.ceil(s/(g[d]*f)),{steps:h,step:g[d],max:h*g[d]*f,maxLabel:o+4,factor:f}},this._trimLabel=function(t,e,i){if(e.measureText(i).width>t.maxLabel){for(;e.measureText(i+"...").width>t.maxLabel;)i=i.substr(0,i.length-1);i+="..."}return i},this._renderHorizontalAxis=function(t,e,i){var a,n,l,s,o,r,h,g=this._settings,d=g.valueSpace,f=g.mainPadding,x=this._currentWidth-2*f-d,m=this._currentHeight-2*f-t.maxLabel,c=x/i.length;for(e.strokeStyle=g.barBackground,o=0;2>o;o++)l=d+f+.5+o*x,e.beginPath(),e.moveTo(l,f),e.lineTo(l,f+m),e.stroke();for(e.textAlign="right",e.textBaseline="top",o=0,r=i.length;r>o;o++)l=d+f+o*c,e.save(),e.rotate(Math.PI*-.5),a=this._trimLabel(t,e,i[o].title),e.fillStyle=this._settings.textColor,e.fillText(a,-(f+m+4),l),e.restore(),0===(1&o)&&(e.fillStyle=g.barBackground,e.fillRect(l,f,c,m));for(e.strokeStyle=this._settings.lineColor,e.fillStyle="#000000",n=0,o=m,r=0;o>=0;)a=(r*t.step).toString(10),h=a.indexOf("."),-1!==h&&(h=a.length-h-1,h>n&&(n=h)),o=Math.ceil(o-m/t.steps),r++;for(o=m,r=0;o>=0;){if(l=f+d,s=f+~~o+.5,e.beginPath(),e.moveTo(l,s),e.lineTo(l+x,s),e.stroke(),a=(r*t.step).toString(10),n&&-1===a.indexOf("."))for(a+=".",h=0;n>h;h++)a+="0";e.fillStyle=this._settings.textColor,e.fillText(a,d+f-2,f+o-8),o=Math.ceil(o-m/t.steps),r++}e.textAlign="left",a=g.mainLabel+" x"+t.factor,o=f,r=f+m/2+(e.measureText(a).width+g.itemSize)/2,e.save(),e.rotate(Math.PI*-.5),e.fillStyle=this._settings.textColor,e.fillText(a,-r-g.itemSize,o),e.restore(),r-=e.measureText(a).width,e.beginPath(),e.moveTo(o+7.5,r),e.lineTo(o+7.5,r+26),e.stroke(),e.beginPath(),e.moveTo(o+3.5,r+5.5),e.lineTo(o+7.5,r),e.lineTo(o+11.5,r+5.5),e.stroke()},this._renderVerticalBars=function(t,e,i){var a,n,l,s,o,r,h,g,d,f=this._settings,x=f.valueSpace,m=f.mainPadding,c=this._currentWidth-2*m-x,u=this._currentHeight-2*m-t.maxLabel,b=c/i.length,p=b-2*f.barPadding;for(e.globalAlpha=.9,r=0,h=i.length;h>r;r++)for(s=i[r],o=s.points,d=o.length,a=~~(p/d),g=0;d>g;g++)n=s.points[g]/t.max*u,l=x+m+r*b+f.barPadding,barY=m+u-n,e.fillStyle=f.dataColors[g%f.dataColors.length],e.fillRect(l+g*a,barY,a-1,n);e.globalAlpha=1},this._renderVerticalPoints=function(t,e,i){var a,n,l,s,o,r,h,g,d,f,x=this._settings,m=-1!==x.types.indexOf("points"),c=-1!==x.types.indexOf("lines"),u=-1!==x.types.indexOf("area"),b=x.valueSpace,p=x.mainPadding,_=this._currentWidth-2*p-b,S=this._currentHeight-2*p-t.maxLabel,L=_/i.length,v=L-2*x.barPadding,y=[];for(pointYLast=null,h=0,g=i.length;g>h;h++){for(r=i[h],l=r.points,o=null!==pointYLast,null===pointYLast&&(pointYLast=[]),a=~~(b+p+h*L+x.barPadding+v/2),d=0,f=l.length;f>d;d++)n=~~(p+S-r.points[d]/t.max*S),y[d]||(y[d]=[]),y[d].push({x:a,y:n}),e.strokeStyle=x.dataColors[d%x.dataColors.length],m&&e.strokeRect(a-4.5,n-4.5,10,10),o&&c&&(e.beginPath(),e.moveTo(pointXLast,pointYLast[d]),e.lineTo(a,n),e.stroke()),pointYLast[d]=n;pointXLast=a}if(u){for(e.globalAlpha=.05,h=0,g=y.length;g>h;h++){for(e.beginPath(),e.lineTo(y[h][0].x,p+S),d=0,f=y[h].length;f>d;d++)s=y[h][d],e.lineTo(s.x,s.y);e.lineTo(y[h][f-1].x,p+S),e.closePath(),e.fillStyle=x.dataColors[h%x.dataColors.length],e.fill()}e.globalAlpha=1}},this._renderVerticalAxis=function(t,e,i){var a,n,l,s,o,r,h,g=this._settings,d=g.valueSpace,f=g.mainPadding,x=this._currentWidth-2*f-t.maxLabel,m=this._currentHeight-2*f-d,c=m/i.length;for(e.strokeStyle=g.barBackground,o=0;2>o;o++)s=f+.5+o*m,e.beginPath(),e.moveTo(f+t.maxLabel,s),e.lineTo(f+t.maxLabel+x,s),e.stroke();for(e.textAlign="right",e.textBaseline="top",o=0,r=i.length;r>o;o++)s=f+o*c,a=this._trimLabel(t,e,i[o].title),e.fillStyle=this._settings.textColor,e.fillText(a,f+t.maxLabel-4,s+4),this._rectangles.push({x1:f+t.maxLabel-4-e.measureText(a).width,y1:s+4,x2:f+t.maxLabel-4,y2:s+20,label:i[o].title}),0===(1&o)&&(e.fillStyle=g.barBackground,e.fillRect(f+t.maxLabel,s,x,c));for(e.textAlign="center",e.strokeStyle=this._settings.lineColor,e.fillStyle="#000000",n=0,o=0,r=0;x>=o;)a=(r*t.step).toString(10),h=a.indexOf("."),-1!==h&&(h=a.length-h-1,h>n&&(n=h)),o=Math.floor(o+x/t.steps),r++;for(o=0,r=0;x>=o;){if(l=f+t.maxLabel+~~o+.5,s=f,e.beginPath(),e.moveTo(l,s),e.lineTo(l,s+m),e.stroke(),a=(r*t.step).toString(10),n&&-1===a.indexOf("."))for(a+=".",h=0;n>h;h++)a+="0";e.fillStyle=this._settings.textColor,e.fillText(a,f+t.maxLabel+o,f+m+2),o=Math.floor(o+x/t.steps),r++}e.textAlign="left",a=g.mainLabel+" x"+t.factor,o=f+x/2-(e.measureText(a).width+g.itemSize)/2+t.maxLabel,r=f+m+18,e.fillStyle=this._settings.textColor,e.fillText(a,o,r),o+=e.measureText(a).width,e.beginPath(),e.moveTo(o+4,r+7.5),e.lineTo(o+g.itemSize,r+7.5),e.stroke(),e.beginPath(),e.moveTo(o+g.itemSize-4,r+3.5),e.lineTo(o+g.itemSize,r+7.5),e.lineTo(o+g.itemSize-4,r+11.5),e.stroke()},this._renderHorizontalBars=function(t,e,i){var a,n,l,s,o,r,h,g,d,f,x=this._settings,m=x.valueSpace,c=x.mainPadding,u=this._currentWidth-2*c-t.maxLabel,b=this._currentHeight-2*c-m,p=b/i.length,_=p-2*x.barPadding;for(e.globalAlpha=.9,h=0,g=i.length;g>h;h++)for(o=i[h],r=o.points,f=r.length,n=~~(_/f),d=0;f>d;d++)a=~~(o.points[d]/t.max*u),l=t.maxLabel+c,s=~~c+h*p+x.barPadding,e.fillStyle=x.dataColors[d%x.dataColors.length],e.fillRect(l,s+d*n,a,n-1);e.globalAlpha=1},this._renderHorizontalPoints=function(t,e,i){var a,n,l,s,o,r,h,g,d,f,x=this._settings,m=-1!==x.types.indexOf("points"),c=-1!==x.types.indexOf("lines"),u=-1!==x.types.indexOf("area"),b=x.valueSpace,p=x.mainPadding,_=this._currentWidth-2*p-t.maxLabel,S=this._currentHeight-2*p-b,L=S/i.length,v=L-2*x.barPadding,y=[];for(pointXLast=null,h=0,g=i.length;g>h;h++){for(r=i[h],l=r.points,o=null!==pointXLast,null===pointXLast&&(pointXLast=[]),n=~~(p+h*L+x.barPadding+v/2),d=0,f=l.length;f>d;d++)a=~~(p+r.points[d]/t.max*_+t.maxLabel),y[d]||(y[d]=[]),y[d].push({x:a,y:n}),e.strokeStyle=x.dataColors[d%x.dataColors.length],m&&e.strokeRect(a-4.5,n-4.5,10,10),o&&c&&(e.beginPath(),e.moveTo(pointXLast[d],pointYLast),e.lineTo(a,n),e.stroke()),pointXLast[d]=a;pointYLast=n}if(u){for(e.globalAlpha=.05,h=0,g=y.length;g>h;h++){for(e.beginPath(),e.moveTo(p+t.maxLabel,y[h][0].y),d=0,f=y[h].length;f>d;d++)s=y[h][d],e.lineTo(s.x,s.y);e.lineTo(p+t.maxLabel,y[h][f-1].y),e.closePath(),e.fillStyle=x.dataColors[h%x.dataColors.length],e.fill()}e.globalAlpha=1}},this.setData=function(t){var e,i=this._el,a=i.getContext("2d"),n=this._settings,l=n.types,s=function(){},o=function(){},r=function(){};switch(n.orientation){case"horizontal":i.width=this._width,i.height=t.length*n.itemSize+this._settings.valueSpace,s=bind(this,this._renderVerticalAxis),o=bind(this,this._renderHorizontalBars),r=bind(this,this._renderHorizontalPoints);break;case"vertical":i.width=t.length*n.itemSize+this._settings.valueSpace,i.height=this._height,s=bind(this,this._renderHorizontalAxis),o=bind(this,this._renderVerticalBars),r=bind(this,this._renderVerticalPoints)}a.font=n.font,this._renderBackground(a),t.length&&(e=this._calculateSegments(a,t),s(e,a,t),-1===l.indexOf("points")&&-1===l.indexOf("area")&&-1===l.indexOf("lines")||r(e,a,t),-1!==l.indexOf("bars")&&o(e,a,t)),this._data=t},this.setSettings=function(t){t.mainLabel=t.mainLabel||"",t.textColor=t.textColor||"#000000",t.fillColor=void 0===t.fillColor?"#FFFFFF":t.fillColor,t.lineColor=t.lineColor||"#000000",t.orientation=t.oriantation||"horizontal",t.types=t.types||"bars,lines,area,points",t.barPadding=t.barPadding||2,t.barBackground=t.barBackground||"#F8F8F8",t.mainPadding=t.mainPadding||10,t.valueSpace=t.valueSpace||40,t.dataColors=t.dataColors||["#DD0000","#00DD00","#0000DD"],t.font=t.font||"13px Verdana",t.maxLabelSize=t.maxLabelSize||200,t.itemSize=t.itemSize||50,this._settings=t},this.update=function(){this._data&&this.setData(this._data)}});',pre:!0},"../../node_modules/squill/SelectBox.js":{path:"../../node_modules/squill/SelectBox.js",friendlyPath:".SelectBox",directory:"../../node_modules/squill",filename:"SelectBox.js",src:'jsio("import .Widget"),jsio("import squill.models.DataSource as DataSource"),jsio("from util.browser import $");var SelectBox=exports=Class(Widget,function(t){this._css="select",this._def={tag:"label",style:{display:"inline-block"},children:[{id:"_select",tag:"select"}]},this.init=function(e){e=merge(e,{renderer:bind(this,"defaultRenderer")}),this._items={},e.dataSource&&this.setDataSource(e.dataSource),t(this,"init",arguments)},this.buildWidget=function(){if(this._opts.name&&this.setName(this._opts.name),this._dataSource||this.setDataSource(new DataSource),this._opts.items){var t=1,e=this._opts.items.map(function(e){return"object"!=typeof e?{id:"string"==typeof e?e:t++,value:e}:(e.id||(e.id="value"in e?e.value:"title"in e?e.title:t++),e)});this._dataSource.add(e)}"value"in this._opts&&this.setValue(this._opts.value),this.initMouseEvents(this._el),$.onEvent(this._select,"change",this,"_onSelect")},this._onSelect=function(){var t=this._dataSource.get(this.getValue());t&&this.publish("change",t)},this.getDataSource=function(){return this._dataSource},this.setDataSource=function(t){this._dataSource&&(this._dataSource.unsubscribe("Update",this),this._dataSource.unsubscribe("Remove",this)),this._dataSource=t,this._dataSource.subscribe("Update",this,"onUpdateItem"),this._dataSource.subscribe("Remove",this,"onRemoveItem"),this._dataSource.forEach(function(t,e){this.onUpdateItem(e,t)},this)},this.defaultRenderer=function(t){var e=this._dataSource.getKey();return t.displayName||t.label||t.title||t.text||t[e]},this.onUpdateItem=function(t,e){var i=this._items[t],s=this._dataSource.getKey();if("string"==typeof e){var a={};a[s]=e,e=a}if(!i){var i=this._items[t]=$.create({tag:"option"});$.insertBefore(this._select,i)}i.setAttribute("value",e[s]);var o=this._opts.renderer;i.innerText="string"==typeof o?e[o]:o(e),i.value=e[s]},this.onRemoveItem=function(t){var e=this._items[t],i=this.getValue();e&&($.remove(e),delete this._items[t]);var s=this.getValue();s!=i&&this._onSelect()},this.setName=function(t){this._select.name=t},this.setValue=function(t){this._select.value=t},this.getValue=function(){return this._select.value}});',pre:!0},"components/FrameBackground.js":{path:"components/FrameBackground.js",friendlyPath:"..components.FrameBackground",directory:"components/",filename:"FrameBackground.js",src:'jsio("import squill.Widget as Widget"),jsio("import math2D.Point as Point"),jsio("from util.browser import $");var SHADOW_OFFSET_X=20,SHADOW_OFFSET_Y=20,SHADOW_BLUR=50,SHADOW_COLOR="rgba(0, 0, 0, 0.5)";module.exports=Class(Widget,function(){this._def={tag:"canvas"},this.buildWidget=function(){this.initMouseEvents()},this.update=function(t){return this._rotation=t.rotation||0,this._scale=t.scale||1,t?(this._computePosition(t),void this._render(t.img)):this.hide()},this._computePosition=function(t){var i=this._scale,h=t.width,s=t.height,e=t.offsetX,_=t.offsetY,o=!!(this._rotation%2);o&&(h=t.height,s=t.width,e=t.height-2*t.screenSize.width-t.offsetY,_=t.offsetX),this._width=h*i,this._height=s*i,this._offsetX=-(e||0)*i,this._offsetY=-(_||0)*i;var a=this._shadowX=Math.max(0,SHADOW_BLUR-SHADOW_OFFSET_X),r=this._shadowY=Math.max(0,SHADOW_BLUR-SHADOW_OFFSET_Y);this._el.getContext("2d");this._fullWidth=this._width+SHADOW_OFFSET_X+SHADOW_BLUR+a,this._fullHeight=this._height+SHADOW_OFFSET_Y+SHADOW_BLUR+r,$.style(this._el,{left:this._offsetX-a+"px",top:this._offsetY-r+"px",width:this._fullWidth+"px",height:this._fullHeight+"px"})},this.getOffset=function(){return{x:this._offsetX,y:this._offsetY,width:this._width,height:this._height}},this._render=function(t){if(this._url=t,t){var i=this._img=new Image;return i.onload=bind(this,"_renderChrome"),void(i.src="images/"+t)}this._img=null,this._renderChrome()},this._renderChrome=function(){var t=[this._width,this._height,!!this._img,this._img&&this._img.src].join("|");if(this._cacheKey!=t){this._cacheKey=t,this._img?this.show():this.hide();var i=Math.max(0,SHADOW_BLUR-SHADOW_OFFSET_X),h=Math.max(0,SHADOW_BLUR-SHADOW_OFFSET_Y),s=this._el.getContext("2d");if(this._el.width=this._fullWidth,this._el.height=this._fullHeight,s.save(),s.shadowBlur=SHADOW_BLUR,s.shadowOffsetX=SHADOW_OFFSET_X,s.shadowOffsetY=SHADOW_OFFSET_Y,s.shadowColor=SHADOW_COLOR,s.translate(i,h),this._img)if(this._rotation%2==0)s.drawImage(this._img,0,0,this._width,this._height);else switch(this._rotation%4){case 3:case 1:s.rotate(90*Math.PI/180),s.translate(0,-this._width),s.drawImage(this._img,0,0,this._height,this._width)}s.restore()}}});',pre:!0},"../../node_modules/jsio/packages/math2D/Point.js":{path:"../../node_modules/jsio/packages/math2D/Point.js",friendlyPath:"math2D.Point",directory:"../../node_modules/jsio/packages/math2D",filename:"Point.js",baseMod:"math2D",basePath:"/Users/jimbo3744/Projects/GameClosure/devkit/node_modules/jsio/packages/math2D",src:'jsio("import math.geom.Point"),exports=math.geom.Point,logger.log("Warning: math2D.Point is deprecated");',pre:!0},"components/CenterLayout.js":{path:"components/CenterLayout.js",friendlyPath:"..components.CenterLayout",directory:"components/",filename:"CenterLayout.js",src:'jsio("import math2D.Point as Point"),jsio("import squill.Widget as Widget"),jsio("from util.browser import $"),jsio("import ..util.Size as Size"),module.exports=Class(Widget,function(){function t(t,e,i){return e>t?e:t>i?i:t}this._def={className:"center-layout",children:[{id:"_center",children:[{id:"_corner"}]}]},this.buildWidget=function(){this._offset=new Point(0,0)},this.getContainer=function(){return this._corner},this.setCenterX=function(t){this._isCenteredX=t,this.toggleClass("center-x",t)},this.setCenterY=function(t){this._isCenteredY=t,this.toggleClass("center-y",t)},this.addOffset=function(t,e){this._offset.add(t,e),this.onLayoutChange()},this.setOffset=function(t,e){this._offset.x=t,this._offset.y=e,this.onLayoutChange()},this.setContentSize=function(t,e){this._contentSize=new Size(t,e),this.onLayoutChange()},this.computeOffset=function(){this._offset=this._computeOffset()},this.getContentArea=function(){return new Size(this._el.offsetWidth,this._el.offsetHeight)},this._computeOffset=function(){var e=this.getContentArea(),i=Size.subtract(e,this._contentSize).scale(.5),s=this._isCenteredX?t(this._offset.x,-i.width,i.width):t(this._offset.x,0,2*i.width),n=this._isCenteredY?t(this._offset.y,-i.height,i.height):t(this._offset.y,0,2*i.height);return new Point(s,n)},this.onLayoutChange=function(){var t=this._computeOffset();$.style(this._corner,{left:(this._isCenteredX&&-this._contentSize.width/2||0)+t.x+"px",top:(this._isCenteredY&&-this._contentSize.height/2||0)+t.y+"px"})}});',pre:!0},"components/Toolbar.js":{path:"components/Toolbar.js",friendlyPath:"..components.Toolbar",directory:"components/",filename:"Toolbar.js",src:'jsio("import squill.Widget as Widget"),jsio("import squill.Menu as Menu"),jsio("import .onNextFrame"),jsio("from util.browser import $");var Button=Class(Widget,function(t){this._def={tag:"button",children:[]},this.init=function(i){i.id=i.id+"Button",i.attrs={tooltip:i.tooltip||""},i.className=i.tooltip?"withTooltip":"",i.children=[],i.text&&(i.children.push({text:i.text}),delete i.text),i.icon&&i.children.push({id:"icon",type:Widget,tag:"i",className:"glyphicon glyphicon-"+i.icon}),t(this,"init",arguments),this.initMouseEvents()},this.show=function(){t(this,"show",arguments),this._el.style.display="inline-block"},this.setTooltip=function(t){this._el.setAttribute("tooltip",t)}});module.exports=Class(Widget,function(){this._def={id:"toolbar",children:[{id:"buttonContainer"}]},this.buildWidget=function(){this._buttons={},this._el.addEventListener("webkitTransitionEnd",bind(this,"removeClass","transition"))},this.setSimulator=function(t){this._createButtons(t,this.buttonContainer,[{id:"reload",tooltip:"reload the game",icon:"refresh",onClick:function(t){t.reload()}},{id:"rotate",tooltip:"rotate the device",icon:"repeat",onClick:function(t){t.rotate()}},{id:"mute",tooltip:"mute all sounds",icon:"volume-up",event:"change:mute",onChange:function(t){var i=t.isMuted();this.setTooltip(i?"unmute all sounds":"mute all sounds"),this.icon.toggleClass("glyphicon-volume-off",i),this.icon.toggleClass("glyphicon-volume-up",!i)},onClick:function(t){t.toggleMuted()}},{id:"restart",tooltip:"restart",icon:"fast-backward",onClick:function(t){t.restart()}},{id:"pause",tooltip:"pause game timer",icon:"pause",event:"change:pause",onChange:function(t){var i=t.isPaused();this.icon.toggleClass("glyphicon-pause",!i),this.icon.toggleClass("glyphicon-play",i),this.setTooltip(i?"resume game timer":"pause game timer")},onClick:function(t){t.togglePaused()}},{id:"step",tooltip:"step forward 1 frame",icon:"step-forward",onClick:function(t){t.step()}},{id:"overflow",tooltip:"more options",icon:"chevron-down",menu:[{id:"drag",text:"lock simulator position",icon:"move",event:"change:drag",onChange:function(){var i=t.isDragEnabled();this.toggleClass("disabled",!i),this.setTooltip(i?"lock simulator position":"unlock simulator position")},onClick:function(t){t.toggleDragEnabled()}},{id:"screenShot",text:"take a screenshot",icon:"picture",onClick:function(t){t.takeScreenshot()}},{id:"deviceType",text:"change the device type",icon:"phone",onClick:function(t){t.editDevice()}},{id:"nativeBack",text:"back button (hardware)",icon:"chevron-left",onClick:function(t){t.nativeBackButton()}},{id:"nativeHome",text:"home button (hardware)",icon:"home",event:"change:home",onChange:function(t){var i=t.isHomeScreen();this.setTooltip(i?"return to game":"home (hardware button)"),this.toggleClass("disabled",i)},onClick:function(t){t.nativeHomeButton()}}]}])},this._createButtons=function(t,i,e){for(var o,n=0;o=e[n];++n){var s=this._buttons[o.id]=new Button(merge({parent:i},o));if(o.menu){var a=new Menu(merge({parent:this.buttonContainer,type:"menu",className:"list"}));this._createButtons(t,a,o.menu),s.on("Select",bind(a,"show"))}o.event&&o.onChange&&t.on(o.event,bind(s,o.onChange,t)),o.onClick&&s.on("Select",bind(s,o.onClick,t))}},this.getButton=function(t){return this._buttons[t]},this.setValidOrientations=function(t){var i=this.getButton("rotate");t.portrait&&t.landscape?i.show():i.hide()},this.setOffset=function(t,i){$.style(this._el,{top:i.y-35+"px",left:i.x+"px",width:i.width+"px"});var e=this._el.getBoundingClientRect();$.style(this._el,{paddingTop:Math.max(0,-e.top)+"px",paddingLeft:Math.max(0,-e.left)+"px"})},this.hide=function(){this.addClass("transition"),onNextFrame(this,function(){this.addClass("hidden")})},this.show=function(){this.addClass("transition"),onNextFrame(this,function(){this.removeClass("hidden")})}});',pre:!0},"components/onNextFrame.js":{path:"components/onNextFrame.js",friendlyPath:".onNextFrame",directory:"components/",filename:"onNextFrame.js",src:'for(var reqAnim=window.requestAnimationFrame,cancelAnim=window.cancelAnimationFrame,prefixes=["","webkit","moz","o","ms"],i=0;i<prefixes.length&&!reqAnim;++i)reqAnim=window[prefixes[i]+"RequestAnimationFrame"],cancelAnim=window[prefixes[i]+"CancelAnimationFrame"]||window[prefixes[i]+"CancelRequestAnimationFrame"];module.exports=function(e,i){i=1==arguments.length?arguments[0]:bind.apply(GLOBAL,arguments),reqAnim(i)};',pre:!0},"components/DeviceDialog.js":{path:"components/DeviceDialog.js",friendlyPath:"..components.DeviceDialog",directory:"components/",filename:"DeviceDialog.js",src:'jsio("import squill.Widget as Widget"),jsio("import squill.Dialog as Dialog"),jsio("import squill.Delegate as Delegate"),jsio("import ..util.DeviceInfo as DeviceInfo"),module.exports=Class(Dialog,function(e){this._def={id:"deviceDialog",title:"Device Properties",header:[{type:"label",text:"zoom:"},{id:"zoom50",type:"button",text:"50%"},{id:"zoom100",type:"button",text:"100%"},{id:"zoom200",type:"button",text:"200%"},{id:"zoomCustom",type:"button",text:"other"},{id:"zoomCustomWrapper",type:"widget",children:[{id:"zoom",tag:"input",attrs:{type:"range",value:100,max:400,min:10,step:1}},{id:"zoomPercent",type:"label",label:"100%"}]}],children:[{type:"label",text:"select a device"},{id:"deviceList"}]},this.buildWidget=function(){e(this,"buildWidget",arguments);var t=this._simulator=this._opts.simulator,i=this._opts.loadingImage;for(var o in DeviceInfo.allInfo){var s=DeviceInfo.allInfo[o];new DeviceCell({parent:this.deviceList,type:DeviceCell,deviceInfo:s,previewImage:i}).on("Select",bind(this,function(e){this.emit("select",DeviceInfo.get(e))},o))}t.on("change:zoom",bind(this,"_onZoomChange")),this.zoom.addEventListener("change",bind(this,"_onZoom")),this.zoom.addEventListener("input",bind(this,"_onZoom")),this._onZoomChange(),this._isZoomCustom=!1,this.zoomCustomWrapper.hide()},this.delegate=new Delegate(function(e){e.zoomCustom=function(){this._isZoomCustom=!this._isZoomCustom,this._isZoomCustom?this.zoomCustomWrapper.show():this.zoomCustomWrapper.hide()},e.zoom50=function(){this.zoom.value=50,this._onZoom()},e.zoom100=function(){this.zoom.value=100,this._onZoom()},e.zoom200=function(){this.zoom.value=200,this._onZoom()}}),this._onZoom=function(){this._simulator.setZoom(this.zoom.value/100)},this._onZoomChange=function(){this.zoomPercent.setText((100*this._simulator.getZoom()).toFixed(0)+"%")}});var DeviceCell=Class(Widget,function(e){function t(e,t){var o=e/t;return i/(o>1?e:t)}var i=50;this._def={className:"device",children:[{id:"previewBg",children:[{id:"preview"}]},{id:"label",type:"label"},{id:"resolution",type:"label"}]},this.buildWidget=function(){var e=this._opts.deviceInfo,i=e.width||1,o=e.height||1;this.label.setText(e.name),e.width&&e.height&&this.resolution.setText(i+"x"+o),this.initMouseEvents();var s=!1,n=t(i,o);if(e.background){var h=e.background;if(Array.isArray(h)&&(h=h[0]),h.width&&h.height){s=!0;var a=t(h.width,h.height);n>a&&(n=a)}}this.preview.style.width=i*n+"px",this.preview.style.height=o*n+"px",this.preview.style.backgroundImage="url("+this._opts.previewImage+")",s&&(this.previewBg.style.cssText="background-image: url(images/"+h.img+");width:"+h.width*n+"px;min-height:"+h.height*n+"px;padding:"+h.offsetY*n+"px 0 0 "+h.offsetX*n+"px;")}});',pre:!0},"../../node_modules/squill/Dialog.js":{path:"../../node_modules/squill/Dialog.js",friendlyPath:"squill.Dialog",directory:"../../node_modules/squill",filename:"Dialog.js",src:'jsio("import .Widget"),jsio("import .Events"),jsio("import math.geom.Point as Point"),jsio("from util.browser import $"),jsio("import .Window");var Dialog=exports=Class(Widget,function(t){this._def={draggable:!0,closeable:!0,style:{position:"absolute",display:"flex"},children:[{id:"_titlebar",children:[{id:"_closeBtn",children:[{id:"_closeBtnIcon"}]},{id:"_titlebarText"}]},{id:"_header"},{id:"_container"},{id:"_footer"}]},this._css="dialog",this.getContainer=function(){return this._container},this.buildWidget=function(t,i){this._opts.title&&this.setTitle(this._opts.title),this._opts.footer&&this.buildChildren(this._opts.footer,this._footer,i),this._opts.header&&this.buildChildren(this._opts.header,this._header,i),this._isModal=!!this._opts.isModal,this._opts.closeable||$.hide(this._closeBtn),$.onEvent(this._closeBtn,"click",this,"hide",null),$.onEvent(this._closeBtn,"touchend",this,"hide",null),this.initDragEvents(this._titlebar)},this.setTitle=function(t){$.setText(this._titlebarText,t)},this.onDrag=function(t,i,e){t.data||(t.data=new Point(parseInt(this._el.style.left),parseInt(this._el.style.top)));var s=Point.add(t.data,Point.subtract(t.currPt,t.srcPt));Window.get().getViewport();this._el.style.left=Math.max(0,s.x)+"px",this._el.style.top=Math.max(0,s.y)+"px"},this.dispatchButton=function(t,i){this.delegate&&this.delegate.call(this,t)!==!1&&this.hide(t)},this.fadeOut=function(){var t=bind(this,function(){this.onHide()});this.onBeforeHide(),new Animation({duration:250,subject:function(t){$.style(el,{opacity:1-t})},onFinish:t}).seekTo(1)},this.setIsModal=function(t){this._isModal=t,this.isShowing()&&this.showUnderlay()},this.show=function(){var i=this.getElement();i.parentNode||document.body.appendChild(i);var e=t(this,"show",arguments);return this._isModal&&this.showUnderlay(),e},this.hide=function(){var i=t(this,"hide",arguments);return this.hideUnderlay(),i},this.showUnderlay=function(){this._underlay||(this._underlay=$({style:{parent:document.body,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px",background:"rgba(0, 0, 0, 0.85)"}})),this._el.parentNode.appendChild(this._underlay),this._underlay.style.zIndex=getComputedStyle(this._el).zIndex-1,this._underlay.style.display="block"},this.hideUnderlay=function(){this._underlay&&(this._underlay.style.display="none")}});',pre:!0},"components/renderers/facebook.js":{path:"components/renderers/facebook.js",friendlyPath:"..components.renderers.facebook",directory:"components/renderers/",filename:"facebook.js",src:'jsio("from util.browser import $");var _facebookBar;exports.create=function(e){if(!_facebookBar){var o=_facebookBar=$.create({parent:e.getElement(),style:{position:"absolute",top:"0px",left:"0px",right:"0px",bottom:"0px",zIndex:0,minWidth:"1052px",background:\'url("images/facebook-header-center.png") repeat-x\'}});o.innerHTML="<div style=\'position:absolute;top:0px;left:0px;width:636px;height:44px;background:url(images/facebook-header-left.png)\'></div><div style=\'position:absolute;top:0px;right:0px;width:296px;height:44px;background:url(images/facebook-header-right.png)\'></div><div style=\\"position:absolute;top:13px;left:56px;width:550px;height:20px;cursor:default;color:#141823; white-space: nowrap; overflow: hidden; font: 14px \'Helvetica Neue\', Helvetica, Arial, \'lucida grande\', tahoma, verdana, arial, sans-serif; font-weight: bold; \\"></div>";$.create({parent:o,style:{position:"absolute",top:"44px",bottom:"0px",right:"10px",width:"244px",backgroundColor:"#FAFAF9",borderColor:"#B3B3B3",borderWidth:"0px 1px",borderStyle:"solid",zIndex:1}})}$.style(e.getElement(),{background:"#FFF"})},exports.destroy=function(e){_facebookBar&&($.remove(_facebookBar),$.style(e.getElement(),{background:""}),_facebookBar=null)};',pre:!0},"util/upgrade.js":{path:"util/upgrade.js",friendlyPath:".util.upgrade",directory:"util/",filename:"upgrade.js",src:'function handleOldDevkitCoreMessage(e){if(e.data&&/devkit-simulator\\{"type":"open"/.test(e.data)){console.warn("old devkit-core detected, attempting to connect..."),exports.promptUpgrade();try{var t=JSON.parse(e.data.substring(16)).uid;e.source.postMessage("devkit-simulator"+JSON.stringify({type:"open",uid:t}),"*")}catch(o){console.warn("failed to construct response for old devkit-core",o)}}}jsio("import .ajax");var LISTENER_KEY="__devkit_old_devkit_core_listener";window[LISTENER_KEY]||(window[LISTENER_KEY]=handleOldDevkitCoreMessage,window.addEventListener("message",handleOldDevkitCoreMessage)),exports.promptUpgrade=function(){var e=window.devkit&&window.devkit.getSimulator();e&&e.prompt({type:"banner",text:"This game has an outdated version of devkit-core.",dismissable:!0,action:"upgrade"}).then(function(){console.log("upgrading...");try{e.getFrame().contentWindow.GC.app.engine.pause()}catch(t){}return ajax.get({url:"/api/upgrade",query:{app:e.getApp(),module:"devkit-core",version:"latest"}}).then(function(t){e.rebuild()},function(e){alert("Could not upgrade!\\n\\n"+e.response)})},function(){console.log("ignoring...")})};',pre:!0},"devkitConn.js":{path:"devkitConn.js",friendlyPath:".devkitConn",directory:"",filename:"devkitConn.js",src:'function getIO(){return new Promise(function(n,e){"function"==typeof io?n(io):"undefined"==typeof document?e(new Error("No DOM document found")):(_pending.push(n),_script||(_script=document.createElement("script"),_script.onload=_script.onreadystatechange=function(){if("function"==typeof io){_script.onload=_script.onreadystatechange=null;var n=[];_pending=[],n.forEach(function(n){n(io)})}},_script.src="/socket.io/socket.io.js",document.getElementsByTagName("head")[0].appendChild(_script)))})}function connect(n){return getIO().then(function(e){var t=e(n,{multiplex:!1});return new Promise(function(n,e){t.once("connect",n.bind(null,t)),t.once("error",e)})})}jsio("import net.interfaces"),jsio("import .util.bluebird as Promise");var _script,_pending=[];exports.getTransport=function(n){return connect(n)};',pre:!0},"../../node_modules/jsio/packages/net/env/browser/csp.js":{path:"../../node_modules/jsio/packages/net/env/browser/csp.js",friendlyPath:"net.env.browser.csp",directory:"../../node_modules/jsio/packages/net/env/browser",filename:"csp.js",src:'jsio("import ...interfaces"),jsio("from ...csp.client import CometSession"),jsio("import ....std.utf8 as utf8"),exports.Connector=Class(interfaces.Connector,function(){this.connect=function(){this._state=interfaces.STATE.CONNECTING;var n=new CometSession;n.onconnect=bind(this,"cometSessionOnConnect",n),n.ondisconnect=bind(this,"onDisconnect"),logger.debug("opening the connection"),this._opts.encoding||(this._opts.encoding="utf8"),n.connect(this._opts.url,this._opts)},this.cometSessionOnConnect=function(n){logger.debug("conn has opened"),this.onConnect(new Transport(n))}});var Transport=Class(interfaces.Transport,function(){this.init=function(n){this._conn=n},this.makeConnection=function(n){this._conn.onread=bind(n,"dataReceived")},this.write=function(n){this._conn.write(n)},this.loseConnection=function(n){this._conn.close()}});',pre:!0},"../../node_modules/jsio/packages/net/interfaces.js":{path:"../../node_modules/jsio/packages/net/interfaces.js",friendlyPath:"net.interfaces",directory:"../../node_modules/jsio/packages/net",filename:"interfaces.js",baseMod:"net",basePath:"/Users/jimbo3744/Projects/GameClosure/devkit/node_modules/jsio/packages/net",src:'jsio("import .index as net"),jsio("import ..lib.Enum as Enum"),jsio("import ..lib.PubSub as PubSub");var ctx=jsio.__env.global;exports.Protocol=Class(function(){this.connectionMade=function(t){},this.dataReceived=function(t){},this.connectionLost=function(t){},this._connectionMade=function(){this._isConnected=!0,this.connectionMade.apply(this,arguments)},this._connectionLost=function(){this._isConnected=!1,this.connectionLost.apply(this,arguments)},this._isConnected=!1,this.isConnected=function(){return!!this._isConnected},this.end=function(){this.transport&&this.transport.loseConnection()}}),exports.Client=Class(function(){this.init=function(t){this._protocol=t},this.connect=function(t,n){this._remote=new this._protocol,this._remote._client=this,net.connect(this._remote,t,n)}}),exports.Server=Class(function(){this.init=function(t){this._protocolClass=t},this.buildProtocol=function(){return new this._protocolClass},this.listen=function(t,n){return net.listen(this,t,n)}}),exports.Transport=Class(function(){this._encoding="plain",this.write=function(t,n){throw new Error("Not implemented")},this.getPeer=function(){throw new Error("Not implemented")},this.setEncoding=function(t){this._encoding=t},this.getEncoding=function(){return this._encoding}}),exports.Listener=Class(PubSub,function(){this.init=function(t,n){this._server=t,this._opts=n||{}},this.onConnect=function(t){var n=this._server.buildProtocol();n.transport=t,n.server=this._server,t.protocol=n,t.makeConnection(n),n._connectionMade()},this.listen=function(){throw new Error("Abstract class")},this.stop=function(){}}),exports.STATE=Enum("INITIAL","DISCONNECTED","CONNECTING","CONNECTED"),exports.Connector=Class(function(){this.init=function(t,n){this._protocol=t,this._opts=n,this._state=exports.STATE.INITIAL},this.getState=function(){return this._state},this.onConnect=function(t){this._state=exports.STATE.CONNECTED,t.makeConnection(this._protocol),this._protocol.transport=t;try{this._protocol._connectionMade()}catch(n){throw logger.error(n)}},this.onDisconnect=function(t){var n=this._state==exports.STATE.CONNECTED;this._state=exports.STATE.DISCONNECTED;try{this._protocol._connectionLost(t,n)}catch(o){throw logger.error(o)}},this.getProtocol=function(){return this._protocol}});',
pre:!0},"../../node_modules/jsio/packages/net/index.js":{path:"../../node_modules/jsio/packages/net/index.js",friendlyPath:".index",directory:"../../node_modules/jsio/packages/net",filename:"index.js",src:'jsio("import .env"),jsio("import ..std.JSON as JSON"),jsio("import .interfaces"),JSON.createGlobal(),exports.listen=function(e,r,t){if(!r)throw logger.error("No transport provided for net.listen");var n="string"==typeof r?env.getListener(r):r,o=new n(e,t);return o.listen(),o},exports.connect=function(e,r,t){var n="string"==typeof r?env.getConnector(r):r,o=new n(e,t);return o.connect(),o},exports.quickServer=function(e){return new interfaces.Server(e)};',pre:!0},"../../node_modules/jsio/packages/net/env/index.js":{path:"../../node_modules/jsio/packages/net/env/index.js",friendlyPath:".env",directory:"../../node_modules/jsio/packages/net/env",filename:"index.js",src:'function getObj(t,r,e){try{var n="from ."+(e||jsio.__env.name)+"."+r+" import "+t+" as result";jsio(n)}catch(o){throw logger.error("Invalid transport (",r,") or environment (",e,")",o)}return result}exports.getListener=bind(this,getObj,"Listener"),exports.getConnector=bind(this,getObj,"Connector");',pre:!0},"../../node_modules/jsio/packages/std/JSON.js":{path:"../../node_modules/jsio/packages/std/JSON.js",friendlyPath:"..std.JSON",directory:"../../node_modules/jsio/packages/std",filename:"JSON.js",src:'exports.createGlobal=function(){"undefined"==typeof JSON&&(JSON={}),"function"!=typeof JSON.stringify&&(JSON.stringify=exports.stringify),"function"!=typeof JSON.parse&&(JSON.parse=exports.parse)},function(){function quote(e){return escapable.lastIndex=0,escapable.test(e)?\'"\'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+\'"\':\'"\'+e+\'"\'}function str(e,t){var r=gap,n=t[e];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(e)),"function"==typeof rep&&(n=rep.call(t,e,n)),typeof n){case"string":return quote(n);case"number":return isFinite(n)?String(n):"null";case"boolean":return String(n);case"object":if(null===n)return"null";if(n.constructor===Date)return exports.stringifyDate(n);gap+=indent;var f=[];if(n.constructor===Array){for(var a=n.length,u=0;a>u;u+=1)f[u]=str(u,n)||"null";var o=0===f.length?"[]":gap?"[\\n"+gap+f.join(",\\n"+gap)+"\\n"+r+"]":"["+f.join(",")+"]";return gap=r,o}if(rep&&"object"==typeof rep)for(var a=rep.length,u=0;a>u;u+=1){var i=rep[u];if("string"==typeof i){var o=str(i,n);o&&f.push(quote(i)+(gap?": ":":")+o)}}else for(var i in n)if(Object.hasOwnProperty.call(n,i)){var o=str(i,n);o&&f.push(quote(i)+(gap?": ":":")+o)}var o=0===f.length?"{}":gap?"{\\n"+gap+f.join(",\\n"+gap)+"\\n"+r+"}":"{"+f.join(",")+"}";return gap=r,o}}var cx=/[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,escapable=/[\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,gap,indent,meta={"\\b":"\\\\b","	":"\\\\t","\\n":"\\\\n","\\f":"\\\\f","\\r":"\\\\r",\'"\':\'\\\\"\',"\\\\":"\\\\\\\\"},rep;exports.stringify=function(e,t,r){if(gap="",indent="","number"==typeof r)for(var n=0;r>n;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON stringify: invalid replacer");return str("",{"":e})},exports.stringifyDate=function(e){var t=e.getUTCFullYear(),r=e.getUTCMonth()+1,n=e.getUTCDate(),f=e.getUTCHours(),a=e.getUTCMinutes(),u=e.getUTCSeconds(),o=e.getUTCMilliseconds();return 10>r&&(r="0"+r),10>n&&(n="0"+n),10>f&&(f="0"+f),10>a&&(a="0"+a),10>u&&(u="0"+u),10>o?o="00"+o:100>o&&(o="0"+o),\'"\'+t+"-"+r+"-"+n+"T"+f+":"+a+":"+u+"."+o+\'Z"\'},exports.parse=function(text,reviver){if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\\],:{}\\s]*$/.test(text.replace(/\\\\(?:["\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\\\\n\\r]*"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,"]").replace(/(?:^|:|,)(?:\\s*\\[)+/g,""))){var j=eval("("+text+")");if(reviver){var walk=function(e,t){var r,n,f=e[t];if(f&&"object"==typeof f)for(r in f)Object.hasOwnProperty.call(f,r)&&(n=walk(f,r),void 0!==n?f[r]=n:delete f[r]);return reviver.call(e,t,f)};return walk({"":j},"")}return j}throw new SyntaxError("JSON.parse")}}();',pre:!0},"../../node_modules/jsio/packages/net/csp/client.js":{path:"../../node_modules/jsio/packages/net/csp/client.js",friendlyPath:"...csp.client",directory:"../../node_modules/jsio/packages/net/csp",filename:"client.js",src:'jsio("import std.base64 as base64"),jsio("import std.utf8 as utf8"),jsio("import std.uri as uri"),jsio("import net.errors as errors"),jsio("import .transports"),jsio("import lib.Enum as Enum");var READYSTATE=exports.READYSTATE=Enum({INITIAL:0,CONNECTING:1,CONNECTED:2,DISCONNECTING:3,DISCONNECTED:4});exports.CometSession=Class(function(t){var e=0,i=50,s=45e3,n=1e4;this.init=function(){this._id=++e,this._url=null,this.readyState=READYSTATE.INITIAL,this._sessionKey=null,this._transport=null,this._options=null,this._utf8ReadBuffer="",this._writeBuffer="",this._packetsInFlight=null,this._lastEventId=null,this._lastSentId=null,this._handshakeLater=null,this._handshakeBackoff=i,this._handshakeRetryTimer=null,this._handshakeTimeoutTimer=null,this._timeoutTimer=null,this._writeBackoff=i,this._cometBackoff=i,this._nullInBuffer=!1,this._nullInFlight=!1,this._nullSent=!1,this._nullReceived=!1},this.setEncoding=function(t){if(t!=this._options.encoding){if("utf8"!=t&&"plain"!=t)throw new errors.InvalidEncodingError;if("plain"==t&&this._buffer){var e=this._utf8ReadBuffer;this._utf8ReadBuffer="",this._doOnRead(e)}this._options.encoding=t}},this.connect=function(t,e){this._url=t.replace(/\\/$/,""),this._options=e||{},this._options.encoding=this._options.encoding||"utf8",this.setEncoding(this._options.encoding),this._options.connectTimeout=this._options.connectTimeout||n;var i=transports.chooseTransport(t,this._options);this._transport=new i,this._transport.handshakeFailure=bind(this,this._handshakeFailure),this._transport.handshakeSuccess=bind(this,this._handshakeSuccess),this._transport.cometFailure=bind(this,this._cometFailure),this._transport.cometSuccess=bind(this,this._cometSuccess),this._transport.sendFailure=bind(this,this._writeFailure),this._transport.sendSuccess=bind(this,this._writeSuccess),this.readyState=READYSTATE.CONNECTING,this._transport.handshake(this._url,this._options),this._handshakeTimeoutTimer=setTimeout(bind(this,this._handshakeTimeout),this._options.connectTimeout)},this.write=function(t,e){if(this.readyState!=READYSTATE.CONNECTED)throw new errors.ReadyStateError;e=e||this._options.encoding||"utf8","utf8"==e&&(t=utf8.encode(t)),this._writeBuffer+=t,this._doWrite()},this._protocolError=function(t){logger.debug("_protocolError",t),this.readyState=READYSTATE.DISCONNECTED,this._doWrite(!0),this._doOnDisconnect(new errors.ServerProtocolError(t))},this._receivedNullPacket=function(){logger.debug("_receivedNullPacket"),this._receivedNull=!0,this._nullInFlight||this._nullInBuffer||this._nullSent?this.readyState=READYSTATE.DISCONNECTED:(this.readyState=READYSTATE.DISCONNECTING,this._doWrite(!0)),this._doOnDisconnect(new errors.ConnectionClosedCleanly)},this._sentNullPacket=function(){logger.debug("_sentNullPacket"),this._nullSent=!0,this._nullSent&&this._nullReceived&&(this.readyState=READYSTATE.DISCONNECTED)},this.close=function(t){switch(logger.debug("close called",t,"readyState",this.readyState),this.readyState){case READYSTATE.CONNECTING:clearTimeout(this._handshakeRetryTimer),clearTimeout(this._handshakeTimeoutTimer),this.readyState=READYSTATE.DISCONNECTED,this._doOnDisconnect(t);break;case READYSTATE.CONNECTED:this.readyState=READYSTATE.DISCONNECTING,this._doWrite(!0),clearTimeout(this._timeoutTimer);break;case READYSTATE.DISCONNECTED:throw new errors.ReadyStateError("Session is already disconnected")}this._opened=!1,this.readyState=READYSTATE.DISCONNECTED,this._doOnDisconnect(t),this._sessionKey=null},this._handshakeTimeout=function(){logger.debug("handshake timeout"),this._handshakeTimeoutTimer=null,clearTimeout(this._handshakeRetryTimer),this.readyState==READYSTATE.CONNECTING&&(this.readyState=READYSTATE.DISCONNECTED),this._doOnDisconnect(new errors.ServerUnreachable)},this._handshakeSuccess=function(t){return logger.debug("handshake success",t),this.readyState!=READYSTATE.CONNECTING?void logger.debug("received handshake success in invalid readyState:",this.readyState):(clearTimeout(this._handshakeTimeoutTimer),this._handshakeTimeoutTimer=null,this._sessionKey=t.response.session,this._opened=!0,this.readyState=READYSTATE.CONNECTED,this._doOnConnect(),void this._doConnectComet())},this._handshakeFailure=function(t){if(logger.debug("handshake failure",t),this.readyState==READYSTATE.CONNECTING){if(404==t.status)return clearTimeout(this._handshakeTimeoutTimer),this._doOnDisconnect(new errors.ServerUnreachable);logger.debug("trying again in ",this._handshakeBackoff),this._handshakeRetryTimer=setTimeout(bind(this,function(){this._handshakeRetryTimer=null,this._transport.handshake(this._url,this._options)}),this._handshakeBackoff),this._handshakeBackoff*=2}},this._writeSuccess=function(){if(this.readyState==READYSTATE.CONNECTED||this.readyState==READYSTATE.DISCONNECTING){if(this._nullInFlight)return this._sentNullPacket();this._resetTimeoutTimer(),this.writeBackoff=i,this._packetsInFlight=null,(this._writeBuffer||this._nullInBuffer)&&this._doWrite(this._nullInBuffer)}},this._writeFailure=function(){this.readyState!=READYSTATE.CONNECTED&&this.READYSTATE!=READYSTATE.DISCONNECTING||(this._writeTimer=setTimeout(bind(this,function(){this._writeTimer=null,this.__doWrite(this._nullInBuffer)}),this._writeBackoff),this._writeBackoff*=2)},this._doWrite=function(t){if(this._packetsInFlight){if(t)return void(this._nullInBuffer=!0)}else this.__doWrite(t)},this.__doWrite=function(t){return logger.debug("_writeBuffer:",this._writeBuffer),!this._packetsInFlight&&this._writeBuffer&&(this._packetsInFlight=[this._transport.encodePacket(++this._lastSentId,this._writeBuffer,this._options)],this._writeBuffer=""),t&&!this._writeBuffer&&(this._packetsInFlight||(this._packetsInFlight=[]),this._packetsInFlight.push([++this._lastSentId,0,null]),this._nullInFlight=!0),this._packetsInFlight?(logger.debug("sending packets:",JSON.stringify(this._packetsInFlight)),void this._transport.send(this._url,this._sessionKey,this._lastEventId||0,JSON.stringify(this._packetsInFlight),this._options)):void logger.debug("no packets to send")},this._doConnectComet=function(){logger.debug("_doConnectComet"),this._transport.comet(this._url,this._sessionKey,this._lastEventId||0,this._options)},this._cometFailure=function(t){if(this.readyState==READYSTATE.CONNECTED){if(404==t.status&&"Session not found"==t.response)return this.close(new errors.ExpiredSession(t));this._cometTimer=setTimeout(bind(this,"_doConnectComet"),this._cometBackoff),this._cometBackoff*=2}},this._cometSuccess=function(t){if(this.readyState==READYSTATE.CONNECTED||this.readyState==READYSTATE.DISCONNECTING){logger.debug("comet Success:",t),this._cometBackoff=i,this._resetTimeoutTimer();for(var e,s=t.response,n=0;(e=s[n])||n<s.length;n++){if(logger.debug("process packet:",e),null===e)return this.close(new errors.ServerProtocolError(t));logger.debug("process packet",e);var o=e[0],r=e[1],t=e[2];if(!("number"==typeof this._lastEventId&&o<=this._lastEventId)){if("number"==typeof this._lastEventId&&o!=this._lastEventId+1)return this._protocolError("Ack id too high");if(this._lastEventId=o,null==t)return this._receivedNullPacket();if(1==r)try{logger.debug("before base64 decode:",t),t=base64.decode(t),logger.debug("after base64 decode:",t)}catch(h){return this._protocolError("Unable to decode base64 payload")}if("utf8"==this._options.encoding){this._utf8ReadBuffer+=t,logger.debug("before utf8 decode, _utf8ReadBuffer:",this._utf8ReadBuffer);var a=utf8.decode(this._utf8ReadBuffer);t=a[0],this._utf8ReadBuffer=this._utf8ReadBuffer.slice(a[1]),logger.debug("after utf8 decode, _utf8ReadBuffer:",this._utf8ReadBuffer,"data:",t)}logger.debug("dispatching data:",t),this._doOnRead(t)}}this.readyState!=READYSTATE.CONNECTED&&this.readyState!=READYSTATE.DISCONNECTING||this._doConnectComet()}},this._doOnRead=function(t){"function"==typeof this.onread?(logger.debug("call onread function",t),this.onread(t)):logger.debug("skipping onread callback (function missing)")},this._doOnDisconnect=function(t){"function"==typeof this.ondisconnect?(logger.debug("call ondisconnect function",t),this.ondisconnect(t)):logger.debug("skipping ondisconnect callback (function missing)")},this._doOnConnect=function(){if("function"==typeof this.onconnect){logger.debug("call onconnect function");try{this.onconnect()}catch(t){logger.debug("onconnect caused errror",t),setTimeout(function(){throw t},0)}}else logger.debug("skipping onconnect callback (function missing)")},this._resetTimeoutTimer=function(){clearTimeout(this._timeoutTimer),this._timeoutTimer=setTimeout(bind(this,function(){logger.debug("connection timeout expired"),this.close(new errors.ConnectionTimeout)}),this._getTimeoutInterval())},this._getTimeoutInterval=function(){return s}});',pre:!0},"../../node_modules/jsio/packages/std/base64.js":{path:"../../node_modules/jsio/packages/std/base64.js",friendlyPath:"std.base64",directory:"../../node_modules/jsio/packages/std",filename:"base64.js",src:'for(var alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",trailingPad="=",padChar=alphabet.charAt(alphabet.length-1),decodeMap={},i=0,len=alphabet.length;len>i;i++)decodeMap[alphabet.charAt(i)]=i;var alphabet_inverse=new RegExp("[^"+alphabet.replace("-","\\\\-")+"]");exports.Base64CodecError=Class(Error,function(e){this.name="Base64CodecError",this.init=function(e){this.message=e}});var assertOrBadInput=function(e,a){if(!e)throw new exports.Base64CodecError(a)};exports.encode=function(e,a){assertOrBadInput(!/[^\\x00-\\xFF]/.test(e),"Input contains out-of-range characters.");var r=e.length%3,t="\\x00\\x00\\x00".slice(r||3);e+=t;for(var n=[],h=0,o=e.length;o>h;h+=3){var c=(e.charCodeAt(h)<<16)+(e.charCodeAt(h+1)<<8)+e.charCodeAt(h+2);n.push(alphabet.charAt(c>>18&63),alphabet.charAt(c>>12&63),alphabet.charAt(c>>6&63),alphabet.charAt(63&c))}n.length-=t.length;var s=n.join("");return a||(1==r?s+="==":2==r&&(s+="=")),s},exports.decode=function(e){logger.debug("decode",e),e=e.replace(/\\s/g,"");for(var a=e.length;e.charAt(--a)===trailingPad;);e=e.slice(0,a+1),assertOrBadInput(!alphabet_inverse.test(e),"Input contains out-of-range characters.");var r=4-(e.length%4||4),t=Array(r+1).join(padChar);e+=t;for(var n=[],h=a+r+1,a=0;h>a;a+=4)newchars=(decodeMap[e.charAt(a)]<<18)+(decodeMap[e.charAt(a+1)]<<12)+(decodeMap[e.charAt(a+2)]<<6)+decodeMap[e.charAt(a+3)],n.push(newchars>>16&255,newchars>>8&255,255&newchars);h=n.length-=r;var o,c=65536;if(h>c){o=[];for(var a=0,s=0;h>a;)o[s++]=String.fromCharCode.apply(String,n.slice(a,a+c)),a+=c;o=o.join("")}else o=String.fromCharCode.apply(String,n);return logger.debug("decoded",o),o};',pre:!0},"../../node_modules/jsio/packages/std/utf8.js":{path:"../../node_modules/jsio/packages/std/utf8.js",friendlyPath:"std.utf8",directory:"../../node_modules/jsio/packages/std",filename:"utf8.js",src:'exports.UnicodeCodecError=function(e){this.message=e};var UnicodeCodecError=exports.UnicodeCodecError;UnicodeCodecError.prototype.toString=function(){return"UnicodeCodecError"+(this.message?": "+this.message:"")},exports.encode=function(e){try{return unescape(encodeURIComponent(e))}catch(o){throw new UnicodeCodecError("invalid input string")}},exports.decode=function(e){if(/[^\\x00-\\xFF]/.test(e))throw new UnicodeCodecError("invalid utf-8 bytes");var o,r;o=r=e.length;var t=o-1;if(e.charCodeAt(t)>=128){for(var c=1;3>=c;c++)if(e.charCodeAt(o-c)>=192){r=o-c;break}try{decodeURIComponent(escape(e.slice(r))),r=o}catch(n){}}try{return[decodeURIComponent(escape(e.slice(0,r))),r]}catch(n){throw new UnicodeCodecError("invalid utf-8 bytes")}};',pre:!0},"../../node_modules/jsio/packages/net/errors.js":{path:"../../node_modules/jsio/packages/net/errors.js",friendlyPath:"net.errors",directory:"../../node_modules/jsio/packages/net",filename:"errors.js",src:'var makeErrorClass=function(r,e){var o=function(){return r+(this.message?": "+this.message:"")},s=function(r){"string"==typeof r?this.message=r:this.data=r};return s.prototype={type:r,toString:o},s};exports.ReadyStateError=makeErrorClass("ReadyStateError"),exports.InvalidEncodingError=makeErrorClass("InvalidEncodingError"),exports.ExpiredSession=makeErrorClass("ExpiredSession"),exports.ServerUnreachable=makeErrorClass("ServerUnreachable",100),exports.ConnectionTimeout=makeErrorClass("ConnectionTimeout",101),exports.ServerProtocolError=makeErrorClass("ServerProtocolError",200),exports.ServerClosedConnection=makeErrorClass("ServerClosedConnection",301),exports.ConnectionClosedCleanly=makeErrorClass("ConnectionClosedCleanly",300);',pre:!0},"../../node_modules/jsio/packages/net/csp/transports.js":{path:"../../node_modules/jsio/packages/net/csp/transports.js",friendlyPath:".transports",directory:"../../node_modules/jsio/packages/net/csp",filename:"transports.js",src:'function isLocalFile(e){return/^file:\\/\\//.test(e)}function isWindowDomain(e){return uri.isSameDomain(e,window.location.href)}function checkXHRBinarySupport(e){xhrSupportsBinary=!!e.sendAsBinary}function canUseXHR(e){if(isLocalFile(e))return!1;var t=new exports.XHR;return t?(checkXHRBinarySupport(t),isWindowDomain(e)?!0:window.XMLHttpRequest&&(t.__proto__==XMLHttpRequest.prototype||t instanceof window.XMLHttpRequest)&&void 0!==t.withCredentials||window.XDomainRequest&&t instanceof window.XDomainRequest?!0:void 0):!1}jsio("import std.uri as uri"),jsio("import std.base64 as base64"),jsio("from util.browserdetect import BrowserDetect"),function(){var e;exports.getDoc=function(){if(e)return e;try{e=window.ActiveXObject&&new ActiveXObject("htmlfile"),e&&(e.open().write("<html></html>"),e.close(),window.attachEvent("onunload",function(){try{e.body.innerHTML=""}catch(t){}e=null}))}catch(t){}return e||(e=document),e},exports.XHR=function(){var e=window;exports.getDoc();return new(exports.XHR=e.XMLHttpRequest?e.XMLHttpRequest:function(){return e.ActiveXObject&&new e.ActiveXObject("Msxml2.XMLHTTP")||null})},exports.createXHR=function(){return new exports.XHR}}();var xhrSupportsBinary=void 0,transports=exports.transports={};exports.chooseTransport=function(e,t){switch(t.preferredTransport){case"jsonp":return transports.jsonp;case"xhr":default:return canUseXHR(e)?transports.xhr:transports.jsonp}};var PARAMS={xhrstream:{is:"1",bs:"\\n"},xhrpoll:{du:"0"},xhrlongpoll:{},sselongpoll:{bp:"data: ",bs:"\\r\\n",se:"1"},ssestream:{bp:"data: ",bs:"\\r\\n",se:"1",is:"1"}};exports.Transport=Class(function(e){this.handshake=function(e,t){throw new Error("handshake Not Implemented")},this.comet=function(e,t,r,n){throw new Error("comet Not Implemented")},this.send=function(e,t,r,n){throw new Error("send Not Implemented")},this.encodePacket=function(e,t,r){throw new Error("encodePacket Not Implemented")},this.abort=function(){throw new Error("abort Not Implemented")}});var baseTransport=Class(exports.Transport,function(e){this.init=function(){this._aborted=!1,this._handshakeArgs={ct:"application/javascript"},this._handshakeData="{}"},this.handshake=function(e,t){logger.debug("handshake:",e,t),this._makeRequest("send",e+"/handshake",this._handshakeArgs,this._handshakeData,this.handshakeSuccess,this.handshakeFailure)},this.comet=function(e,t,r,n){logger.debug("comet:",e,t,r,n);var s={s:t,a:r};this._makeRequest("comet",e+"/comet",s,null,this.cometSuccess,this.cometFailure)},this.send=function(e,t,r,n,s){var i={s:t,a:r};this._makeRequest("send",e+"/send",i,n,this.sendSuccess,this.sendFailure)}});transports.xhr=Class(baseTransport,function(supr){function onReadyStateChange(xhr,rType,cb,eb){try{var data={status:xhr.status}}catch(e){eb({response:"Could not access status"})}try{if(4!=xhr.readyState)return;if(data.response=eval(xhr.responseText),200!=data.status)return logger.debug("XHR failed with status ",xhr.status),void eb(data);logger.debug("XHR data received")}catch(e){return logger.debug("Error in XHR::onReadyStateChange",e),eb(data),this._abortXHR(rType),void logger.debug("done handling XHR error")}cb(data)}this.init=function(){supr(this,"init"),this._xhr={send:new exports.XHR,comet:new exports.XHR}},this.abort=function(){this._aborted=!0;for(var e in this._xhr)this._xhr.hasOwnProperty(e)&&this._abortXHR(e)},this._abortXHR=function(e){logger.debug("aborting XHR");var t=this._xhr[e];try{"onload"in t?t.onload=t.onerror=t.ontimeout=null:"onreadystatechange"in t&&(t.onreadystatechange=null),t.abort&&t.abort()}catch(r){logger.debug("error aborting xhr",r)}this._xhr[e]=new exports.XHR},this.encodePacket=function(e,t,r){return xhrSupportsBinary?[e,0,t]:[e,1,base64.encode(t)]},this._makeRequest=function(e,t,r,n,s,i){if(!this._aborted){var o=this._xhr[e];o.open("POST",t+"?"+uri.buildQuery(r)),o.setRequestHeader("Content-Type","text/plain"),"onload"in o?(o.onload=bind(this,onReadyStateChange,o,e,s,i),o.onerror=o.ontimeout=i):"onreadystatechange"in o&&(o.onreadystatechange=bind(this,onReadyStateChange,o,e,s,i)),setTimeout(function(){o[xhrSupportsBinary?"sendAsBinary":"send"](n||null)},0)}}});var EMPTY_FUNCTION=function(){},SLICE=Array.prototype.slice;transports.jsonp=Class(baseTransport,function(supr){function onSuccess(e,t){logger.debug("successful: ",e.url,t),e.completed=!0,logger.debug("calling the cb"),e.cb.call(GLOBAL,{status:200,response:t}),logger.debug("cb called")}function onReadyStateChange(e,t){t&&"loaded"!=t.readyState||(t.onreadystatechange=function(){},checkForError.call(this,e))}function checkForError(e,t){if(cleanupIframe(this._ifr[e.type]),!e.completed){var r={status:t?200:404,response:t||"Unable to load resouce"};logger.debug("error making request:",e.url,r),logger.debug("calling eb"),e.eb.call(GLOBAL,r)}}var createIframe=function(){var doc=exports.getDoc();if(!doc.body)return!1;var i=doc.createElement("iframe");with(i.style)display="block",width=height=border=margin=padding="0",overflow=visibility="hidden",position="absolute",top=left="-999px";return i.cbId=0,doc.body.appendChild(i),i.src="about:blank",i},cleanupIframe=function(e){var t=e.contentWindow,r=t.document;logger.debug("removing script tags");for(var n=r.getElementsByTagName("script"),s=n.length-1;s>=0;--s)r.body.removeChild(n[s]);logger.debug("deleting iframe callbacks"),t["cb"+e.cbId]=t["eb"+e.cbId]=EMPTY_FUNCTION},removeIframe=function(e){setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},6e4)};this.init=function(){supr(this,"init"),this._onReady=[],this._isReady=!1,this._createIframes()},this._createIframes=function(){if(this._ifr={send:createIframe(),comet:createIframe()},this._ifr.send===!1)return setTimeout(bind(this,"_createIframes"),100);this._isReady=!0;var e=this._onReady;this._onReady=[];for(var t,r=0;t=e[r];++r)this._makeRequest.apply(this,t)},this.encodePacket=function(e,t,r){return[e,1,base64.encode(t)]},this.abort=function(){this._aborted=!0;for(var e in this._ifr)if(this._ifr.hasOwnProperty(e)){var t=this._ifr[e];cleanupIframe(t),removeIframe(t)}},this._makeRequest=function(e,t,r,n,s,i){if(!this._isReady)return this._onReady.push(arguments);var o=this._ifr[e],a=++o.cbId,c={type:e,id:a,cb:s,eb:i,cbName:"cb"+a,ebName:"eb"+a,completed:!1};switch(r.d=n,r.n=Math.random(),e){case"send":r.rs=";",r.rp=c.cbName;break;case"comet":r.bs=";",r.bp=c.cbName}c.url=t+"?"+uri.buildQuery(r),setTimeout(bind(this,"_request",c),0)},this._request=function(e){var t=this._ifr[e.type],r=t.contentWindow,n=r.document,s=n.body;if(!s)return setTimeout(bind(this,"_request",e),100);if(r[e.ebName]=bind(this,checkForError,e),r[e.cbName]=bind(this,onSuccess,e),BrowserDetect.isWebKit)n.open(),n.write(\'<script src="\'+e.url+\'"></script><script>\'+ebName+"(false)</script>"),n.close();else{var i=n.createElement("script");if(i.src=e.url,null===i.onreadystatechange&&(i.onreadystatechange=bind(this,onReadyStateChange,e,i)),s.appendChild(i),!BrowserDetect.isIE){var i=n.createElement("script");i.innerHTML=e.ebName+"(false)",s.appendChild(i)}}killLoadingBar()};var killLoadingBar=BrowserDetect.isFirefox||BrowserDetect.isOpera?function(){var e=document.body;e&&(killLoadingBar.iframe||(killLoadingBar.iframe=document.createElement("iframe")),e.insertBefore(killLoadingBar.iframe,e.firstChild),e.removeChild(killLoadingBar.iframe))}:function(){}});',pre:!0},"../../node_modules/jsio/packages/util/browserdetect.js":{path:"../../node_modules/jsio/packages/util/browserdetect.js",friendlyPath:"util.browserdetect",directory:"../../node_modules/jsio/packages/util",filename:"browserdetect.js",src:'exports.BrowserDetect=new function(){function i(i){for(var n,r=0;n=i[r];r++){var e=n.string,s=n.prop;if(n.identity=n.identity||n.subString,t=n.versionSearch||n.identity,e){if(-1!=e.indexOf(n.subString))return n.identity}else if(s)return n.identity}}function n(i){if(i&&"string"==typeof i){var n=i.indexOf(t);if(-1==n)return;return parseFloat(i.substring(n+t.length+1))}}var t,r=[{string:navigator.userAgent,subString:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox"},{string:navigator.vendor,subString:"Camino"},{string:navigator.userAgent,subString:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"IE",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],e=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux"}];this.browser=i(r)||"unknown",this.version=n(navigator.userAgent)||n(navigator.appVersion)||"unknown",this.OS=i(e)||"unknown",this.isWebKit=RegExp(" AppleWebKit/").test(navigator.userAgent),this["is"+this.browser]=this.version};',pre:!0},"../../node_modules/jsio/packages/net/env/browser/postmessage.js":{path:"../../node_modules/jsio/packages/net/env/browser/postmessage.js",friendlyPath:"net.env.browser.postmessage",directory:"../../node_modules/jsio/packages/net/env/browser",filename:"postmessage.js",src:'jsio("import net.interfaces"),jsio("from util.browser import $"),jsio("import std.uuid"),exports.Listener=Class(net.interfaces.Listener,function(t){this.init=function(){t(this,"init",arguments),this._clients={},this._opts.clientUrl||(this._opts.clientUrl=jsio.__dir+"/networkConsole.html"),this._port=""+(this._opts.port||"")},this.listen=function(){$.onEvent(window,"message",bind(this,"_onMessage"))},this.getButton=function(t,i){var s=$({tagName:"button",text:i||"launch client",className:"clientButton"});return $.onEvent(s,"click",bind(this,"openWindow",t||this._opts.clientUrl)),s};var i=1;this.openWindow=function(t){var s={menubar:"no",location:"no",toolbar:"no",width:550,height:350,scrollbars:"yes",status:"yes",resizable:"yes"},n=[];for(var o in s)n.push(o+"="+s[o]);var e=window.open(t,"W"+i++,n.join(","));e.focus()},this._onMessage=function(t){if("string"==typeof t.data&&this._port==t.data.substring(0,this._port.length)){var i=t.data.substring(this._port.length);try{i=JSON.parse(i)}catch(s){return void logger.warn("invalid packet",t.data)}switch(i.type){case"open":var n=this._clients[i.uid]=new exports.Transport(t.source,this._port,i.uid);t.source.postMessage(this._port+JSON.stringify({type:"open",uid:i.uid}),"*"),this.onConnect(n);break;case"data":var n=this._clients[i.uid];n&&n.onData(i.payload);break;case"close":var n=this._clients[i.uid];n&&n.onClose(),t.source.postMessage(this._port+JSON.stringify({type:"close",uid:i.uid}),"*"),delete this._clients[i.uid]}}}}),exports.Connector=Class(net.interfaces.Connector,function(){this.connect=function(){this._port=""+(this._opts.port||""),this._win=this._opts.win||window.opener||window.parent,$.onEvent(window,"message",bind(this,"_onMessage")),this._uid=std.uuid.uuid(),this._win.postMessage(this._port+JSON.stringify({type:"open",uid:this._uid}),"*")},this._onMessage=function(t){if("string"==typeof t.data&&this._port==t.data.substring(0,this._port.length)){var i=t.data.substring(this._port.length);try{i=JSON.parse(i)}catch(s){return void logger.warn("invalid packet",t.data)}switch(i.type){case"open":this._transport=new exports.Transport(t.source,this._port,this._uid),this.onConnect(this._transport);break;case"close":if(i.uid!=this._uid)return;this._transport.onClose();break;case"data":if(i.uid!=this._uid)return;this._transport.onData(i.payload)}}}}),exports.Transport=Class(net.interfaces.Transport,function(){this.init=function(t,i,s){this._win=t,this._port=i,this._uid=s},this.makeConnection=function(t){this._protocol=t},this.write=function(t,i){"utf8"==this.encoding?this._win.postMessage(this._port+JSON.stringify({type:"data",uid:this._uid,payload:utf8.encode(t)}),"*"):this._win.postMessage(this._port+JSON.stringify({type:"data",uid:this._uid,payload:t}),"*")},this.loseConnection=function(t){this._win.postMessage(this._port+JSON.stringify({type:"close",uid:this._uid,code:301}),"*")},this.onData=function(){this._protocol.dataReceived.apply(this._protocol,arguments)},this.onClose=function(){this._protocol._connectionLost.apply(this._protocol,arguments)}});',pre:!0},"../../node_modules/jsio/packages/net/env/browser/websocket.js":{path:"../../node_modules/jsio/packages/net/env/browser/websocket.js",friendlyPath:"net.env.browser.websocket",directory:"../../node_modules/jsio/packages/net/env/browser",filename:"websocket.js",src:'jsio("import net.interfaces"),jsio("import std.utf8 as utf8"),jsio("import net.errors as Errors"),exports.Connector=Class(net.interfaces.Connector,function(){this.connect=function(){this._state=net.interfaces.STATE.CONNECTING;var n=this._opts.url,e=this._opts.wsConstructor||window.WebSocket;logger.info("this._opts",this._opts);var t=new e(n);t.onopen=bind(this,"webSocketOnOpen",t),t.onclose=bind(this,"webSocketOnClose",t)},this.webSocketOnOpen=function(n){this.onConnect(new Transport(n))},this.webSocketOnClose=function(n,e){var t,o={rawError:e,webSocket:n};t=e.wasClean?new Errors.ServerClosedConnection("WebSocket Connection Closed",o):this._state==net.interfaces.STATE.CONNECTED?new Errors.ConnectionTimeout("WebSocket Connection Timed Out",o):new Errors.ServerUnreachable("WebSocket Connection Failed",o),logger.debug("conn closed",t),this.onDisconnect(t)}});var Transport=Class(net.interfaces.Transport,function(){this.init=function(n){this._ws=n},this.makeConnection=function(n){this._ws.onmessage=function(e){var t=utf8.encode(e.data);n.dataReceived(t)}},this.write=function(n,e){"plain"==this._encoding&&(result=utf8.decode(n),n=result[0]),this._ws.send(n)},this.loseConnection=function(n){this._ws.close()}});',pre:!0},"../../node_modules/jsio/packages/net/env/browser/socketio.js":{path:"../../node_modules/jsio/packages/net/env/browser/socketio.js",friendlyPath:"net.env.browser.socketio",directory:"../../node_modules/jsio/packages/net/env/browser",filename:"socketio.js",src:'jsio("import lib.Callback"),jsio("import net.interfaces"),jsio("import std.utf8 as utf8");var _script,_scriptOnLoad=new lib.Callback;exports.Connector=Class(net.interfaces.Connector,function(){this.connect=function(){this._state=net.interfaces.STATE.CONNECTING;var t=this._opts.url||"/";/\\/$/.test(t)||(t+="/"),"function"!=typeof io&&"undefined"!=typeof document?(_script=document.createElement("script"),_script.onload=_script.onreadystatechange=function(){"function"==typeof io&&(_script.onload=_script.onreadystatechange=null,_scriptOnLoad.fire(io))},_script.src="/socket.io/socket.io.js",document.getElementsByTagName("head")[0].appendChild(_script)):_scriptOnLoad.hasFired()||_scriptOnLoad.fire(io),_scriptOnLoad.run(bind(this,"_connect"))},this._connect=function(t){logger.debug("opening the connection");var n=t(window.location.origin+this._opts.namespace,{multiplex:!1}),i=new Transport(n),o=bind(this,"onConnect",i);n.on("disconnect",bind(this,"onDisconnect")),n.connected?o():n.on("connect",o)}});var Transport=Class(net.interfaces.Transport,function(){this.init=function(t){this._socket=t},this.makeConnection=function(t){this._socket.on("message",bind(t,"dataReceived"))},this.write=function(t){this._socket.send(t)},this.loseConnection=function(t){this._socket.close()}});',
pre:!0}});;jsio("./devkit")